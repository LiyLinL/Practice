/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){(function(){var t,r,a=new RegExp("<[^>]*>","g"),o=new RegExp("<br[^>]*>","g");function n(e){return e.replace(o,"\n").replace(a,"")}function l(e,r){e=parseFloat(e);r=parseFloat(r);if(!isNaN(r))e-=r;var a=i(e);e=e-a.width+a.cols*t;return isNaN(e)?"auto":100*e/t}function d(e,r,a){e=parseFloat(e);r=parseFloat(r);if(!isNaN(r)&&a)e-=r;var o=i(e);e=e-o.width+o.cols*t;return isNaN(e)?"auto":100*e/(t-(!isNaN(r)?r:0))}function i(t){var r=0;var a=e._els.dhx_cal_header[0].childNodes;var o=a[1]?a[1].childNodes:a[0].childNodes;for(var n=0;n<o.length;n++){var l=o[n].style?o[n]:o[n].parentNode;var d=parseFloat(l.style.width);if(t>d){t-=d+1;r+=d+1}else break}return{width:r,cols:n}}function s(e){e=parseFloat(e);if(isNaN(e))return"auto";return 100*e/r}function c(e,t){return(window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle?e.currentStyle[t]:null)||""}function f(t,r){var a=parseInt(t.style.left,10);for(var o=0;o<e._cols.length;o++){a-=e._cols[o];if(a<0)return o}return r}function h(t,r){var a=parseInt(t.style.top,10);for(var o=0;o<e._colsS.heights.length;o++)if(e._colsS.heights[o]>a)return o;return r}function _(e){return e?"<"+e+">":""}function u(e){return e?"</"+e+">":""}function v(e,t,r,a){var o="<"+e+" profile='"+t+"'";if(r)o+=" header='"+r+"'";if(a)o+=" footer='"+a+"'";o+=">";return o}function m(){var t="";var a=e._mode;if(e.matrix&&e.matrix[e._mode])a=e.matrix[e._mode].render=="cell"?"matrix":"timeline";t+="<scale mode='"+a+"' today='"+e._els.dhx_cal_date[0].innerHTML+"'>";if(e._mode=="week_agenda"){var o=e._els.dhx_cal_data[0].getElementsByTagName("DIV");for(var l=0;l<o.length;l++)if(o[l].className=="dhx_wa_scale_bar")t+="<column>"+n(o[l].innerHTML)+"</column>"}else if(e._mode=="agenda"||e._mode=="map"){var o=e._els.dhx_cal_header[0].childNodes[0].childNodes;t+="<column>"+n(o[0].innerHTML)+"</column><column>"+n(o[1].innerHTML)+"</column>"}else if(e._mode=="year"){var o=e._els.dhx_cal_data[0].childNodes;for(var l=0;l<o.length;l++){t+="<month label='"+n(o[l].querySelector(".dhx_year_month").innerHTML)+"'>";t+=y(o[l].querySelector(".dhx_year_week").childNodes);t+=g(o[l].querySelector(".dhx_year_body"));t+="</month>"}}else{t+="<x>";var o=e._els.dhx_cal_header[0].childNodes;t+=y(o);t+="</x>";var d=e._els.dhx_cal_data[0];if(e.matrix&&e.matrix[e._mode]){t+="<y>";for(var l=0;l<d.firstChild.rows.length;l++){var i=d.firstChild.rows[l];t+="<row><![CDATA["+n(i.cells[0].innerHTML)+"]]></row>"}t+="</y>";r=d.firstChild.rows[0].cells[0].offsetHeight}else if(d.firstChild.tagName=="TABLE"){t+=g(d)}else{d=d.childNodes[d.childNodes.length-1];while(d.className.indexOf("dhx_scale_holder")==-1)d=d.previousSibling;d=d.childNodes;t+="<y>";for(var l=0;l<d.length;l++)t+="\n<row><![CDATA["+n(d[l].innerHTML)+"]]></row>";t+="</y>";r=d[0].offsetHeight}}t+="</scale>";return t}function g(e){var t="";var a=e.querySelectorAll("tr");for(var o=0;o<a.length;o++){var l=[];var d=a[o].querySelectorAll("td");for(var i=0;i<d.length;i++)l.push(d[i].querySelector(".dhx_month_head").innerHTML);t+="\n<row height='"+d[0].offsetHeight+"'><![CDATA["+n(l.join("|"))+"]]></row>";r=d[0].offsetHeight}return t}function y(r){var a,o="";if(e.matrix&&e.matrix[e._mode]){if(e.matrix[e._mode].second_scale)a=r[1].childNodes;r=r[0].childNodes}for(var l=0;l<r.length;l++)o+="\n<column><![CDATA["+n(r[l].innerHTML)+"]]></column>";t=r[0].offsetWidth;if(a){var d=0;var i=r[0].offsetWidth;var s=1;for(var l=0;l<a.length;l++){o+="\n<column second_scale='"+s+"'><![CDATA["+n(a[l].innerHTML)+"]]></column>";d+=a[l].offsetWidth;if(d>=i){i+=r[s]?r[s].offsetWidth:0;s++}t=a[0].offsetWidth}}return o}function p(t){var a="";var o=e._rendered;var i=e.matrix&&e.matrix[e._mode];if(e._mode=="agenda"||e._mode=="map"){for(var _=0;_<o.length;_++)a+="<event><head><![CDATA["+n(o[_].childNodes[0].innerHTML)+"]]></head><body><![CDATA["+n(o[_].childNodes[2].innerHTML)+"]]></body></event>"}else if(e._mode=="week_agenda"){for(var _=0;_<o.length;_++)a+="<event day='"+o[_].parentNode.getAttribute("day")+"'><body>"+n(o[_].innerHTML)+"</body></event>"}else if(e._mode=="year"){var o=e.get_visible_events();for(var _=0;_<o.length;_++){var u=o[_].start_date;if(u.valueOf()<e._min_date.valueOf())u=e._min_date;while(u<o[_].end_date){var v=u.getMonth()+12*(u.getFullYear()-e._min_date.getFullYear())-e.week_starts._month;var m=e.week_starts[v]+u.getDate()-1;var g=t?c(e._get_year_cell(u),"color"):"";var y=t?c(e._get_year_cell(u),"backgroundColor"):"";a+="<event day='"+m%7+"' week='"+Math.floor(m/7)+"' month='"+v+"' backgroundColor='"+y+"' color='"+g+"'></event>";u=e.date.add(u,1,"day");if(u.valueOf()>=e._max_date.valueOf())break}}}else if(i&&i.render=="cell"){var o=e._els.dhx_cal_data[0].getElementsByTagName("TD");for(var _=0;_<o.length;_++){var g=t?c(o[_],"color"):"";var y=t?c(o[_],"backgroundColor"):"";a+="\n<event><body backgroundColor='"+y+"' color='"+g+"'><![CDATA["+n(o[_].innerHTML)+"]]></body></event>"}}else{for(var _=0;_<o.length;_++){var p,N;if(e.matrix&&e.matrix[e._mode]){p=l(o[_].style.left);N=l(o[_].offsetWidth)-1}else{var x=e.config.use_select_menu_space?0:26;p=d(o[_].style.left,x,true);N=d(o[_].style.width,x)-1}if(isNaN(N*1))continue;var w=s(o[_].style.top);var b=s(o[_].style.height);var T=o[_].className.split(" ")[0].replace("dhx_cal_","");if(T==="dhx_tooltip_line")continue;var C=e.getEvent(o[_].getAttribute("event_id"));if(!C)continue;var m=C._sday;var A=C._sweek;var H=C._length||0;if(e._mode=="month"){b=parseInt(o[_].offsetHeight,10);w=parseInt(o[_].style.top,10)-e.xy.month_head_height;m=f(o[_],m);A=h(o[_],A)}else if(e.matrix&&e.matrix[e._mode]){m=0;var D=o[_].parentNode.parentNode.parentNode;A=D.rowIndex;var M=r;r=o[_].parentNode.offsetHeight;w=s(o[_].style.top);w-=w*.2;r=M}else{if(o[_].parentNode==e._els.dhx_cal_data[0])continue;var k=e._els["dhx_cal_data"][0].childNodes[0];var L=parseFloat(k.className.indexOf("dhx_scale_holder")!=-1?k.style.left:0);p+=l(o[_].parentNode.style.left,L)}a+="\n<event week='"+A+"' day='"+m+"' type='"+T+"' x='"+p+"' y='"+w+"' width='"+N+"' height='"+b+"' len='"+H+"'>";if(T=="event"){a+="<header><![CDATA["+n(o[_].childNodes[1].innerHTML)+"]]></header>";var g=t?c(o[_].childNodes[2],"color"):"";var y=t?c(o[_].childNodes[2],"backgroundColor"):"";a+="<body backgroundColor='"+y+"' color='"+g+"'><![CDATA["+n(o[_].childNodes[2].innerHTML)+"]]></body>"}else{var g=t?c(o[_],"color"):"";var y=t?c(o[_],"backgroundColor"):"";a+="<body backgroundColor='"+y+"' color='"+g+"'><![CDATA["+n(o[_].innerHTML)+"]]></body>"}a+="</event>"}}return a}function N(t,r,a,o,n,l){var d=false;if(o=="fullcolor"){d=true;o="color"}o=o||"color";var i="";if(t){var s=e._date;var c=e._mode;r=e.date[a+"_start"](r);r=e.date["get_"+a+"_end"]?e.date["get_"+a+"_end"](r):e.date.add(r,1,a);i=v("pages",o,n,l);for(var f=new Date(t);+f<+r;f=this.date.add(f,1,a)){this.setCurrentView(f,a);i+=_("page")+m().replace("–","-")+p(d)+u("page")}i+=u("pages");this.setCurrentView(s,c)}else{i=v("data",o,n,l)+m().replace("–","-")+p(d)+u("data")}return i}e.getPDFData=N;function x(t,r){var a=e.uid();var o=document.createElement("div");o.style.display="none";document.body.appendChild(o);o.innerHTML='<form id="'+a+'" method="post" target="_blank" action="'+r+'" accept-charset="utf-8" enctype="application/x-www-form-urlencoded"><input type="hidden" name="mycoolxmlbody"/> </form>';document.getElementById(a).firstChild.value=encodeURIComponent(t);document.getElementById(a).submit();o.parentNode.removeChild(o)}function w(e,t,r,a,o,n,l){var d="";if(typeof o=="object"){d=b(o)}else{d=N.apply(this,[e,t,r,o,n,l])}x(d,a)}function b(e){var t="<data>";for(var r=0;r<e.length;r++){t+=e[r].source.getPDFData(e[r].start,e[r].end,e[r].view,e[r].mode,e[r].header,e[r].footer)}t+="</data>";return t}e.toPDF=function(e,t,r,a){return w.apply(this,[null,null,null,e,t,r,a])};e.toPDFRange=function(t,r,a,o,n,l,d){if(typeof t=="string"){t=e.templates.api_date(t);r=e.templates.api_date(r)}return w.apply(this,arguments)}})()});