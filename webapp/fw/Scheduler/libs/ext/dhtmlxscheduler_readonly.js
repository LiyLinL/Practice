/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e.attachEvent("onTemplatesReady",function(){var t;if(e.form_blocks.recurring){t=e.form_blocks.recurring.set_value}var i=e.config.buttons_left.slice();var r=e.config.buttons_right.slice();e.attachEvent("onBeforeLightbox",function(o){if(this.config.readonly_form||this.getEvent(o).readonly){this.config.readonly_active=true}else{this.config.readonly_active=false;e.config.buttons_left=i.slice();e.config.buttons_right=r.slice();if(e.form_blocks.recurring){e.form_blocks.recurring.set_value=t}}var n=this.config.lightbox.sections;if(this.config.readonly_active){for(var l=0;l<n.length;l++){if(n[l].type=="recurring"){if(this.config.readonly_active&&e.form_blocks.recurring){e.form_blocks.recurring.set_value=function(t,i,r){var o=e.$domHelpers.closest(t,".dhx_wrap_section");var n="none";o.querySelector(".dhx_cal_lsection").display=n;o.querySelector(".dhx_form_repeat").display=n;o.style.display=n;e.setLightboxSize()}}}}var a=["dhx_delete_btn","dhx_save_btn"];var s=[e.config.buttons_left,e.config.buttons_right];for(var l=0;l<a.length;l++){var c=a[l];for(var h=0;h<s.length;h++){var f=s[h];var _=-1;for(var d=0;d<f.length;d++){if(f[d]==c){_=d;break}}if(_!=-1){f.splice(_,1)}}}}this.resetLightbox();return true});function o(e,t,i,r){var o=t.getElementsByTagName(e);var n=i.getElementsByTagName(e);for(var l=n.length-1;l>=0;l--){var i=n[l];if(!r){i.disabled=true;if(t.checked)i.checked=true}else{var a=document.createElement("span");a.className="dhx_text_disabled";a.innerHTML=r(o[l]);i.parentNode.insertBefore(a,i);i.parentNode.removeChild(i)}}}var n=e._fill_lightbox;e._fill_lightbox=function(){var t=this.getLightbox();if(this.config.readonly_active){t.style.visibility="hidden";t.style.display="block"}var i=n.apply(this,arguments);if(this.config.readonly_active){t.style.visibility="";t.style.display="none"}if(this.config.readonly_active){var r=this.getLightbox();var a=this._lightbox_r=r.cloneNode(true);a.id=e.uid();a.className+=" dhx_cal_light_readonly";o("textarea",r,a,function(e){return e.value});o("input",r,a,false);o("select",r,a,function(e){if(!e.options.length)return"";return e.options[Math.max(e.selectedIndex||0,0)].text});r.parentNode.insertBefore(a,r);l.call(this,a);if(e._lightbox)e._lightbox.parentNode.removeChild(e._lightbox);this._lightbox=a;if(e.config.drag_lightbox)a.firstChild.onmousedown=e._ready_to_dnd;this.setLightboxSize();a.onclick=function(t){var i=t?t.target:event.srcElement;var r=e.$domHelpers.closest(i,".dhx_btn_set");if(r){if(r.querySelector(".dhx_cancel_btn")){e.cancel_lightbox()}}};a.onkeydown=function(t){var i=t||window.event;var r=t.target||t.srcElement;var o=r.querySelector("[dhx_button]");if(!o){o=r.parentNode.querySelector(".dhx_custom_button, .dhx_readonly")}switch((t||i).keyCode){case 32:{if((t||i).shiftKey)return;if(o&&o.click){o.click()}break}case e.keys.edit_cancel:e.cancel_lightbox();break;default:break}}}return i};var l=e.showCover;e.showCover=function(){if(!this.config.readonly_active)l.apply(this,arguments)};var a=e.hide_lightbox;e.hide_lightbox=function(){if(this._lightbox_r){this._lightbox_r.parentNode.removeChild(this._lightbox_r);this._lightbox_r=this._lightbox=null}return a.apply(this,arguments)}})});