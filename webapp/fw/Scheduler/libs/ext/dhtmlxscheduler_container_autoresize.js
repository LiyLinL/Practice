/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e.config.container_autoresize=true;e.config.month_day_min_height=90;e.config.min_grid_size=25;e.config.min_map_size=400;var i=e._pre_render_events;var t=true;var h=0;var n=0;e._pre_render_events=function(a,s){if(!(e.config.container_autoresize&&t)){return i.apply(this,arguments)}var o=this.xy.bar_height;var l=this._colsS.heights;var r=this._colsS.heights=[0,0,0,0,0,0,0];var _=this._els["dhx_cal_data"][0];if(!this._table_view)a=this._pre_render_events_line(a,s);else a=this._pre_render_events_table(a,s);if(this._table_view){if(s){this._colsS.heights=l}else{var d=_.firstChild;if(d.rows){for(var c=0;c<d.rows.length;c++){r[c]++;if(r[c]*o>this._colsS.height-this.xy.month_head_height){var f=d.rows[c].cells;var g=this._colsS.height-this.xy.month_head_height;if(this.config.max_month_events*1!==this.config.max_month_events||r[c]<=this.config.max_month_events){g=r[c]*o}else if((this.config.max_month_events+1)*o>this._colsS.height-this.xy.month_head_height){g=(this.config.max_month_events+1)*o}for(var v=0;v<f.length;v++){f[v].childNodes[1].style.height=g+"px"}r[c]=(r[c-1]||0)+f[0].offsetHeight}r[c]=(r[c-1]||0)+d.rows[c].cells[0].offsetHeight}r.unshift(0);if(d.parentNode.offsetHeight<d.parentNode.scrollHeight&&!d._h_fix){}}else{if(!a.length&&this._els["dhx_multi_day"][0].style.visibility=="visible")r[0]=-1;if(a.length||r[0]==-1){var m=d.parentNode.childNodes;var u=(r[0]+1)*o+1;if(n!=u+1){this._obj.style.height=h-n+u-1+"px"}u+="px";_.style.top=this._els["dhx_cal_navline"][0].offsetHeight+this._els["dhx_cal_header"][0].offsetHeight+parseInt(u,10)+"px";_.style.height=this._obj.offsetHeight-parseInt(_.style.top,10)-(this.xy.margin_top||0)+"px";var x=this._els["dhx_multi_day"][0];x.style.height=u;x.style.visibility=r[0]==-1?"hidden":"visible";x=this._els["dhx_multi_day"][1];x.style.height=u;x.style.visibility=r[0]==-1?"hidden":"visible";x.className=r[0]?"dhx_multi_day_icon":"dhx_multi_day_icon_small";this._dy_shift=(r[0]+1)*o;r[0]=0}}}}return a};var a=["dhx_cal_navline","dhx_cal_header","dhx_multi_day","dhx_cal_data"];var s=function(i){h=0;for(var t=0;t<a.length;t++){var s=a[t];var o=e._els[s]?e._els[s][0]:null;var l=0;switch(s){case"dhx_cal_navline":case"dhx_cal_header":l=parseInt(o.style.height,10);break;case"dhx_multi_day":l=o?o.offsetHeight-1:0;n=l;break;case"dhx_cal_data":var _=e.getState().mode;if(o.childNodes[1]&&_!="month"){l=o.childNodes[1].offsetHeight}else{l=Math.max(o.offsetHeight-1,o.scrollHeight)}if(_=="month"){if(e.config.month_day_min_height&&!i){var d=o.getElementsByTagName("tr").length;l=d*e.config.month_day_min_height}if(i){o.style.height=l+"px"}}else if(_=="year"){l=190*e.config.year_y}else if(_=="agenda"){l=0;if(o.childNodes&&o.childNodes.length){for(var c=0;c<o.childNodes.length;c++){l+=o.childNodes[c].offsetHeight}}if(l+2<e.config.min_grid_size){l=e.config.min_grid_size}else{l+=2}}else if(_=="week_agenda"){var f=e.xy.week_agenda_scale_height+e.config.min_grid_size,g;var v;for(var m=0;m<o.childNodes.length;m++){v=o.childNodes[m];for(var c=0;c<v.childNodes.length;c++){var u=0,x=v.childNodes[c].childNodes[1];for(var y=0;y<x.childNodes.length;y++){u+=x.childNodes[y].offsetHeight}g=u+e.xy.week_agenda_scale_height;g=m==1&&(c==2||c==3)?g*2:g;if(g>f){f=g}}}l=f*3}else if(_=="map"){l=0;var p=o.querySelectorAll(".dhx_map_line");for(var c=0;c<p.length;c++){l+=p[c].offsetHeight}if(l+2<e.config.min_map_size){l=e.config.min_map_size}else{l+=2}}else if(e._gridView){l=0;if(o.childNodes[1].childNodes[0].childNodes&&o.childNodes[1].childNodes[0].childNodes.length){var p=o.childNodes[1].childNodes[0].childNodes[0].childNodes;for(var c=0;c<p.length;c++){l+=p[c].offsetHeight}l+=2;if(l<e.config.min_grid_size){l=e.config.min_grid_size}}else{l=e.config.min_grid_size}}if(e.matrix&&e.matrix[_]){if(i){l+=0;o.style.height=l+"px"}else{l=0;var N=e.matrix[_];var w=N.y_unit;for(var E=0;E<w.length;E++){l+=N._section_height[w[E].key]}if(e.$container.clientWidth!=e.$container.scrollWidth){l+=r()}}l-=1}if(_=="day"||_=="week"||e._props&&e._props[_]){l+=2}break}l+=1;h+=l}e._obj.style.height=h+"px";if(!i)e.updateView()};function o(){t=false;e.callEvent("onAfterSchedulerResize",[]);t=true}var l=function(){if(!(e.config.container_autoresize&&t))return true;var i=e.getState().mode;if(!i){return true}var h=window.requestAnimationFrame||window.setTimeout;var n=document.documentElement.scrollTop;h(function(){s()});if(e.matrix&&e.matrix[i]||i=="month"){h(function(){s(true);document.documentElement.scrollTop=n;o()},1)}else{o()}};e.attachEvent("onBeforeViewChange",function(){var i=e.config.container_autoresize;if(!e.xy.$original_scroll_width){e.xy.$original_scroll_width=e.xy.scroll_width}e.xy.scroll_width=i?0:e.xy.$original_scroll_width;if(e.matrix){for(var t in e.matrix){var h=e.matrix[t];if(!h.$original_section_autoheight){h.$original_section_autoheight=h.section_autoheight}if(i){h.section_autoheight=false}else{h.section_autoheight=h.$original_section_autoheight}}}return true});e.attachEvent("onViewChange",l);e.attachEvent("onXLE",l);e.attachEvent("onEventChanged",l);e.attachEvent("onEventCreated",l);e.attachEvent("onEventAdded",l);e.attachEvent("onEventDeleted",l);e.attachEvent("onAfterSchedulerResize",l);e.attachEvent("onClearAll",l);e.attachEvent("onBeforeExpand",function(){t=false;return true});e.attachEvent("onBeforeCollapse",function(){t=true;return true});function r(){var e=document.createElement("div");e.style.cssText="visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;";document.body.appendChild(e);var i=e.offsetWidth-e.clientWidth;document.body.removeChild(e);return i}});