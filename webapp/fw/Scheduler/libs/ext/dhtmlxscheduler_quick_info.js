/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(t){t.config.icons_select=["icon_details","icon_delete"];t.config.details_on_create=true;t.config.show_quick_info=true;t.xy.menu_width=0;t.attachEvent("onClick",function(e){t.showQuickInfo(e);return true});(function(){var e=["onEmptyClick","onViewChange","onLightbox","onBeforeEventDelete","onBeforeDrag"];var i=function(){t.hideQuickInfo(true);return true};for(var n=0;n<e.length;n++){t.attachEvent(e[n],i)}})();t.templates.quick_info_title=function(t,e,i){return i.text.substr(0,50)};t.templates.quick_info_content=function(t,e,i){return i.details||i.text};t.templates.quick_info_date=function(e,i,n){if(t.isOneDayEvent(n)&&t.config.rtl){return t.templates.day_date(e,i,n)+" "+t.templates.event_header(i,e,n)}else if(t.isOneDayEvent(n)){return t.templates.day_date(e,i,n)+" "+t.templates.event_header(e,i,n)}else if(t.config.rtl){return t.templates.week_date(i,e,n)}else{return t.templates.week_date(e,i,n)}};t.showQuickInfo=function(t){if(t==this._quick_info_box_id||!this.config.show_quick_info)return;this.hideQuickInfo(true);var e=this._get_event_counter_part(t);if(e){this._quick_info_box=this._init_quick_info(e);this._fill_quick_data(t);this._show_quick_info(e);this.callEvent("onQuickInfo",[t])}};(function(){function e(t){t=t||"";var e=parseFloat(t),i=t.match(/m?s/),n;if(i){i=i[0]}switch(i){case"s":n=e*1e3;break;case"ms":n=e;break;default:n=0;break}return n}t.hideQuickInfo=function(i){var n=this._quick_info_box;var o=this._quick_info_box_id;this._quick_info_box_id=0;if(n&&n.parentNode){var _=n.offsetWidth;if(t.config.quick_info_detached){this.callEvent("onAfterQuickInfo",[o]);return n.parentNode.removeChild(n)}if(n.style.right=="auto")n.style.left=-_+"px";else n.style.right=-_+"px";if(i){n.parentNode.removeChild(n)}else{var a;if(window.getComputedStyle){a=window.getComputedStyle(n,null)}else if(n.currentStyle){a=n.currentStyle}var c=e(a["transition-delay"])+e(a["transition-duration"]);setTimeout(function(){if(n.parentNode){n.parentNode.removeChild(n)}},c)}this.callEvent("onAfterQuickInfo",[o])}}})();t.event(window,"keydown",function(e){if(e.keyCode==27)t.hideQuickInfo()});t._show_quick_info=function(e){var i=t._quick_info_box;t._obj.appendChild(i);var n=i.offsetWidth;var o=i.offsetHeight;if(t.config.quick_info_detached){var _=e.left-e.dx*(n-e.width);var a=_+n;if(a>window.innerWidth){_=window.innerWidth-n}_=Math.max(0,_);i.style.left=_+"px";i.style.top=e.top-(e.dy?o:-e.height)+"px"}else{i.style.top=this.xy.scale_height+this.xy.nav_height+20+"px";if(e.dx==1){i.style.right="auto";i.style.left=-n+"px";setTimeout(function(){i.style.left="-10px"},1)}else{i.style.left="auto";i.style.right=-n+"px";setTimeout(function(){i.style.right="-10px"},1)}i.className=i.className.replace(" dhx_qi_left","").replace(" dhx_qi_right","")+" dhx_qi_"+(e.dx==1?"left":"right")}};t.attachEvent("onTemplatesReady",function(){t.hideQuickInfo();if(this._quick_info_box){var e=this._quick_info_box;if(e.parentNode){e.parentNode.removeChild(e)}this._quick_info_box=null}});t._quick_info_onscroll_handler=function(e){t.hideQuickInfo()};t._init_quick_info=function(){if(!this._quick_info_box){var e=t.xy;var i=this._quick_info_box=document.createElement("div");this._waiAria.quickInfoAttr(i);i.className="dhx_cal_quick_info";if(t.$testmode)i.className+=" dhx_no_animate";if(t.config.rtl)i.className+=" dhx_quick_info_rtl";var n=this._waiAria.quickInfoHeaderAttrString();var o='<div class="dhx_cal_qi_title" style="height:'+e.quick_info_title+'px" '+n+">"+'<div class="dhx_cal_qi_tcontent"></div><div  class="dhx_cal_qi_tdate"></div>'+"</div>"+'<div class="dhx_cal_qi_content"></div>';o+='<div class="dhx_cal_qi_controls" style="height:'+e.quick_info_buttons+'px">';var _=t.config.icons_select;for(var a=0;a<_.length;a++){var n=this._waiAria.quickInfoButtonAttrString(this.locale.labels[_[a]]);o+="<div "+n+' class="dhx_qi_big_icon '+_[a]+'" title="'+t.locale.labels[_[a]]+"\"><div class='dhx_menu_icon "+_[a]+"'></div><div>"+t.locale.labels[_[a]]+"</div></div>"}o+="</div>";i.innerHTML=o;t.event(i,"click",function(e){e=e||event;t._qi_button_click(e.target||e.srcElement)});if(t.config.quick_info_detached){t._detachDomEvent(t._els["dhx_cal_data"][0],"scroll",t._quick_info_onscroll_handler);t.event(t._els["dhx_cal_data"][0],"scroll",t._quick_info_onscroll_handler)}}return this._quick_info_box};t._qi_button_click=function(e){var i=t._quick_info_box;if(!e||e==i)return;var n=t._getClassName(e);if(n.indexOf("_icon")!=-1){var o=t._quick_info_box_id;t._click.buttons[n.split(" ")[1].replace("icon_","")](o)}else t._qi_button_click(e.parentNode)};t._get_event_counter_part=function(e){var i=t.getRenderedEvent(e);var n=0;var o=0;var _=i;while(_&&_!=t._obj){n+=_.offsetLeft;o+=_.offsetTop-_.scrollTop;_=_.offsetParent}if(_){var a=n+i.offsetWidth/2>t._x/2?1:0;var c=o+i.offsetHeight/2>t._y/2?1:0;return{left:n,top:o,dx:a,dy:c,width:i.offsetWidth,height:i.offsetHeight}}return 0};t._fill_quick_data=function(e){var i=t.getEvent(e);var n=t._quick_info_box;t._quick_info_box_id=e;var o={content:t.templates.quick_info_title(i.start_date,i.end_date,i),date:t.templates.quick_info_date(i.start_date,i.end_date,i)};var _=n.firstChild.firstChild;_.innerHTML=o.content;var a=_.nextSibling;a.innerHTML=o.date;t._waiAria.quickInfoHeader(n,[o.content,o.date].join(" "));var c=n.firstChild.nextSibling;c.innerHTML=t.templates.quick_info_content(i.start_date,i.end_date,i)}});