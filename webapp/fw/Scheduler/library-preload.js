//@ui5-bundle fw/Scheduler/library-preload.js
sap.ui.predefine("fw/Scheduler/Scheduler",["sap/ui/core/Control","sap/ui/core/Element","./library"],function(e,t,n){"use strict";var i=e.extend("fw.Scheduler.Scheduler",{metadata:{library:"fw.Scheduler",properties:{width:{type:"string",group:"appearance",defaultValue:"100%"},height:{type:"string",group:"appearance",defaultValue:"100%"},defaultDate:{type:"string",group:"config",defaultValue:"%Y/%m/%d"},detailsOnCreate:{type:"boolean",group:"config",defaultValue:false},dblclickCreate:{type:"boolean",group:"config",defaultValue:false},dragCreate:{type:"boolean",group:"config",defaultValue:false},detailsOnDblclick:{type:"boolean",group:"config",defaultValue:false},eventOnDblclick:{type:"boolean",group:"config",defaultValue:false},eventDrag:{type:"boolean",group:"config",defaultValue:false},beforeEventChanged:{type:"boolean",group:"config",defaultValue:false},beforeLightbox:{type:"boolean",group:"config",defaultValue:false},beforeTodayDisplayed:{type:"boolean",group:"config",defaultValue:true},name:{type:"string",defaultValue:"timeline"},xUnit:{type:"string",defaultValue:"minute"},xDate:{type:"string",defaultValue:"%H:%i"},xStep:{type:"int",defaultValue:60},xSize:{type:"int",defaultValue:24},xStart:{type:"int",defaultValue:7},xLength:{type:"int",defaultValue:24},yUnit:{type:"object",defaultValue:undefined},yProperty:{type:"string",defaultValue:"headKey"},render:{type:"string",defaultValue:"bar"},secondScale:{type:"object",defaultValue:undefined},detail:{type:"object",defaultValue:undefined},lightBoxSections:{type:"object",defaultValue:[]},dx:{type:"int",defaultValue:220},autoHeight:{type:"boolean",defaultValue:false}},events:{onDblClick:{parameters:{id:{type:"string"},e:{type:"object"}}},onViewChange:{parameters:{new_mode:{type:"string"},new_date:{type:"object"}}},onDataRender:{parameters:{}},onBeforeLightbox:{parameters:{id:{type:"string"}}},onBeforeDrag:{parameters:{id:{type:"string"},mode:{type:"string"},e:{type:"Event"}}},onBeforeEventChanged:{parameters:{ev:{type:"object"},e:{type:"Event"},is_new:{type:"boolean"},original:{type:"object"}}},onBeforeTodayDisplayed:{parameters:{}},showLightbox:{parameters:{id:{type:"string"}}},onPickCalDate:{parameters:{date:{type:"date"}}}}},init:function(){var e=window.innerHeight-100;this.setProperty("height",e+"px")},onAfterRendering:function(e){this.setConfig();if(scheduler.getView(this.getName())==null){this.createTimeLine();this.onDblClick();this.onViewChange();this.onDataRender();this.onBeforeLightbox();this.onBeforeDrag();this.onBeforeEventChanged();this.onBeforeTodayDisplayed();this.showLightbox()}this.miniCalCreate();var t=this.getId();var n=this.getName();scheduler.init(this.getId(),new Date,this.getName());scheduler.clearAll();this.updateCollection(this.getYUnit());this.parse(this.getDetail())},setConfig:function(){scheduler.config.default_date=this.getDefaultDate();scheduler.config.details_on_create=this.getDetailsOnCreate();scheduler.config.dblclick_create=this.getDblclickCreate();scheduler.config.drag_create=this.getDragCreate();scheduler.config.details_on_dblclick=this.getDetailsOnDblclick();scheduler.config.lightbox.sections=this.getLightBoxSections()},createTimeLine:function(){var e=this.getSecondScale();if(!e){e={x_unit:"day",x_date:"%m/%d"}}scheduler.createTimelineView({name:this.getName(),x_unit:this.getXUnit(),x_date:this.getXDate(),x_step:this.getXStep(),x_size:this.getXSize(),x_start:this.getXStart(),x_length:this.getXLength(),y_unit:scheduler.serverList("section",this.getYUnit()),y_property:this.getYProperty(),render:this.getRender(),section_autoheight:this.getAutoHeight(),second_scale:e,dx:this.getDx()})},miniCalCreate:function(){var e=this;$("#dhx_minical_icon").click(function(){if(scheduler.isCalendarVisible()){scheduler.destroyCalendar()}else{scheduler.renderCalendar({position:"dhx_minical_icon",date:scheduler.getState().date,navigation:true,handler:function(t,n){e.fireOnPickCalDate({date:t});scheduler.setCurrentView(t);scheduler.destroyCalendar()}})}})},onViewChange:function(){var e=this;scheduler.attachEvent("onViewChange",function(t,n){e.fireOnViewChange({new_mode:t,new_date:n})})},onDataRender:function(){var e=this,t=this.getId();scheduler.attachEvent("onDataRender",function(){var n=$("#"+t).children("div.dhx_cal_navline").children(".dhx_cal_date");var i=n.text();if(i.includes("–")){n.text(i.split("–")[0].replace(/\s*/g,""))}e.fireOnDataRender()})},onBeforeLightbox:function(){var e=this;scheduler.attachEvent("onBeforeLightbox",function(t){e.fireOnBeforeLightbox({id:t});return e.getBeforeLightbox()})},onDblClick:function(){var e=this;scheduler.attachEvent("onDblClick",function(t,n){e.fireOnDblClick({id:t,e:n});return e.getEventOnDblclick()})},onBeforeDrag:function(){var e=this;scheduler.attachEvent("onBeforeDrag",function(t,n,i){e.fireOnBeforeDrag({id:t,mode:n,e:i});return e.getEventDrag()})},onBeforeEventChanged:function(){var e=this;scheduler.attachEvent("onBeforeEventChanged",function(t,n,i,a){e.fireOnBeforeEventChanged({ev:t,e:n,is_new:i,original:a});return e.getBeforeEventChanged()})},onBeforeTodayDisplayed:function(){var e=this;scheduler.attachEvent("onBeforeTodayDisplayed",function(){e.fireOnBeforeTodayDisplayed();return e.getBeforeTodayDisplayed()})},updateCollection:function(e){scheduler.updateCollection("section",e);return this},parse:function(e){scheduler.parse(e);return this},setCurrentView:function(e,t){if(e&&t){scheduler.setCurrentView(e,t)}else if(e&&!t){scheduler.setCurrentView(e)}else{scheduler.setCurrentView()}},deleteMarkedTimespan:function(e){if(e){scheduler.deleteMarkedTimespan(e)}else{scheduler.deleteMarkedTimespan()}},addMarkedTimespan:function(e){scheduler.addMarkedTimespan(e);return this},showLightbox:function(){scheduler.showLightbox=function(e){}}});return i});
sap.ui.predefine("fw/Scheduler/SchedulerRenderer",[],function(){"use strict";var e={};e.render=function(e,i){e.write("<div");e.writeControlData(i);e.addStyle("width",i.getWidth());e.addStyle("height",i.getHeight());e.writeStyles();e.addClass("dhx_cal_container");e.writeClasses();e.write(">");e.write("<div");e.addClass("dhx_cal_navline");e.writeClasses();e.write(">");e.write("<div");e.addClass("dhx_cal_prev_button");e.writeClasses();e.write("></div>");e.write("<div");e.addClass("dhx_cal_next_button");e.writeClasses();e.write("></div>");e.write("<div");e.addClass("dhx_cal_today_button");e.writeClasses();e.write("></div>");e.write("<div");e.addClass("dhx_cal_date");e.writeClasses();e.addStyle("color","#CCE7F6");e.writeStyles();e.write("></div>");e.write('<div id="dhx_minical_icon"');e.addClass("dhx_minical_icon");e.writeClasses();e.write("></div>");e.write("</div>");e.write("<div");e.addClass("dhx_cal_header");e.writeClasses();e.write("></div>");e.write("<div");e.addClass("dhx_cal_data");e.writeClasses();e.write("></div>");e.write("</div>")};return e},true);
sap.ui.predefine("fw/Scheduler/library",["sap/ui/core/Core","sap/ui/core/library","./libs/dhtmlxscheduler","./libs/ext/dhtmlxscheduler_limit","./libs/ext/dhtmlxscheduler_timeline","./libs/ext/dhtmlxscheduler_treetimeline","./libs/ext/dhtmlxscheduler_tooltip","./libs/ext/dhtmlxscheduler_minical","./libs/ext/dhtmlxscheduler_collision"],function(e,l){"use strict";sap.ui.getCore().initLibrary({name:"fw.Scheduler",version:"1.0.0",dependencies:["sap.ui.core"],types:[],interfaces:[],noLibraryCSS:false,controls:["fw.Scheduler.Scheduler"],elements:[]});return fw.Scheduler});
sap.ui.require.preload({
	"fw/Scheduler/libs/dhtmlxscheduler.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
!function(){function dtmlXMLLoaderObject(t,e,i,n){return this.xmlDoc="",this.async=void 0===i||i,this.onloadAction=t||null,this.mainObject=e||null,this.waitCall=null,this.rSeed=n||!1,this}function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.lastLanding=0,this.dragNode=0,this.dragStartNode=0,this.dragStartObject=0,this.tempDOMU=null,this.tempDOMM=null,this.waitDrag=0,window.dhtmlDragAndDrop=this,this)}function _dhtmlxError(t,e,i){return this.catches||(this.catches=[]),this}function dhtmlXHeir(t,e){for(var i in e)"function"==typeof e[i]&&(t[i]=e[i]);return t}window.dhtmlx||(window.dhtmlx=function(t){for(var e in t)dhtmlx[e]=t[e];return dhtmlx}),dhtmlx.extend_api=function(t,e,i){var n=window[t];n&&(window[t]=function(t){var i;if(t&&"object"==typeof t&&!t.tagName){i=n.apply(this,e._init?e._init(t):arguments);for(var a in dhtmlx)e[a]&&this[e[a]](dhtmlx[a]);for(var a in t)e[a]?this[e[a]](t[a]):0===a.indexOf("on")&&this.attachEvent(a,t[a])}else i=n.apply(this,arguments);return e._patch&&e._patch(this),i||this},window[t].prototype=n.prototype,i&&dhtmlXHeir(window[t].prototype,i))},window.dhtmlxAjax={get:function(t,e){var i=new dtmlXMLLoaderObject(!0);return i.async=arguments.length<3,i.waitCall=e,i.loadXML(t),i},post:function(t,e,i){var n=new dtmlXMLLoaderObject(!0);return n.async=arguments.length<4,n.waitCall=i,n.loadXML(t,!0,e),n},getSync:function(t){return this.get(t,null,!0)},postSync:function(t,e){return this.post(t,e,null,!0)}},window.dtmlXMLLoaderObject=dtmlXMLLoaderObject,dtmlXMLLoaderObject.count=0,dtmlXMLLoaderObject.prototype.waitLoadFunction=function(t){var e=!0;return this.check=function(){if(t&&t.onloadAction&&(!t.xmlDoc.readyState||4==t.xmlDoc.readyState)){if(!e)return;e=!1,dtmlXMLLoaderObject.count++,"function"==typeof t.onloadAction&&t.onloadAction(t.mainObject,null,null,null,t),t.waitCall&&(t.waitCall.call(this,t),t.waitCall=null)}},this.check},dtmlXMLLoaderObject.prototype.getXMLTopNode=function(t,e){var i;if(this.xmlDoc.responseXML){var n=this.xmlDoc.responseXML.getElementsByTagName(t);if(0===n.length&&-1!=t.indexOf(":"))var n=this.xmlDoc.responseXML.getElementsByTagName(t.split(":")[1]);i=n[0]}else i=this.xmlDoc.documentElement;if(i)return this._retry=!1,i;if(!this._retry&&_isIE){this._retry=!0;var e=this.xmlDoc;return this.loadXMLString(this.xmlDoc.responseText.replace(/^[\s]+/,""),!0),this.getXMLTopNode(t,e)}return dhtmlxError.throwError("LoadXML","Incorrect XML",[e||this.xmlDoc,this.mainObject]),document.createElement("div")},dtmlXMLLoaderObject.prototype.loadXMLString=function(t,e){if(_isIE)this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.onreadystatechange=function(){},this.xmlDoc.loadXML(t);else{var i=new DOMParser;this.xmlDoc=i.parseFromString(t,"text/xml")}e||(this.onloadAction&&this.onloadAction(this.mainObject,null,null,null,this),this.waitCall&&(this.waitCall(),this.waitCall=null))},dtmlXMLLoaderObject.prototype.loadXML=function(t,e,i,n){this.rSeed&&(t+=(-1!=t.indexOf("?")?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf()),this.filePath=t,!_isIE&&window.XMLHttpRequest?this.xmlDoc=new XMLHttpRequest:this.xmlDoc=new ActiveXObject("Microsoft.XMLHTTP"),this.async&&(this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this)),"string"==typeof e?this.xmlDoc.open(e,t,this.async):this.xmlDoc.open(e?"POST":"GET",t,this.async),n?(this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type","text/xml")):e&&this.xmlDoc.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xmlDoc.send(i),this.async||new this.waitLoadFunction(this)()},dtmlXMLLoaderObject.prototype.destructor=function(){return this._filterXPath=null,this._getAllNamedChilds=null,this._retry=null,this.async=null,this.rSeed=null,this.filePath=null,this.onloadAction=null,this.mainObject=null,this.xmlDoc=null,this.doXPath=null,this.doXPathOpera=null,this.doXSLTransToObject=null,this.doXSLTransToString=null,this.loadXML=null,this.loadXMLString=null,this.doSerialization=null,this.xmlNodeToJSON=null,this.getXMLTopNode=null,this.setXSLParamValue=null,null},dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(t){for(var e={},i=0;i<t.attributes.length;i++)e[t.attributes[i].name]=t.attributes[i].value;e._tagvalue=t.firstChild?t.firstChild.nodeValue:"";for(var i=0;i<t.childNodes.length;i++){var n=t.childNodes[i].tagName;n&&(e[n]||(e[n]=[]),e[n].push(this.xmlNodeToJSON(t.childNodes[i])))}return e},window.dhtmlDragAndDropObject=dhtmlDragAndDropObject,dhtmlDragAndDropObject.prototype.removeDraggableItem=function(t){t.onmousedown=null,t.dragStarter=null,t.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(t,e){t.onmousedown=this.preCreateDragCopy,t.dragStarter=e,this.addDragLanding(t,e)},dhtmlDragAndDropObject.prototype.addDragLanding=function(t,e){t.dragLanding=e},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(t){if(!t&&!window.event||2!=(t||event).button)return window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1):(window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(t),window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,window.dhtmlDragAndDrop.downtime=(new Date).valueOf(),!(!t||!t.preventDefault)&&(t.preventDefault(),!1))},dhtmlDragAndDropObject.prototype.callDrag=function(t){t||(t=window.event);var e=window.dhtmlDragAndDrop;if(!((new Date).valueOf()-e.downtime<100)){if(!e.dragNode){if(!e.waitDrag)return e.stopDrag(t,!0);if(e.dragNode=e.dragStartObject._createDragNode(e.dragStartNode,t),!e.dragNode)return e.stopDrag();e.dragNode.onselectstart=function(){return!1},e.gldragNode=e.dragNode,document.body.appendChild(e.dragNode),document.body.onmouseup=e.stopDrag,e.waitDrag=0,e.dragNode.pWindow=window,e.initFrameRoute()}if(e.dragNode.parentNode!=window.document.body&&e.gldragNode){var i=e.gldragNode;e.gldragNode.old&&(i=e.gldragNode.old),i.parentNode.removeChild(i);var n=e.dragNode.pWindow;if(i.pWindow&&i.pWindow.dhtmlDragAndDrop.lastLanding&&i.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(i.pWindow.dhtmlDragAndDrop.lastLanding),_isIE){var a=document.createElement("div");a.innerHTML=e.dragNode.outerHTML,e.dragNode=a.childNodes[0]}else e.dragNode=e.dragNode.cloneNode(!0);e.dragNode.pWindow=window,e.gldragNode.old=e.dragNode,document.body.appendChild(e.dragNode),n.dhtmlDragAndDrop.dragNode=e.dragNode}e.dragNode.style.left=t.clientX+15+(e.fx?-1*e.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",e.dragNode.style.top=t.clientY+3+(e.fy?-1*e.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";var r;r=t.srcElement?t.srcElement:t.target,e.checkLanding(r,t)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(t){if(window.name){for(var e=parent.frames[window.name].frameElement.offsetParent,i=0,n=0;e;)i+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;if(parent.dhtmlDragAndDrop){var a=parent.dhtmlDragAndDrop.calculateFramePosition(1);i+=1*a.split("_")[0],n+=1*a.split("_")[1]}if(t)return i+"_"+n;this.fx=i,this.fy=n}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(t,e){t&&t.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=t,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,e.clientX,e.clientY,e),this.lastLanding_scr=_isIE?e.srcElement:e.target):t&&"BODY"!=t.tagName?this.checkLanding(t.parentNode,e):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,e.clientX,e.clientY,e),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(t,e){var i=window.dhtmlDragAndDrop;if(!e){i.stopFrameRoute();var n=i.lastLanding;i.lastLanding=null,n&&n.dragLanding._drag(i.dragStartNode,i.dragStartObject,n,_isIE?event.srcElement:t.target)}i.lastLanding=null,i.dragNode&&i.dragNode.parentNode==document.body&&i.dragNode.parentNode.removeChild(i.dragNode),i.dragNode=0,i.gldragNode=0,i.fx=0,i.fy=0,i.dragStartNode=0,i.dragStartObject=0,document.body.onmouseup=i.tempDOMU,document.body.onmousemove=i.tempDOMM,i.tempDOMU=null,i.tempDOMM=null,i.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(t){t&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var e=0;e<window.frames.length;e++)try{window.frames[e]!=t&&window.frames[e].dhtmlDragAndDrop&&window.frames[e].dhtmlDragAndDrop.stopFrameRoute(window)}catch(t){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(t){}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(t,e){t&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=t.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=t.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=t.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=t.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&e&&(!_isFF||_FFrv<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(t){}for(var i=0;i<window.frames.length;i++)try{window.frames[i]!=t&&window.frames[i].dhtmlDragAndDrop&&window.frames[i].dhtmlDragAndDrop.initFrameRoute(window,!t||e?1:0)}catch(t){}};var _isFF=!1,_isIE=!1,_isOpera=!1,_isKHTML=!1,_isMacOS=!1,_isChrome=!1,_FFrv=!1,_KHTMLrv=!1,_OperaRv=!1;-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0),navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0),-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,-1==navigator.appVersion.indexOf("MSIE 8.0")&&-1==navigator.appVersion.indexOf("MSIE 9.0")&&-1==navigator.appVersion.indexOf("MSIE 10.0")||"BackCompat"==document.compatMode||(_isIE=8)):"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])),dtmlXMLLoaderObject.prototype.doXPath=function(t,e,i,n){if(_isKHTML||!_isIE&&!window.XPathResult)return this.doXPathOpera(t,e);if(_isIE)return e||(e=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),e||dhtmlxError.throwError("LoadXML","Incorrect XML",[e||this.xmlDoc,this.mainObject]),i&&e.setProperty("SelectionNamespaces","xmlns:xsl='"+i+"'"),"single"==n?e.selectSingleNode(t):e.selectNodes(t)||new Array(0);var a=e;e||(e=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),e||dhtmlxError.throwError("LoadXML","Incorrect XML",[e||this.xmlDoc,this.mainObject]),-1!=e.nodeName.indexOf("document")?a=e:(a=e,e=e.ownerDocument);var r=XPathResult.ANY_TYPE;"single"==n&&(r=XPathResult.FIRST_ORDERED_NODE_TYPE);var s=[],o=e.evaluate(t,a,function(t){return i},r,null);if(r==XPathResult.FIRST_ORDERED_NODE_TYPE)return o.singleNodeValue;for(var d=o.iterateNext();d;)s[s.length]=d,d=o.iterateNext();return s},_dhtmlxError.prototype.catchError=function(t,e){this.catches[t]=e},_dhtmlxError.prototype.throwError=function(t,e,i){return this.catches[t]?this.catches[t](t,e,i):this.catches.ALL?this.catches.ALL(t,e,i):(window.alert("Error type: "+arguments[0]+"\nDescription: "+arguments[1]),null)},window.dhtmlxError=new _dhtmlxError,dtmlXMLLoaderObject.prototype.doXPathOpera=function(t,e){var i=t.replace(/[\/]+/gi,"/").split("/"),n=null,a=1;if(!i.length)return[];if("."==i[0])n=[e];else{if(""!==i[0])return[];n=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(i[a].replace(/\[[^\]]*\]/g,"")),a++}for(a;a<i.length;a++)n=this._getAllNamedChilds(n,i[a]);return-1!=i[a-1].indexOf("[")&&(n=this._filterXPath(n,i[a-1])),n},dtmlXMLLoaderObject.prototype._filterXPath=function(t,e){for(var i=[],e=e.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,""),n=0;n<t.length;n++)t[n].getAttribute(e)&&(i[i.length]=t[n]);return i},dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(t,e){var i=[];_isKHTML&&(e=e.toUpperCase());for(var n=0;n<t.length;n++)for(var a=0;a<t[n].childNodes.length;a++)_isKHTML?t[n].childNodes[a].tagName&&t[n].childNodes[a].tagName.toUpperCase()==e&&(i[i.length]=t[n].childNodes[a]):t[n].childNodes[a].tagName==e&&(i[i.length]=t[n].childNodes[a]);return i},void 0===window.dhtmlxEvent&&(window.dhtmlxEvent=function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)}),dtmlXMLLoaderObject.prototype.xslDoc=null,dtmlXMLLoaderObject.prototype.setXSLParamValue=function(t,e,i){i||(i=this.xslDoc),i.responseXML&&(i=i.responseXML);var n=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+t+"']",i,"http://www.w3.org/1999/XSL/Transform","single");n&&(n.firstChild.nodeValue=e)},dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(t,e){t||(t=this.xslDoc),t.responseXML&&(t=t.responseXML),e||(e=this.xmlDoc),e.responseXML&&(e=e.responseXML);var i;if(_isIE){i=new ActiveXObject("Msxml2.DOMDocument.3.0");try{e.transformNodeToObject(t,i)}catch(n){i=e.transformNode(t)}}else this.XSLProcessor||(this.XSLProcessor=new XSLTProcessor,this.XSLProcessor.importStylesheet(t)),i=this.XSLProcessor.transformToDocument(e);return i},dtmlXMLLoaderObject.prototype.doXSLTransToString=function(t,e){var i=this.doXSLTransToObject(t,e);return"string"==typeof i?i:this.doSerialization(i)},dtmlXMLLoaderObject.prototype.doSerialization=function(t){return t||(t=this.xmlDoc),t.responseXML&&(t=t.responseXML),_isIE?t.xml:(new XMLSerializer).serializeToString(t)},window.dhtmlxEventable=function(obj){obj.attachEvent=function(t,e,i){return t="ev_"+t.toLowerCase(),this[t]||(this[t]=new this.eventCatcher(i||this)),t+":"+this[t].addEvent(e)},obj.callEvent=function(t,e){return t="ev_"+t.toLowerCase(),!this[t]||this[t].apply(this,e)},obj.checkEvent=function(t){return!!this["ev_"+t.toLowerCase()]},obj.eventCatcher=function(obj){var dhx_catch=[],z=function(){for(var t=!0,e=0;e<dhx_catch.length;e++)if(dhx_catch[e]){var i=dhx_catch[e].apply(obj,arguments);t=t&&i}return t};return z.addEvent=function(ev){return"function"!=typeof ev&&(ev=eval(ev)),!!ev&&dhx_catch.push(ev)-1},z.removeEvent=function(t){dhx_catch[t]=null},z},obj.detachEvent=function(t){if(t){var e=t.split(":");this[e[0]].removeEvent(e[1])}},obj.detachAllEvents=function(){for(var t in this)0===t.indexOf("ev_")&&(this.detachEvent(t),this[t]=null)},obj=null},window.dhtmlx||(window.dhtmlx={}),function(){function t(t,e){setTimeout(function(){if(t.box){var n=t.callback;i(!1),t.box.parentNode.removeChild(t.box),dhtmlx.callEvent("onAfterMessagePopup",[t.box]),c=t.box=null,n&&n(e)}},1)}function e(e){if(c){e=e||event;var i=e.which||event.keyCode,n=!1;if(dhtmlx.message.keyboard){if(13==i||32==i){var a=e.target||e.srcElement;scheduler._getClassName(a).indexOf("dhtmlx_popup_button")>-1&&a.click?a.click():(t(c,!0),n=!0)}27==i&&(t(c,!1),n=!0)}if(n)return e.preventDefault&&e.preventDefault(),!(e.cancelBubble=!0)}else;}function i(t){i.cover||(i.cover=document.createElement("div"),i.cover.onkeydown=e,i.cover.className="dhx_modal_cover",document.body.appendChild(i.cover));document.body.scrollHeight;i.cover.style.display=t?"inline-block":"none"}function n(t,e,i){return"<div "+scheduler._waiAria.messageButtonAttrString(t)+"class='dhtmlx_popup_button dhtmlx_"+(i||t||"").toLowerCase().replace(/ /g,"_")+"_button' result='"+e+"' ><div>"+t+"</div></div>"}function a(t){u.area||(u.area=document.createElement("div"),u.area.className="dhtmlx_message_area",u.area.style[u.position]="5px",document.body.appendChild(u.area)),u.hide(t.id);var e=document.createElement("div");return e.innerHTML="<div>"+t.text+"</div>",e.className="dhtmlx-info dhtmlx-"+t.type,e.onclick=function(){u.hide(t.id),t=null},scheduler._waiAria.messageInfoAttr(e),"bottom"==u.position&&u.area.firstChild?u.area.insertBefore(e,u.area.firstChild):u.area.appendChild(e),t.expire>0&&(u.timers[t.id]=window.setTimeout(function(){u.hide(t.id)},t.expire)),u.pull[t.id]=e,e=null,t.id}function r(e,i,a){var r=document.createElement("div");r.className=" dhtmlx_modal_box dhtmlx-"+e.type,r.setAttribute("dhxbox",1);var s=scheduler.uid();scheduler._waiAria.messageModalAttr(r,s);var o="",d=!1;if(e.width&&(r.style.width=e.width),e.height&&(r.style.height=e.height),e.title&&(o+='<div class="dhtmlx_popup_title" id="'+s+'">'+e.title+"</div>",d=!0),o+='<div class="dhtmlx_popup_text" '+(d?"":' id="'+s+'" ')+"><span>"+(e.content?"":e.text)+'</span></div><div  class="dhtmlx_popup_controls">',i){var l=e.ok||scheduler.locale.labels.message_ok;void 0===l&&(l="OK"),o+=n(l,!0,"ok")}if(a){var _=e.cancel||scheduler.locale.labels.message_cancel;void 0===_&&(_="Cancel"),o+=n(_,!1,"cancel")}if(e.buttons)for(var h=0;h<e.buttons.length;h++)o+=n(e.buttons[h],h);if(o+="</div>",r.innerHTML=o,e.content){var u=e.content;"string"==typeof u&&(u=document.getElementById(u)),"none"==u.style.display&&(u.style.display=""),r.childNodes[e.title?1:0].appendChild(u)}return r.onclick=function(i){i=i||event;var n=i.target||i.srcElement,a=scheduler._getClassName(n);if(a||(n=n.parentNode),a=scheduler._getClassName(n),"dhtmlx_popup_button"==a.split(" ")[0]){var r=n.getAttribute("result");r="true"==r||"false"!=r&&r,t(e,r)}},e.box=r,c=e,r}function s(t,n,a){var s=t.tagName?t:r(t,n,a);t.hidden||i(!0),document.body.appendChild(s);var o=Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-s.offsetWidth)/2)),d=Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-s.offsetHeight)/2));return"top"==t.position?s.style.top="-3px":s.style.top=d+"px",s.style.left=o+"px",s.onkeydown=e,dhtmlx.modalbox.focus(s),t.hidden&&dhtmlx.modalbox.hide(s),dhtmlx.callEvent("onMessagePopup",[s]),s}function o(t){return s(t,!0,!1)}function d(t){return s(t,!0,!0)}function l(t){return s(t)}function _(t,e,i){return"object"!=typeof t&&("function"==typeof e&&(i=e,e=""),t={text:t,type:e,callback:i}),t}function h(t,e,i,n){return"object"!=typeof t&&(t={text:t,type:e,expire:i,id:n}),t.id=t.id||u.uid(),t.expire=t.expire||u.expire,t}var c=null;document.attachEvent?document.attachEvent("onkeydown",e):document.addEventListener("keydown",e,!0),dhtmlx.alert=function(){var t=_.apply(this,arguments);return t.type=t.type||"confirm",o(t)},dhtmlx.confirm=function(){var t=_.apply(this,arguments);return t.type=t.type||"alert",d(t)},dhtmlx.modalbox=function(){var t=_.apply(this,arguments);return t.type=t.type||"alert",l(t)},dhtmlx.modalbox.hide=function(t){for(;t&&t.getAttribute&&!t.getAttribute("dhxbox");)t=t.parentNode;t&&(t.parentNode.removeChild(t),i(!1))},dhtmlx.modalbox.focus=function(t){setTimeout(function(){var e=scheduler._getFocusableNodes(t);e.length&&e[0].focus&&e[0].focus()},1)};var u=dhtmlx.message=function(t,e,i,n){switch(t=h.apply(this,arguments),t.type=t.type||"info",t.type.split("-")[0]){case"alert":return o(t);case"confirm":return d(t);case"modalbox":return l(t);default:return a(t)}};u.seed=(new Date).valueOf(),u.uid=function(){return u.seed++},u.expire=4e3,u.keyboard=!0,u.position="top",u.pull={},u.timers={},u.hideAll=function(){for(var t in u.pull)u.hide(t)},u.hide=function(t){var e=u.pull[t];e&&e.parentNode&&(window.setTimeout(function(){e.parentNode.removeChild(e),e=null},2e3),e.className+=" hidden",u.timers[t]&&window.clearTimeout(u.timers[t]),delete u.pull[t])}}(),dhtmlx.attachEvent||dhtmlxEventable(dhtmlx);var dataProcessor=window.dataProcessor=function(t){return this.serverProcessor=t,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this._headers=null,this._payload=null,this.post_delim="_",this._waitMode=0,this._in_progress={},this._invalid={},this.mandatoryFields=[],this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),dhtmlxEventable(this),this};dataProcessor.prototype={setTransactionMode:function(t,e){"object"==typeof t?(this._tMode=t.mode||this._tMode,void 0!==t.headers&&(this._headers=t.headers),void 0!==t.payload&&(this._payload=t.payload)):(this._tMode=t,this._tSend=e),"REST"==this._tMode&&(this._tSend=!1,this._endnm=!0),"JSON"==this._tMode&&(this._tSend=!1,this._endnm=!0,this._headers=this._headers||{},this._headers["Content-type"]="application/json"),this._headers&&!this._headers["Content-Type"]&&(this._headers["Content-Type"]="application/x-www-form-urlencoded")},escape:function(t){return this._utf?encodeURIComponent(t):escape(t)},enableUTFencoding:function(t){this._utf=!!t},setDataColumns:function(t){this._columns="string"==typeof t?t.split(","):t},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(t){this._endnm=!!t},enablePartialDataSend:function(t){this._changed=!!t},setUpdateMode:function(t,e){this.autoUpdate="cell"==t,this.updateMode=t,this.dnd=e},ignore:function(t,e){this._silent_mode=!0,t.call(e||window),this._silent_mode=!1},setUpdated:function(t,e,i){if(!this._silent_mode){var n=this.findRow(t);i=i||"updated";var a=this.obj.getUserData(t,this.action_param);a&&"updated"==i&&(i=a),e?(this.set_invalid(t,!1),this.updatedRows[n]=t,this.obj.setUserData(t,this.action_param,i),this._in_progress[t]&&(this._in_progress[t]="wait")):this.is_invalid(t)||(this.updatedRows.splice(n,1),this.obj.setUserData(t,this.action_param,"")),e||this._clearUpdateFlag(t),this.markRow(t,e,i),e&&this.autoUpdate&&this.sendData(t)}},_clearUpdateFlag:function(t){},markRow:function(t,e,i){var n="",a=this.is_invalid(t);if(a&&(n=this.styles[a],e=!0),this.callEvent("onRowMark",[t,e,i,a])&&(n=this.styles[e?i:"clear"]+n,this.obj[this._methods[0]](t,n),a&&a.details)){n+=this.styles[a+"_cell"];for(var r=0;r<a.details.length;r++)a.details[r]&&this.obj[this._methods[1]](t,r,n)}},getState:function(t){return this.obj.getUserData(t,this.action_param)},is_invalid:function(t){return this._invalid[t]},set_invalid:function(t,e,i){i&&(e={value:e,details:i,toString:function(){return this.value.toString()}}),this._invalid[t]=e},checkBeforeUpdate:function(t){return!0},sendData:function(t){if(!this._waitMode||"tree"!=this.obj.mytype&&!this.obj._h2){if(this.obj.editStop&&this.obj.editStop(),void 0===t||this._tSend)return this.sendAllData();if(this._in_progress[t])return!1;if(this.messages=[],!this.checkBeforeUpdate(t)&&this.callEvent("onValidationError",[t,this.messages]))return!1;this._beforeSendData(this._getRowData(t),t)}},_beforeSendData:function(t,e){if(!this.callEvent("onBeforeUpdate",[e,this.getState(e),t]))return!1;this._sendData(t,e)},serialize:function(t,e){if("string"==typeof t)return t;if(void 0!==e)return this.serialize_one(t,"");var i=[],n=[];for(var a in t)t.hasOwnProperty(a)&&(i.push(this.serialize_one(t[a],a+this.post_delim)),n.push(a));return i.push("ids="+this.escape(n.join(","))),(scheduler.security_key||dhtmlx.security_key)&&i.push("dhx_security="+(scheduler.security_key||dhtmlx.security_key)),i.join("&")},serialize_one:function(t,e){if("string"==typeof t)return t;var i=[];for(var n in t)if(t.hasOwnProperty(n)){if(("id"==n||n==this.action_param)&&"REST"==this._tMode)continue;i.push(this.escape((e||"")+n)+"="+this.escape(t[n]))}return i.join("&")},_applyPayload:function(t){var e=this.obj.$ajax;if(this._payload)for(var i in this._payload)t=t+e.urlSeparator(t)+this.escape(i)+"="+this.escape(this._payload[i]);return t},_sendData:function(t,e){if(t){if(!this.callEvent("onBeforeDataSending",e?[e,this.getState(e),t]:[null,null,t]))return!1;e&&(this._in_progress[e]=(new Date).valueOf());var i=this,n=function(n){var a=[];if(e)a.push(e);else if(t)for(var r in t)a.push(r);return i.afterUpdate(i,n,a)},a=this.obj.$ajax,r=this.serverProcessor+(this._user?a.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&"):""),s=this._applyPayload(r);if("GET"==this._tMode)a.query({url:s+a.urlSeparator(s)+this.serialize(t,e),method:"GET",callback:n,headers:this._headers});else if("POST"==this._tMode)a.query({url:s,method:"POST",headers:this._headers,data:this.serialize(t,e),callback:n});else if("JSON"==this._tMode){var o=t[this.action_param],d={};for(var l in t)d[l]=t[l];delete d[this.action_param],delete d.id,delete d.gr_id,a.query({url:s,method:"POST",headers:this._headers,callback:n,data:JSON.stringify({id:e,action:o,data:d})})}else if("REST"==this._tMode){var _=this.getState(e),h=r.replace(/(\&|\?)editing\=true/,""),d="",c="post";"inserted"==_?d=this.serialize(t,e):"deleted"==_?(c="DELETE",h=h+("/"==h.slice(-1)?"":"/")+e):(c="PUT",d=this.serialize(t,e),h=h+("/"==h.slice(-1)?"":"/")+e),h=this._applyPayload(h),a.query({url:h,method:c,headers:this._headers,data:d,callback:n})}this._waitMode++}},sendAllData:function(){if(this.updatedRows.length){this.messages=[];for(var t=!0,e=0;e<this.updatedRows.length;e++)t&=this.checkBeforeUpdate(this.updatedRows[e]);if(!t&&!this.callEvent("onValidationError",["",this.messages]))return!1;if(this._tSend)this._sendData(this._getAllData());else for(var e=0;e<this.updatedRows.length;e++)if(!this._in_progress[this.updatedRows[e]]){if(this.is_invalid(this.updatedRows[e]))continue;if(this._beforeSendData(this._getRowData(this.updatedRows[e]),this.updatedRows[e]),this._waitMode&&("tree"==this.obj.mytype||this.obj._h2))return}}},_getAllData:function(t){for(var e={},i=!1,n=0;n<this.updatedRows.length;n++){var a=this.updatedRows[n];if(!this._in_progress[a]&&!this.is_invalid(a)){var r=this._getRowData(a);this.callEvent("onBeforeUpdate",[a,this.getState(a),r])&&(e[a]=r,i=!0,this._in_progress[a]=(new Date).valueOf())}}return i?e:null},setVerificator:function(t,e){this.mandatoryFields[t]=e||function(t){return""!==t}},clearVerificator:function(t){this.mandatoryFields[t]=!1},findRow:function(t){var e=0;for(e=0;e<this.updatedRows.length&&t!=this.updatedRows[e];e++);return e},defineAction:function(t,e){this._uActions||(this._uActions=[]),this._uActions[t]=e},afterUpdateCallback:function(t,e,i,n){var a=t,r="error"!=i&&"invalid"!=i;if(r||this.set_invalid(t,i),this._uActions&&this._uActions[i]&&!this._uActions[i](n))return delete this._in_progress[a];"wait"!=this._in_progress[a]&&this.setUpdated(t,!1);var s=t;switch(i){case"inserted":case"insert":e!=t&&(this.setUpdated(t,!1),this.obj[this._methods[2]](t,e),t=e);break;case"delete":case"deleted":return this.obj.setUserData(t,this.action_param,"true_deleted"),this.obj[this._methods[3]](t,e),delete this._in_progress[a],this.callEvent("onAfterUpdate",[t,i,e,n])}"wait"!=this._in_progress[a]?(r&&this.obj.setUserData(t,this.action_param,""),delete this._in_progress[a]):(delete this._in_progress[a],this.setUpdated(e,!0,this.obj.getUserData(t,this.action_param))),this.callEvent("onAfterUpdate",[s,i,e,n])},_errorResponse:function(t,e){return this.obj&&this.obj.callEvent&&this.obj.callEvent("onSaveError",[e,t.xmlDoc]),this.cleanUpdate(e)},afterUpdate:function(t,e,i){var n=this.obj.$ajax;if(200!==e.xmlDoc.status)return void this._errorResponse(e,i);if(window.JSON){var a;try{a=JSON.parse(e.xmlDoc.responseText)}catch(t){e.xmlDoc.responseText.length||(a={})}if(a){var r=a.action||this.getState(i)||"updated",s=a.sid||i[0],o=a.tid||i[0];return t.afterUpdateCallback(s,o,r,a),void t.finalizeUpdate()}}var d=n.xmltop("data",e.xmlDoc);if(!d)return this._errorResponse(e,i);var l=n.xpath("//data/action",d);l.length||this._errorResponse(e,i);for(var _=0;_<l.length;_++){var h=l[_],r=h.getAttribute("type"),s=h.getAttribute("sid"),o=h.getAttribute("tid");t.afterUpdateCallback(s,o,r,h)}t.finalizeUpdate()},cleanUpdate:function(t){if(t)for(var e=0;e<t.length;e++)delete this._in_progress[t[e]]},finalizeUpdate:function(){this._waitMode&&this._waitMode--,("tree"==this.obj.mytype||this.obj._h2)&&this.updatedRows.length&&this.sendData(),this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(t){this.obj=t,this.obj._dp_init&&this.obj._dp_init(this)},setOnAfterUpdate:function(t){this.attachEvent("onAfterUpdate",t)},enableDebug:function(t){},setOnBeforeUpdateHandler:function(t){this.attachEvent("onBeforeDataSending",t)},setAutoUpdate:function(t,e){t=t||2e3,this._user=e||(new Date).valueOf(),this._need_update=!1,this._update_busy=!1,this.attachEvent("onAfterUpdate",function(t,e,i,n){this.afterAutoUpdate(t,e,i,n)}),this.attachEvent("onFullSync",function(){this.fullSync()});var i=this;window.setInterval(function(){i.loadUpdate()},t)},afterAutoUpdate:function(t,e,i,n){return"collision"!=e||(this._need_update=!0,!1)},fullSync:function(){return this._need_update&&(this._need_update=!1,this.loadUpdate()),!0},getUpdates:function(t,e){var i=this.obj.$ajax;if(this._update_busy)return!1;this._update_busy=!0,i.get(t,e)},_v:function(t){return t.firstChild?t.firstChild.nodeValue:""},_a:function(t){for(var e=[],i=0;i<t.length;i++)e[i]=this._v(t[i]);return e},loadUpdate:function(){var t=this.obj.$ajax,e=this,i=this.obj.getUserData(0,"version"),n=this.serverProcessor+t.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+i].join("&");n=n.replace("editing=true&",""),this.getUpdates(n,function(i){var n=t.xpath("//userdata",i);e.obj.setUserData(0,"version",e._v(n[0]));var a=t.xpath("//update",i);if(a.length){e._silent_mode=!0;for(var r=0;r<a.length;r++){var s=a[r].getAttribute("status"),o=a[r].getAttribute("id"),d=a[r].getAttribute("parent");switch(s){case"inserted":e.callEvent("insertCallback",[a[r],o,d]);break;case"updated":e.callEvent("updateCallback",[a[r],o,d]);break;case"deleted":e.callEvent("deleteCallback",[a[r],o,d])}}e._silent_mode=!1}e._update_busy=!1,e=null})}},window.dataProcessor&&!dataProcessor.prototype.init_original&&(dataProcessor.prototype.init_original=dataProcessor.prototype.init,dataProcessor.prototype.init=function(t){this.init_original(t),t._dataprocessor=this,this.setTransactionMode("POST",!0),this.serverProcessor+=(-1!=this.serverProcessor.indexOf("?")?"&":"?")+"editing=true"}),dhtmlxError.catchError("LoadXML",function(t,e,i){var n=i[0].responseText;switch(scheduler.config.ajax_error){case"alert":window.alert(n);break;case"console":window.console.log(n)}});var Scheduler={_seed:0};Scheduler.plugin=function(t){this._schedulerPlugins.push(t),t(window.scheduler)},Scheduler._schedulerPlugins=[],Scheduler.getSchedulerInstance=function(){function t(t){var e=document.createElement("div");return(t||"").split(" ").forEach(function(t){e.classList.add(t)}),e}function e(t){var e;if(t.view)switch(t.view){case"today":case"next":case"prev":e=p.builtInButton;break;case"date":e=p.date;break;case"spacer":e=p.spacer;break;case"button":e=p.button;break;case"minicalendar":e=p.minicalendarButton;break;default:e=p.view}else t.rows?e=p.rows_container:t.cols&&(e=p.row);return e}function i(t){var i=e(t);if(i){var n=i(t);if(t.css&&n.classList.add(t.css),t.width){var a=t.width;a===1*a&&(a+="px"),n.style.width=a}if(t.height){var a=t.height;a===1*a&&(a+="px"),n.style.height=a}if(t.click&&n.addEventListener("click",t.click),t.html&&(n.innerHTML=t.html),t.align){var a="";"right"==t.align?a="flex-end":"left"==t.align&&(a="flex-start"),n.style.justifyContent=a}return n}}function n(t){return"string"==typeof t&&(t={view:t}),t.view||t.rows||t.cols||(t.view="button"),t}function a(t){var e,r=document.createDocumentFragment();e=Array.isArray(t)?t:[t];for(var s=0;s<e.length;s++){var o=n(e[s]);if("day"===o.view&&e[s+1]){var d=n(e[s+1]);"week"!==d.view&&"month"!==d.view||(o.$firstTab=!0)}if("month"===o.view&&e[s-1]){var d=n(e[s-1]);"week"!==d.view&&"day"!==d.view||(o.$lastTab=!0)}var l=i(o);r.appendChild(l),(o.cols||o.rows)&&l.appendChild(a(o.cols||o.rows))}return r}function r(t){return!!(t.querySelector(".dhx_cal_header")&&t.querySelector(".dhx_cal_data")&&t.querySelector(".dhx_cal_navline"))}function s(t){var e=["day","week","month"],i=["date"],n=["prev","today","next"];if(t.matrix)for(var a in t.matrix)e.push(a);if(t._props)for(var a in t._props)e.push(a);if(t._grid&&t._grid.names)for(var a in t._grid.names)e.push(a);return["map","agenda","week_agenda","year"].forEach(function(i){t[i+"_view"]&&e.push(i)}),e.concat(i).concat(n)}function o(t){return Array.isArray?Array.isArray(t):t&&void 0!==t.length&&t.pop&&t.push}function d(t){return t&&"object"==typeof t&&"function String() { [native code] }"===Function.prototype.toString.call(t.constructor)}function l(t){return t&&"object"==typeof t&&"function Number() { [native code] }"===Function.prototype.toString.call(t.constructor)}function _(t){return t&&"object"==typeof t&&"function Boolean() { [native code] }"===Function.prototype.toString.call(t.constructor)}function h(t){return!(!t||"object"!=typeof t)&&!!(t.getFullYear&&t.getMonth&&t.getDate)}function c(){if(void 0===A){var t=document.createElement("div");t.style.position="absolute",t.style.left="-9999px",t.style.top="-9999px",t.innerHTML="<div class='dhx_cal_container'><div class='dhx_cal_scale_placeholder'></div><div>",document.body.appendChild(t);var e=window.getComputedStyle(t.querySelector(".dhx_cal_scale_placeholder")),i=e.getPropertyValue("position");A="absolute"===i,setTimeout(function(){A=null},500)}return A}function u(){if(g._is_material_skin())return!0;if(void 0!==S)return S;var t=document.createElement("div");t.style.position="absolute",t.style.left="-9999px",t.style.top="-9999px",t.innerHTML="<div class='dhx_cal_container'><div class='dhx_cal_data'><div class='dhx_cal_event'><div class='dhx_body'></div></div><div>",document.body.appendChild(t);var e=window.getComputedStyle(t.querySelector(".dhx_body")),i=e.getPropertyValue("box-sizing");document.body.removeChild(t),(S=!("border-box"!==i))||setTimeout(function(){S=void 0},1e3)}function f(){if(!g._is_material_skin()&&!g._border_box_events()){var t=S;S=void 0,A=void 0;t!==u()&&g.$container&&g.setCurrentView()}}var g={version:"5.3.10"},v={agenda:"https://docs.dhtmlx.com/scheduler/agenda_view.html",grid:"https://docs.dhtmlx.com/scheduler/grid_view.html",map:"https://docs.dhtmlx.com/scheduler/map_view.html",unit:"https://docs.dhtmlx.com/scheduler/units_view.html",timeline:"https://docs.dhtmlx.com/scheduler/timeline_view.html",week_agenda:"https://docs.dhtmlx.com/scheduler/weekagenda_view.html",year:"https://docs.dhtmlx.com/scheduler/year_view.html",anythingElse:"https://docs.dhtmlx.com/scheduler/views.html"},m={agenda:"ext/dhtmlxscheduler_agenda_view.js",grid:"ext/dhtmlxscheduler_grid_view.js",map:"ext/dhtmlxscheduler_map_view.js",unit:"ext/dhtmlxscheduler_units.js",timeline:"ext/dhtmlxscheduler_timeline.js, ext/dhtmlxscheduler_treetimeline.js, ext/dhtmlxscheduler_daytimeline.js",week_agenda:"ext/dhtmlxscheduler_week_agenda.js",year:"ext/dhtmlxscheduler_year_view.js",limit:"ext/dhtmlxscheduler_limit.js"};g._commonErrorMessages={unknownView:function(t){var e="Related docs: "+(v[t]||v.anythingElse),i=m[t]?"You're probably missing "+m[t]+".":"";return"`"+t+"` view is not defined. \nPlease check parameters you pass to `scheduler.init` or `scheduler.setCurrentView` in your code and ensure you've imported appropriate extensions. \n"+e+"\n"+(i?i+"\n":"")},collapsedContainer:function(t){return"Scheduler container height is set to *100%* but the rendered height is zero and the scheduler is not visible. \nMake sure that the container has some initial height or use different units. For example:\n<div id='scheduler_here' class='dhx_cal_container' style='width:100%; height:600px;'> \n"}},g.createTimelineView=function(){throw new Error("scheduler.createTimelineView is not implemented. Be sure to add the required extension: "+m.timeline+"\nRelated docs: "+v.timeline)},g.createUnitsView=function(){throw new Error("scheduler.createUnitsView is not implemented. Be sure to add the required extension: "+m.unit+"\nRelated docs: "+v.unit)},g.createGridView=function(){throw new Error("scheduler.createGridView is not implemented. Be sure to add the required extension: "+m.grid+"\nRelated docs: "+v.grid)},g.addMarkedTimespan=function(){throw new Error("scheduler.addMarkedTimespan is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_limit.js\nRelated docs: https://docs.dhtmlx.com/scheduler/limits.html")},g.renderCalendar=function(){throw new Error("scheduler.renderCalendar is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_minical.js\nhttps://docs.dhtmlx.com/scheduler/minicalendar.html")},g.exportToPNG=function(){throw new Error(["scheduler.exportToPNG is not implemented.","This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/png.html","Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml"].join("\n"))},g.exportToPDF=function(){throw new Error(["scheduler.exportToPDF is not implemented.","This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/pdf.html","Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml"].join("\n"))},dhtmlxEventable(g);var p={rows_container:function(){return t("dhx_cal_navbar_rows_container")},row:function(){return t("dhx_cal_navbar_row")},view:function(e){var i=t("dhx_cal_tab");return i.setAttribute("name",e.view+"_tab"),i.setAttribute("data-viewname",e.view),g.config.fix_tab_position&&(e.$firstTab?i.classList.add("dhx_cal_tab_first"):e.$lastTab?i.classList.add("dhx_cal_tab_last"):"week"!==e.view&&i.classList.add("dhx_cal_tab_standalone")),i},date:function(){return t("dhx_cal_date")},button:function(e){return t("dhx_cal_nav_button dhx_cal_nav_button_custom dhx_cal_tab")},builtInButton:function(e){return t("dhx_cal_"+e.view+"_button dhx_cal_nav_button")},spacer:function(){return t("dhx_cal_line_spacer")},minicalendarButton:function(e){var i=t("dhx_minical_icon");return e.click||(i.onclick=function(){g.isCalendarVisible()?g.destroyCalendar():g.renderCalendar({position:this,date:g.getState().date,navigation:!0,handler:function(t,e){g.setCurrentView(t),g.destroyCalendar()}})}),i},html_element:function(e){return t("dhx_cal_nav_content")}};g._init_nav_bar=function(t){var e=this.$container.querySelector(".dhx_cal_navline");return e||(e=document.createElement("div"),e.className="dhx_cal_navline dhx_cal_navline_flex",g._update_nav_bar(t,e),e)};var x=null,b=null;g._update_nav_bar=function(t,e){if(t){var i=!1,n=!1,r=t.height||g.xy.nav_height;null!==b&&b===r||(i=!0),x&&JSON.stringify(t)===x||(n=!0),i&&(g.xy.nav_height=r),n&&(e.innerHTML="",e.appendChild(a(t))),(i||n)&&(g._els=[],g.get_elements(),g.set_actions()),e.style.display=0===r?"none":"",b=r}},g._detachDomEvent=function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i)},g._init_once=function(){function t(t){for(var e=document.body;t&&t!=e;)t=t.parentNode;return!(e!=t)}function e(t){return{w:t.innerWidth||document.documentElement.clientWidth,h:t.innerHeight||document.documentElement.clientHeight}}function i(t,e){return t.w==e.w&&t.h==e.h}function n(n,a){var r,s=e(a);a.addEventListener("resize",function(){clearTimeout(r),r=setTimeout(function(){if(t(n.$container)){var r=e(a);i(s,r)||(s=r,n.callEvent("onSchedulerResize",[])&&(n.updateView(),n.callEvent("onAfterSchedulerResize",[])))}},150)})}function a(t){var e=t.$container;"static"==window.getComputedStyle(e).getPropertyValue("position")&&(e.style.position="relative");var i=document.createElement("iframe");i.className="scheduler_container_resize_watcher",i.tabIndex=-1,t.config.wai_aria_attributes&&(i.setAttribute("role","none"),i.setAttribute("aria-hidden",!0)),e.appendChild(i),i.contentWindow?n(t,i.contentWindow):(e.removeChild(i),n(t,window))}a(g),g._init_once=function(){}};var y={navbar:{render:function(t){return g._init_nav_bar(t)}},header:{render:function(t){var e=document.createElement("div");return e.className="dhx_cal_header",e}},dataArea:{render:function(t){var e=document.createElement("div");return e.className="dhx_cal_data",e}},html_element:{render:function(t){return t.html}}};g.init=function(t,e,i){if(e=e||g._currentDate(),i=i||"week",this._obj&&this.unset_actions(),this._obj="string"==typeof t?document.getElementById(t):t,this.$container=this._obj,!this.$container.offsetHeight&&this.$container.offsetWidth&&"100%"===this.$container.style.height&&window.console.error(g._commonErrorMessages.collapsedContainer(),this.$container),this.config.wai_aria_attributes&&this.config.wai_aria_application_role&&this.$container.setAttribute("role","application"),this.config.header||r(this.$container)||(this.config.header=s(this),console.log(["Required DOM elements are missing from the scheduler container and **scheduler.config.header** is not specified.","Using a default header configuration: ","scheduler.config.header = "+JSON.stringify(this.config.header,null,2),"Check this article for the details: https://docs.dhtmlx.com/scheduler/initialization.html"].join("\n"))),this.config.header)this.$container.innerHTML="",this.$container.classList.add("dhx_cal_container"),this.config.header.height&&(this.xy.nav_height=this.config.header.height),this.$container.appendChild(y.navbar.render(this.config.header)),this.$container.appendChild(y.header.render()),this.$container.appendChild(y.dataArea.render());else if(!r(this.$container))throw new Error(["Required DOM elements are missing from the scheduler container.","Be sure to either specify them manually in the markup: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviamarkup","Or to use **scheduler.config.header** setting so they could be created automatically: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviaheaderconfig"].join("\n"));this.config.rtl&&(this.$container.className+=" dhx_cal_container_rtl"),this._skin_init&&g._skin_init(),g.date.init(),this._scroll=!0,this._quirks=this.$env.isIE&&"BackCompat"==document.compatMode,this._quirks7=this.$env.isIE&&-1==navigator.appVersion.indexOf("MSIE 8"),this._els=[],this.get_elements(),this.init_templates(),this.set_actions(),this._init_once(),this._init_touch_events(),this.set_sizes(),g.callEvent("onSchedulerReady",[]),this.setCurrentView(e,i)},g.xy={min_event_height:40,scale_width:50,scroll_width:18,scale_height:20,month_scale_height:20,menu_width:25,margin_top:0,margin_left:0,editor_width:140,month_head_height:22,event_header_height:14},g.keys={edit_save:13,edit_cancel:27},g.bind=function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}},g.set_sizes=function(){var t=this._x=this._obj.clientWidth-this.xy.margin_left,e=this._y=this._obj.clientHeight-this.xy.margin_top,i=this._table_view?0:this.xy.scale_width+this.xy.scroll_width,n=this._table_view?-1:this.xy.scale_width,a=this.$container.querySelector(".dhx_cal_scale_placeholder");g._is_material_skin()?(a||(a=document.createElement("div"),a.className="dhx_cal_scale_placeholder",this.$container.insertBefore(a,this._els.dhx_cal_header[0])),a.style.display="block",this.set_xy(a,t,this.xy.scale_height+1,0,this.xy.nav_height+(this._quirks?-1:1))):a&&a.parentNode.removeChild(a),this._lightbox&&(g.$container.offsetWidth<1200||this._setLbPosition(document.querySelector(".dhx_cal_light"))),this.set_xy(this._els.dhx_cal_navline[0],t,this.xy.nav_height,0,0),this.set_xy(this._els.dhx_cal_header[0],t-i,this.xy.scale_height,n,this.xy.nav_height+(this._quirks?-1:1));var r=this._els.dhx_cal_navline[0].offsetHeight;r>0&&(this.xy.nav_height=r);var s=this.xy.scale_height+this.xy.nav_height+(this._quirks?-2:0);this.set_xy(this._els.dhx_cal_data[0],t,e-(s+2),0,s+2)},g.set_xy=function(t,e,i,n,a){var r="left";t.style.width=Math.max(0,e)+"px",t.style.height=Math.max(0,i)+"px",arguments.length>3&&(this.config.rtl&&(r="right"),t.style[r]=n+"px",t.style.top=a+"px")},g.get_elements=function(){for(var t=this._obj.getElementsByTagName("DIV"),e=0;e<t.length;e++){var i=g._getClassName(t[e]),n=t[e].getAttribute("name")||"";i&&(i=i.split(" ")[0]),this._els[i]||(this._els[i]=[]),this._els[i].push(t[e]);var a=g.locale.labels[n||i];"string"!=typeof a&&n&&!t[e].innerHTML&&(a=n.split("_")[0]),a&&(this._waiAria.labelAttr(t[e],a),t[e].innerHTML=a)}},g.unset_actions=function(){for(var t in this._els)if(this._click[t])for(var e=0;e<this._els[t].length;e++)this._els[t][e].onclick=null;this._obj.onselectstart=null,this._obj.onmousemove=null,this._obj.onmousedown=null,this._obj.onmouseup=null,this._obj.ondblclick=null,this._obj.oncontextmenu=null},g.set_actions=function(){for(var t in this._els)if(this._click[t])for(var e=0;e<this._els[t].length;e++)this._els[t][e].onclick=g._click[t];this._obj.onselectstart=function(t){return!1},this._obj.onmousemove=function(t){g._temp_touch_block||g._on_mouse_move(t||event)},this._obj.onmousedown=function(t){g._ignore_next_click||g._on_mouse_down(t||event)},this._obj.onmouseup=function(t){g._ignore_next_click||g._on_mouse_up(t||event)},this._obj.ondblclick=function(t){g._on_dbl_click(t||event)},this._obj.oncontextmenu=function(t){var e=t||event,i=e.target||e.srcElement;return g.callEvent("onContextMenu",[g._locate_event(i),e])}},g.select=function(t){this._select_id!=t&&(g._close_not_saved(),this.editStop(!1),this.unselect(),this._select_id=t,this.updateEvent(t),this.callEvent("onEventSelected",[t]))},g.unselect=function(t){if(!t||t==this._select_id){var e=this._select_id;this._select_id=null,e&&this.getEvent(e)&&this.updateEvent(e),this.callEvent("onEventUnselected",[e])}},g.getState=function(){return{mode:this._mode,date:new Date(this._date),min_date:new Date(this._min_date),max_date:new Date(this._max_date),editor_id:this._edit_id,lightbox_id:this._lightbox_id,new_event:this._new_event,select_id:this._select_id,expanded:this.expanded,drag_id:this._drag_id,drag_mode:this._drag_mode}},g._click={dhx_cal_data:function(t){if(g._ignore_next_click)return t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,g._ignore_next_click=!1,!1;var e=t?t.target:event.srcElement,i=g._locate_event(e);if(t=t||event,i){if(!g.callEvent("onClick",[i,t])||g.config.readonly)return}else g.callEvent("onEmptyClick",[g.getActionData(t).date,t]);if(i&&g.config.select){g.select(i);var n=g._getClassName(e);-1!=n.indexOf("_icon")&&g._click.buttons[n.split(" ")[1].replace("icon_","")](i)}else g._close_not_saved(),(new Date).valueOf()-(g._new_event||0)>500&&g.unselect()},dhx_cal_prev_button:function(){g._click.dhx_cal_next_button(0,-1)},dhx_cal_next_button:function(t,e){var i=1;g.config.rtl&&(e=-e,i=-i),g.setCurrentView(g.date.add(g.date[g._mode+"_start"](new Date(g._date)),e||i,g._mode))},dhx_cal_today_button:function(){g.callEvent("onBeforeTodayDisplayed",[])&&g.setCurrentView(g._currentDate())},dhx_cal_tab:function(){var t=this.getAttribute("name"),e=t.substring(0,t.search("_tab"));g.setCurrentView(g._date,e)},buttons:{delete:function(t){var e=g.locale.labels.confirm_deleting;g._dhtmlx_confirm(e,g.locale.labels.title_confirm_deleting,function(){g.deleteEvent(t)})},edit:function(t){g.edit(t)},save:function(t){g.editStop(!0)},details:function(t){g.showLightbox(t)},cancel:function(t){g.editStop(!1)}}},g._dhtmlx_confirm=function(t,e,i){if(!t)return i();var n={text:t};e&&(n.title=e),i&&(n.callback=function(t){t&&i()}),dhtmlx.confirm(n)},g.addEventNow=function(t,e,i){var n={};g._isObject(t)&&!g._isDate(t)&&(n=t,t=null);var a=6e4*(this.config.event_duration||this.config.time_step);t||(t=n.start_date||Math.round(g._currentDate().valueOf()/a)*a);var r=new Date(t);if(!e){var s=this.config.first_hour;s>r.getHours()&&(r.setHours(s),t=r.valueOf()),e=t.valueOf()+a}var o=new Date(e);r.valueOf()==o.valueOf()&&o.setTime(o.valueOf()+a),n.start_date=n.start_date||r,n.end_date=n.end_date||o,n.text=n.text||this.locale.labels.new_event,n.id=this._drag_id=n.id||this.uid(),this._drag_mode="new-size",this._loading=!0;var d=this.addEvent(n);return this.callEvent("onEventCreated",[this._drag_id,i]),this._loading=!1,this._drag_event={},this._on_mouse_up(i),d},g._on_dbl_click=function(t,e){if(e=e||t.target||t.srcElement,!this.config.readonly){var i=g._getClassName(e).split(" ")[0];switch(i){case"dhx_scale_holder":case"dhx_scale_holder_now":case"dhx_month_body":case"dhx_wa_day_data":if(!g.config.dblclick_create)break;this.addEventNow(this.getActionData(t).date,null,t);break;case"dhx_cal_event":case"dhx_wa_ev_body":case"dhx_agenda_line":case"dhx_grid_event":case"dhx_cal_event_line":case"dhx_cal_event_clear":var n=this._locate_event(e);if(!this.callEvent("onDblClick",[n,t]))return;this.config.details_on_dblclick||this._table_view||!this.getEvent(n)._timed||!this.config.select?this.showLightbox(n):this.edit(n);break;case"dhx_time_block":case"dhx_cal_container":return;default:var a=this["dblclick_"+i];if(a)a.call(this,t);else if(e.parentNode&&e!=this)return g._on_dbl_click(t,e.parentNode)}}},g._get_column_index=function(t){var e=0;if(this._cols){for(var i=0,n=0;i+this._cols[n]<t&&n<this._cols.length;)i+=this._cols[n],n++;if(e=n+(this._cols[n]?(t-i)/this._cols[n]:0),this._ignores&&e>=this._cols.length)for(;e>=1&&this._ignores[Math.floor(e)];)e--}return e},g._week_indexes_from_pos=function(t){if(this._cols){var e=this._get_column_index(t.x);return t.x=Math.min(this._cols.length-1,Math.max(0,Math.ceil(e)-1)),t.y=Math.max(0,Math.ceil(60*t.y/(this.config.time_step*this.config.hour_size_px))-1)+this.config.first_hour*(60/this.config.time_step),t}return t},g._mouse_coords=function(t){var e,i=document.body,n=document.documentElement;e=this.$env.isIE||!t.pageX&&!t.pageY?{x:t.clientX+(i.scrollLeft||n.scrollLeft||0)-i.clientLeft,y:t.clientY+(i.scrollTop||n.scrollTop||0)-i.clientTop}:{x:t.pageX,y:t.pageY},this.config.rtl&&this._colsS?(e.x=this.$container.querySelector(".dhx_cal_data").offsetWidth-e.x,"month"!==this._mode&&(e.x-=this.xy.scale_width)):e.x-=this.$domHelpers.getAbsoluteLeft(this._obj)+(this._table_view?0:this.xy.scale_width);var a=this.$container.querySelector(".dhx_cal_data");e.y-=this.$domHelpers.getAbsoluteTop(a)-this._els.dhx_cal_data[0].scrollTop,e.ev=t;var r=this["mouse_"+this._mode];if(r)e=r.call(this,e);else if(this._table_view){var s=this._get_column_index(e.x);if(!this._cols||!this._colsS)return e;var o=0;for(o=1;o<this._colsS.heights.length&&!(this._colsS.heights[o]>e.y);o++);e.y=Math.ceil(24*(Math.max(0,s)+7*Math.max(0,o-1))*60/this.config.time_step),(g._drag_mode||"month"==this._mode)&&(e.y=24*(Math.max(0,Math.ceil(s)-1)+7*Math.max(0,o-1))*60/this.config.time_step),"move"==this._drag_mode&&g._ignores_detected&&g.config.preserve_length&&(e._ignores=!0,this._drag_event._event_length||(this._drag_event._event_length=this._get_real_event_length(this._drag_event.start_date,this._drag_event.end_date,{x_step:1,x_unit:"day"}))),e.x=0}else e=this._week_indexes_from_pos(e);return e.timestamp=+new Date,e},g._close_not_saved=function(){if((new Date).valueOf()-(g._new_event||0)>500&&g._edit_id){var t=g.locale.labels.confirm_closing;g._dhtmlx_confirm(t,g.locale.labels.title_confirm_closing,function(){g.editStop(g.config.positive_closing)}),t&&(this._drag_id=this._drag_pos=this._drag_mode=null)}},g._correct_shift=function(t,e){return t-=6e4*(new Date(g._min_date).getTimezoneOffset()-new Date(t).getTimezoneOffset())*(e?-1:1)},g._is_pos_changed=function(t,e){function i(t,e,i){return!!(Math.abs(t-e)>i)}if(!t||!this._drag_pos)return!0;var n=5;return!!(this._drag_pos.has_moved||!this._drag_pos.timestamp||e.timestamp-this._drag_pos.timestamp>100||i(t.ev.clientX,e.ev.clientX,n)||i(t.ev.clientY,e.ev.clientY,n))},g._correct_drag_start_date=function(t){var e;g.matrix&&(e=g.matrix[g._mode]),e=e||{x_step:1,x_unit:"day"},t=new Date(t);var i=1;return(e._start_correction||e._end_correction)&&(i=60*(e.last_hour||0)-(60*t.getHours()+t.getMinutes())||1),1*t+(g._get_fictional_event_length(t,i,e)-i)},g._correct_drag_end_date=function(t,e){var i;g.matrix&&(i=g.matrix[g._mode]),i=i||{x_step:1,x_unit:"day"};var n=1*t+g._get_fictional_event_length(t,e,i);return new Date(1*n-(g._get_fictional_event_length(n,-1,i,-1)+1))},g._on_mouse_move=function(t){if(this._drag_mode){var e=this._mouse_coords(t);if(this._is_pos_changed(this._drag_pos,e)){var i,n;if(this._edit_id!=this._drag_id&&this._close_not_saved(),!this._drag_mode)return;var a=null;if(this._drag_pos&&!this._drag_pos.has_moved&&(a=this._drag_pos,a.has_moved=!0),this._drag_pos=e,this._drag_pos.has_moved=!0,"create"==this._drag_mode){if(a&&(e=a),this._close_not_saved(),this.unselect(this._select_id),this._loading=!0,i=this._get_date_from_pos(e).valueOf(),!this._drag_start){return this.callEvent("onBeforeEventCreated",[t,this._drag_id])?(this._loading=!1,void(this._drag_start=i)):void(this._loading=!1)}n=i,this._drag_start;var r=new Date(this._drag_start),s=new Date(n);"day"!=this._mode&&"week"!=this._mode||r.getHours()!=s.getHours()||r.getMinutes()!=s.getMinutes()||(s=new Date(this._drag_start+1e3)),this._drag_id=this.uid(),this.addEvent(r,s,this.locale.labels.new_event,this._drag_id,e.fields),this.callEvent("onEventCreated",[this._drag_id,t]),this._loading=!1,this._drag_mode="new-size"}var o,d=this.config.time_step,l=this.getEvent(this._drag_id);if(g.matrix&&(o=g.matrix[g._mode]),o=o||{x_step:1,x_unit:"day"},"move"==this._drag_mode)i=this._min_date.valueOf()+6e4*(e.y*this.config.time_step+24*e.x*60),!e.custom&&this._table_view&&(i+=1e3*this.date.time_part(l.start_date)),!this._table_view&&this._dragEventBody&&void 0===this._drag_event._move_event_shift&&(this._drag_event._move_event_shift=i-l.start_date),this._drag_event._move_event_shift&&(i-=this._drag_event._move_event_shift),i=this._correct_shift(i),e._ignores&&this.config.preserve_length&&this._table_view?(i=g._correct_drag_start_date(i),n=g._correct_drag_end_date(i,this._drag_event._event_length)):n=l.end_date.valueOf()-(l.start_date.valueOf()-i);else{if(i=l.start_date.valueOf(),n=l.end_date.valueOf(),this._table_view){var _=this._min_date.valueOf()+e.y*this.config.time_step*6e4+(e.custom?0:864e5);if("month"==this._mode)if(_=this._correct_shift(_,!1),this._drag_from_start){var h=864e5;_<=g.date.date_part(new Date(n+h-1)).valueOf()&&(i=_-h)}else n=_;else this.config.preserve_length?e.resize_from_start?i=g._correct_drag_start_date(_):n=g._correct_drag_end_date(_,0):e.resize_from_start?i=_:n=_}else{var c=this.date.date_part(new Date(l.end_date.valueOf()-1)).valueOf(),u=new Date(c),f=this.config.first_hour,v=this.config.last_hour,m=60/d*(v-f);this.config.time_step=1;var p=this._mouse_coords(t);this.config.time_step=d;var x=e.y*d*6e4,b=Math.min(e.y+1,m)*d*6e4,y=6e4*p.y;n=Math.abs(x-y)>Math.abs(b-y)?c+b:c+x,n+=6e4*(new Date(n).getTimezoneOffset()-u.getTimezoneOffset()),this._els.dhx_cal_data[0].style.cursor="s-resize","week"!=this._mode&&"day"!=this._mode||(n=this._correct_shift(n))}if("new-size"==this._drag_mode)if(n<=this._drag_start){var w=e.shift||(this._table_view&&!e.custom?864e5:0);i=n-(e.shift?0:w),n=this._drag_start+(w||6e4*d)}else i=this._drag_start;else n<=i&&(n=i+6e4*d)}var D=new Date(n-1),E=new Date(i);if("move"==this._drag_mode&&g.config.limit_drag_out&&(+E<+g._min_date||+n>+g._max_date)){if(+l.start_date<+g._min_date||+l.end_date>+g._max_date)E=new Date(l.start_date),n=new Date(l.end_date);else{var A=n-E;+E<+g._min_date?(E=new Date(g._min_date),e._ignores&&this.config.preserve_length&&this._table_view?(E=new Date(g._correct_drag_start_date(E)),o._start_correction&&(E=new Date(E.valueOf()+o._start_correction)),n=new Date(1*E+this._get_fictional_event_length(E,this._drag_event._event_length,o))):n=new Date(+E+A)):(n=new Date(g._max_date),e._ignores&&this.config.preserve_length&&this._table_view?(o._end_correction&&(n=new Date(n.valueOf()-o._end_correction)),n=new Date(1*n-this._get_fictional_event_length(n,0,o,!0)),E=new Date(1*n-this._get_fictional_event_length(n,this._drag_event._event_length,o,!0)),this._ignores_detected&&(E=g.date.add(E,o.x_step,o.x_unit),n=new Date(1*n-this._get_fictional_event_length(n,0,o,!0)),n=g.date.add(n,o.x_step,o.x_unit))):E=new Date(+n-A))}var D=new Date(n-1)}if(!this._table_view&&this._dragEventBody&&!g.config.all_timed&&(!g._get_section_view()&&e.x!=this._get_event_sday({start_date:new Date(i),end_date:new Date(i)})||new Date(i).getHours()<this.config.first_hour)){var A=n-E;if("move"==this._drag_mode){var h=this._min_date.valueOf()+24*e.x*60*6e4;E=new Date(h),E.setHours(this.config.first_hour),n=new Date(E.valueOf()+A),D=new Date(n-1)}}if(!this._table_view&&!g.config.all_timed&&(!g.getView()&&e.x!=this._get_event_sday({start_date:new Date(n),end_date:new Date(n)})||new Date(n).getHours()>=this.config.last_hour)){var A=n-E,h=this._min_date.valueOf()+24*e.x*60*6e4;n=g.date.date_part(new Date(h)),n.setHours(this.config.last_hour),D=new Date(n-1),"move"==this._drag_mode&&(E=new Date(+n-A))}if(this._table_view||D.getDate()==E.getDate()&&D.getHours()<this.config.last_hour||g._allow_dnd)if(l.start_date=E,l.end_date=new Date(n),this.config.update_render){var S=g._els.dhx_cal_data[0].scrollTop;this.update_view(),g._els.dhx_cal_data[0].scrollTop=S}else this.updateEvent(this._drag_id);this._table_view&&this.for_rendered(this._drag_id,function(t){t.className+=" dhx_in_move dhx_cal_event_drag"}),this.callEvent("onEventDrag",[this._drag_id,this._drag_mode,t])}}else if(g.checkEvent("onMouseMove")){var k=this._locate_event(t.target||t.srcElement);this.callEvent("onMouseMove",[k,t])}},g._on_mouse_down=function(t,e){if(2!=t.button&&!this.config.readonly&&!this._drag_mode){e=e||t.target||t.srcElement;var i=g._getClassName(e).split(" ")[0];switch(this.config.drag_event_body&&"dhx_body"==i&&e.parentNode&&-1===e.parentNode.className.indexOf("dhx_cal_select_menu")&&(i="dhx_event_move",this._dragEventBody=!0),i){case"dhx_cal_event_line":case"dhx_cal_event_clear":this._table_view&&(this._drag_mode="move");break;case"dhx_event_move":case"dhx_wa_ev_body":this._drag_mode="move";break;case"dhx_event_resize":this._drag_mode="resize";g._getClassName(e).indexOf("dhx_event_resize_end")<0?g._drag_from_start=!0:g._drag_from_start=!1;break;case"dhx_scale_holder":case"dhx_scale_holder_now":case"dhx_month_body":case"dhx_matrix_cell":case"dhx_marked_timespan":this._drag_mode="create";break;case"":if(e.parentNode)return g._on_mouse_down(t,e.parentNode);break;default:if((!g.checkEvent("onMouseDown")||g.callEvent("onMouseDown",[i,t]))&&e.parentNode&&e!=this&&"dhx_body"!=i)return g._on_mouse_down(t,e.parentNode);this._drag_mode=null,this._drag_id=null}if(this._drag_mode){var n=this._locate_event(e);if(this.config["drag_"+this._drag_mode]&&this.callEvent("onBeforeDrag",[n,this._drag_mode,t])){if(this._drag_id=n,(this._edit_id!=this._drag_id||this._edit_id&&"create"==this._drag_mode)&&this._close_not_saved(),!this._drag_mode)return;this._drag_event=g._lame_clone(this.getEvent(this._drag_id)||{}),this._drag_pos=this._mouse_coords(t)}else this._drag_mode=this._drag_id=0}this._drag_start=null}},g._get_private_properties=function(t){var e={};for(var i in t)0===i.indexOf("_")&&(e[i]=!0);return e},g._clear_temporary_properties=function(t,e){var i=this._get_private_properties(t),n=this._get_private_properties(e);for(var a in n)i[a]||delete e[a]},g._on_mouse_up=function(t){if(!t||2!=t.button||!this._mobile){if(this._drag_mode&&this._drag_id){this._els.dhx_cal_data[0].style.cursor="default";var e=this._drag_id,i=this._drag_mode,n=!this._drag_pos||this._drag_pos.has_moved;delete this._drag_event._move_event_shift;var a=this.getEvent(this._drag_id);if(n&&(this._drag_event._dhx_changed||!this._drag_event.start_date||a.start_date.valueOf()!=this._drag_event.start_date.valueOf()||a.end_date.valueOf()!=this._drag_event.end_date.valueOf())){var r="new-size"==this._drag_mode;if(this.callEvent("onBeforeEventChanged",[a,t,r,this._drag_event]))if(this._drag_id=this._drag_mode=null,r&&this.config.edit_on_create){if(this.unselect(),this._new_event=new Date,this._table_view||this.config.details_on_create||!this.config.select||!this.isOneDayEvent(this.getEvent(e)))return g.callEvent("onDragEnd",[e,i,t]),this.showLightbox(e);this._drag_pos=!0,this._select_id=this._edit_id=e}else this._new_event||this.callEvent(r?"onEventAdded":"onEventChanged",[e,this.getEvent(e)]);else r?this.deleteEvent(a.id,!0):(this._drag_event._dhx_changed=!1,this._clear_temporary_properties(a,this._drag_event),g._lame_copy(a,this._drag_event),this.updateEvent(a.id))}this._drag_pos&&(this._drag_pos.has_moved||!0===this._drag_pos)&&(this._drag_id=this._drag_mode=null,this.render_view_data()),g.callEvent("onDragEnd",[e,i,t])}this._drag_id=null,this._drag_mode=null,this._drag_pos=null}},g._trigger_dyn_loading=function(){return!(!this._load_mode||!this._load())&&(this._render_wait=!0,!0)},g.update_view=function(){this._reset_ignores(),this._update_nav_bar(this.config.header,this.$container.querySelector(".dhx_cal_navline"));var t=this[this._mode+"_view"];if(t?t(!0):this._reset_scale(),this._trigger_dyn_loading())return!0;this.render_view_data()},g.isViewExists=function(t){return!!(g[t+"_view"]||g.date[t+"_start"]&&g.templates[t+"_date"]&&g.templates[t+"_scale_date"])},g._set_aria_buttons_attrs=function(){for(var t=["dhx_cal_next_button","dhx_cal_prev_button","dhx_cal_tab","dhx_cal_today_button"],e=0;e<t.length;e++)for(var i=this._els[t[e]],n=0;i&&n<i.length;n++){var a=i[n].getAttribute("name"),r=this.locale.labels[t[e]];a&&(r=this.locale.labels[a]||r),"dhx_cal_next_button"==t[e]?r=this.locale.labels.next:"dhx_cal_prev_button"==t[e]&&(r=this.locale.labels.prev),this._waiAria.headerButtonsAttributes(i[n],r||"")}},g.updateView=function(t,e){if(!this.$container)throw new Error("The scheduler is not initialized. \n **scheduler.updateView** or **scheduler.setCurrentView** can be called only after **scheduler.init**");t=t||this._date,e=e||this._mode;var i="dhx_cal_data",n=this._obj,a="dhx_scheduler_"+this._mode,r="dhx_scheduler_"+e;this._mode&&-1!=n.className.indexOf(a)?n.className=n.className.replace(a,r):n.className+=" "+r;var s,o="dhx_multi_day",d=!(this._mode!=e||!this.config.preserve_scroll)&&this._els[i][0].scrollTop;this._els[o]&&this._els[o][0]&&(s=this._els[o][0].scrollTop),this[this._mode+"_view"]&&e&&this._mode!=e&&this[this._mode+"_view"](!1),this._close_not_saved(),this._els[o]&&(this._els[o][0].parentNode.removeChild(this._els[o][0]),this._els[o]=null),this._mode=e,this._date=t,this._table_view="month"==this._mode,this._dy_shift=0,this.update_view(),this._set_aria_buttons_attrs();var l=this._els.dhx_cal_tab;if(l)for(var _=0;_<l.length;_++){var h=l[_];h.getAttribute("name")==this._mode+"_tab"?(h.classList.add("active"),this._waiAria.headerToggleState(h,!0)):(h.classList.remove("active"),this._waiAria.headerToggleState(h,!1))}"number"==typeof d&&(this._els[i][0].scrollTop=d),"number"==typeof s&&this._els[o]&&this._els[o][0]&&(this._els[o][0].scrollTop=s)},g.setCurrentView=function(t,e){this.callEvent("onBeforeViewChange",[this._mode,this._date,e||this._mode,t||this._date])&&(this.updateView(t,e),this.callEvent("onViewChange",[this._mode,this._date]))},g.render=function(t,e){g.setCurrentView(t,e)},g._render_x_header=function(t,e,i,n,a){a=a||0;var r=document.createElement("div");r.className="dhx_scale_bar",this.templates[this._mode+"_scalex_class"]&&(r.className+=" "+this.templates[this._mode+"_scalex_class"](i));var s=this._cols[t]-1;"month"==this._mode&&0===t&&this.config.left_border&&(r.className+=" dhx_scale_bar_border",e+=1),this.set_xy(r,s,this.xy.scale_height-2,e,a);var o=this.templates[this._mode+"_scale_date"](i,this._mode);r.innerHTML=o,this._waiAria.dayHeaderAttr(r,o),n.appendChild(r)},g._get_columns_num=function(t,e){var i=7;if(!g._table_view){var n=g.date["get_"+g._mode+"_end"];n&&(e=n(t)),i=Math.round((e.valueOf()-t.valueOf())/864e5)}return i},g._get_timeunit_start=function(){return this.date[this._mode+"_start"](new Date(this._date.valueOf()))},g._get_view_end=function(){var t=this._get_timeunit_start(),e=g.date.add(t,1,this._mode);if(!g._table_view){var i=g.date["get_"+g._mode+"_end"];i&&(e=i(t))}return e},g._calc_scale_sizes=function(t,e,i){var n=this.config.rtl,a=t,r=this._get_columns_num(e,i);this._process_ignores(e,r,"day",1);for(var s=r-this._ignores_detected,o=0;o<r;o++)this._ignores[o]?(this._cols[o]=0,s++):this._cols[o]=Math.floor(a/(s-o)),a-=this._cols[o],this._colsS[o]=(this._cols[o-1]||0)+(this._colsS[o-1]||(this._table_view?0:(n?this.xy.scroll_width:this.xy.scale_width)+2));this._colsS.col_length=r,this._colsS[r]=this._cols[r-1]+this._colsS[r-1]||0},g._set_scale_col_size=function(t,e,i){var n=this.config;this.set_xy(t,e-1,n.hour_size_px*(n.last_hour-n.first_hour),i+this.xy.scale_width+1,0)},g._render_scales=function(t,e){var i=new Date(g._min_date),n=new Date(g._max_date),a=this.date.date_part(g._currentDate()),r=parseInt(t.style.width,10),s=new Date(this._min_date),o=this._get_columns_num(i,n);this._calc_scale_sizes(r,i,n);var d=0;t.innerHTML="";for(var l=0;l<o;l++){if(this._ignores[l]||this._render_x_header(l,d,s,t),!this._table_view){var _=document.createElement("div"),h="dhx_scale_holder";s.valueOf()==a.valueOf()&&(h="dhx_scale_holder_now"),_.setAttribute("data-column-index",l),this._ignores_detected&&this._ignores[l]&&(h+=" dhx_scale_ignore"),_.className=h+" "+this.templates.week_date_class(s,a),this._waiAria.dayColumnAttr(_,s),this._set_scale_col_size(_,this._cols[l],d),e.appendChild(_),this.callEvent("onScaleAdd",[_,s])}d+=this._cols[l],s=this.date.add(s,1,"day"),s=this.date.day_start(s)}},g._getNavDateElement=function(){return this.$container.querySelector(".dhx_cal_date")},g._reset_scale=function(){if(this.templates[this._mode+"_date"]){var t=this._els.dhx_cal_header[0],e=this._els.dhx_cal_data[0],i=this.config;t.innerHTML="",e.innerHTML="";var n=(i.readonly||!i.drag_resize?" dhx_resize_denied":"")+(i.readonly||!i.drag_move?" dhx_move_denied":"");e.className="dhx_cal_data"+n,this._scales={},this._cols=[],this._colsS={height:0},this._dy_shift=0,this.set_sizes();var a,r,s=this._get_timeunit_start(),o=g._get_view_end();a=r=this._table_view?g.date.week_start(s):s,this._min_date=a;var d=this.templates[this._mode+"_date"](s,o,this._mode),l=this._getNavDateElement();if(l&&(l.innerHTML=d,this._waiAria.navBarDateAttr(l,d)),this._max_date=o,g._render_scales(t,e),this._table_view)this._reset_month_scale(e,s,r);else if(this._reset_hours_scale(e,s,r),i.multi_day){var _="dhx_multi_day";this._els[_]&&(this._els[_][0].parentNode.removeChild(this._els[_][0]),this._els[_]=null);var h=this._els.dhx_cal_navline[0],c=h.offsetHeight+this._els.dhx_cal_header[0].offsetHeight+1,u=document.createElement("div");u.className=_,u.style.visibility="hidden";var f=this._colsS[this._colsS.col_length],v=i.rtl?this.xy.scale_width:this.xy.scroll_width,m=Math.max(f+v-2,0);this.set_xy(u,m,0,0,c),e.parentNode.insertBefore(u,e);var p=u.cloneNode(!0);p.className=_+"_icon",p.style.visibility="hidden",this.set_xy(p,this.xy.scale_width,0,0,c),u.appendChild(p),this._els[_]=[u,p],this._els[_][0].onclick=this._click.dhx_cal_data}}},g._reset_hours_scale=function(t,e,i){var n=document.createElement("div");n.className="dhx_scale_holder";for(var a=new Date(1980,1,1,this.config.first_hour,0,0),r=1*this.config.first_hour;r<this.config.last_hour;r++){var s=document.createElement("div");s.className="dhx_scale_hour",s.style.height=this.config.hour_size_px+"px";var o=this.xy.scale_width;this.config.left_border&&(s.className+=" dhx_scale_hour_border"),s.style.width=o+"px";var d=g.templates.hour_scale(a);s.innerHTML=d,this._waiAria.hourScaleAttr(s,d),n.appendChild(s),a=this.date.add(a,1,"hour")}t.appendChild(n),this.config.scroll_hour&&(t.scrollTop=this.config.hour_size_px*(this.config.scroll_hour-this.config.first_hour))},g._currentDate=function(){return g.config.now_date?new Date(g.config.now_date):new Date},g._reset_ignores=function(){this._ignores={},this._ignores_detected=0},g._process_ignores=function(t,e,i,n,a){this._reset_ignores();var r=g["ignore_"+this._mode];if(r)for(var s=new Date(t),o=0;o<e;o++)r(s)&&(this._ignores_detected+=1,this._ignores[o]=!0,a&&e++),s=g.date.add(s,n,i),g.date[i+"_start"]&&(s=g.date[i+"_start"](s))},g._render_month_scale=function(t,e,i,n){function a(t){var e=g._colsS.height;return void 0!==g._colsS.heights[t+1]&&(e=g._colsS.heights[t+1]-(g._colsS.heights[t]||0)),e}var r=g.date.add(e,1,"month"),s=new Date(i),o=g._currentDate();this.date.date_part(o),this.date.date_part(i),n=n||Math.ceil(Math.round((r.valueOf()-i.valueOf())/864e5)/7);for(var d=[],l=0;l<=7;l++){var _=(this._cols[l]||0)-1;0===l&&this.config.left_border&&(_-=1),d[l]=_+"px"}var h=0,c=document.createElement("table");c.setAttribute("cellpadding","0"),c.setAttribute("cellspacing","0");var u=document.createElement("tbody");c.appendChild(u);for(var f=[],l=0;l<n;l++){var v=document.createElement("tr");u.appendChild(v);for(var m=Math.max(a(l)-g.xy.month_head_height,0),p=0;p<7;p++){var x=document.createElement("td");v.appendChild(x);var b="";i<e?b="dhx_before":i>=r?b="dhx_after":i.valueOf()==o.valueOf()&&(b="dhx_now"),this._ignores_detected&&this._ignores[p]&&(b+=" dhx_scale_ignore"),x.className=b+" "+this.templates.month_date_class(i,o),x.setAttribute("data-cell-date",g.templates.format_date(i));var y="dhx_month_body",w="dhx_month_head";if(0===p&&this.config.left_border&&(y+=" dhx_month_body_border",w+=" dhx_month_head_border"),this._ignores_detected&&this._ignores[p])x.appendChild(document.createElement("div")),x.appendChild(document.createElement("div"));else{this._waiAria.monthCellAttr(x,i);var D=document.createElement("div");D.className=w,D.innerHTML=this.templates.month_day(i),x.appendChild(D);var E=document.createElement("div");E.className=y,E.style.height=m+"px",E.style.width=d[p],x.appendChild(E)}f.push(i);var A=i.getDate();i=this.date.add(i,1,"day"),i.getDate()-A>1&&(i=new Date(i.getFullYear(),i.getMonth(),A+1,12,0))}g._colsS.heights[l]=h,h+=a(l)}this._min_date=s,this._max_date=i,t.innerHTML="",t.appendChild(c),this._scales={};for(var S=t.getElementsByTagName("div"),l=0;l<f.length;l++){var t=S[2*l+1],k=f[l];this._scales[+k]=t}for(var l=0;l<f.length;l++){var k=f[l];this.callEvent("onScaleAdd",[this._scales[+k],k])}return this._max_date},g._reset_month_scale=function(t,e,i,n){var a=g.date.add(e,1,"month"),r=g._currentDate();this.date.date_part(r),this.date.date_part(i),n=n||Math.ceil(Math.round((a.valueOf()-i.valueOf())/864e5)/7);var s=Math.floor(t.clientHeight/n)-this.xy.month_head_height;return this._colsS.height=s+this.xy.month_head_height,this._colsS.heights=[],g._render_month_scale(t,e,i,n)},g.getView=function(t){return t||(t=g.getState().mode),g.matrix&&g.matrix[t]?g.matrix[t]:g._props&&g._props[t]?g._props[t]:null},g.getLabel=function(t,e){for(var i=this.config.lightbox.sections,n=0;n<i.length;n++)if(i[n].map_to==t)for(var a=i[n].options,r=0;r<a.length;r++)if(a[r].key==e)return a[r].label;return""},g.updateCollection=function(t,e){var i=g.serverList(t);return!!i&&(i.splice(0,i.length),i.push.apply(i,e||[]),g.callEvent("onOptionsLoad",[]),g.resetLightbox(),!0)},g._lame_clone=function(t,e){var i,n,a;for(e=e||[],i=0;i<e.length;i+=2)if(t===e[i])return e[i+1];if(t&&"object"==typeof t){for(a=Object.create(t),n=[Array,Date,Number,String,Boolean],i=0;i<n.length;i++)t instanceof n[i]&&(a=i?new n[i](t):new n[i]);e.push(t,a);for(i in t)Object.prototype.hasOwnProperty.apply(t,[i])&&(a[i]=g._lame_clone(t[i],e))}return a||t},g._lame_copy=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},g._get_date_from_pos=function(t){var e=this._min_date.valueOf()+6e4*(t.y*this.config.time_step+24*(this._table_view?0:t.x)*60);return new Date(this._correct_shift(e))},g.getActionData=function(t){var e=this._mouse_coords(t);return{date:this._get_date_from_pos(e),section:e.section}},g._focus=function(t,e){if(t&&t.focus)if(this._mobile)window.setTimeout(function(){t.focus()},10);else try{e&&t.select&&t.offsetWidth&&t.select(),t.focus()}catch(t){}},g._get_real_event_length=function(t,e,i){var n,a=e-t,r=i._start_correction+i._end_correction||0,s=this["ignore_"+this._mode],o=0;i.render?(o=this._get_date_index(i,t),n=this._get_date_index(i,e)):n=Math.round(a/60/60/1e3/24);for(var d=!0;o<n;){var l=g.date.add(e,-i.x_step,i.x_unit);s&&s(e)&&(!d||d&&s(l))?a-=e-l:(d=!1,a-=r),e=l,n--}return a},g._get_fictional_event_length=function(t,e,i,n){var a=new Date(t),r=n?-1:1;if(i._start_correction||i._end_correction){var s;s=n?60*a.getHours()+a.getMinutes()-60*(i.first_hour||0):60*(i.last_hour||0)-(60*a.getHours()+a.getMinutes());var o=60*(i.last_hour-i.first_hour),d=Math.ceil((e/6e4-s)/o);d<0&&(d=0),e+=d*(1440-o)*60*1e3}var l,_=new Date(1*t+e*r),h=this["ignore_"+this._mode],c=0;for(i.render?(c=this._get_date_index(i,a),l=this._get_date_index(i,_)):l=Math.round(e/60/60/1e3/24);c*r<=l*r;){var u=g.date.add(a,i.x_step*r,i.x_unit);h&&h(a)&&(e+=(u-a)*r,l+=r),a=u,c+=r}return e},g._get_section_view=function(){return this.getView()},g._get_section_property=function(){return this.matrix&&this.matrix[this._mode]?this.matrix[this._mode].y_property:this._props&&this._props[this._mode]?this._props[this._mode].map_to:null},g._is_initialized=function(){var t=this.getState();return this._obj&&t.date&&t.mode},g._is_lightbox_open=function(){var t=this.getState();return null!==t.lightbox_id&&void 0!==t.lightbox_id},g._getClassName=function(t){if(!t)return"";var e=t.className||"";return e.baseVal&&(e=e.baseVal),e.indexOf||(e=""),e||""},g.event=function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)},g.eventRemove=function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i)},function(){function t(t){var e=!1,i=!1;if(window.getComputedStyle){var n=window.getComputedStyle(t,null);e=n.display,i=n.visibility}else t.currentStyle&&(e=t.currentStyle.display,i=t.currentStyle.visibility);var a=!1,r=g._locate_css({target:t},"dhx_form_repeat",!1);return r&&(a=!("0px"!=r.style.height)),a=a||!t.offsetHeight,"none"!=e&&"hidden"!=i&&!a}function e(t){return!isNaN(t.getAttribute("tabindex"))&&1*t.getAttribute("tabindex")>=0}function i(t){return!{a:!0,area:!0}[t.nodeName.loLowerCase()]||!!t.getAttribute("href")}function n(t){return!{input:!0,select:!0,textarea:!0,button:!0,object:!0}[t.nodeName.toLowerCase()]||!t.hasAttribute("disabled")}g._getFocusableNodes=function(a){for(var r=a.querySelectorAll(["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","[tabindex]","[contenteditable]"].join(", ")),s=Array.prototype.slice.call(r,0),o=0;o<s.length;o++){var d=s[o];(e(d)||n(d)||i(d))&&t(d)||(s.splice(o,1),o--)}return s}}(),g._trim=function(t){return(String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")}).apply(t)},g._isDate=function(t){return!(!t||"object"!=typeof t)&&!!(t.getFullYear&&t.getMonth&&t.getDate)},g._isObject=function(t){return t&&"object"==typeof t},function(){function t(t){return(t+"").replace(n," ").replace(a," ")}function e(t){return(t+"").replace(r,"&#39;")}function i(){return!g.config.wai_aria_attributes}var n=new RegExp("<(?:.|\n)*?>","gm"),a=new RegExp(" +","gm"),r=new RegExp("'","gm");g._waiAria={getAttributeString:function(i){var n=[" "];for(var a in i)if("function"!=typeof i[a]&&"object"!=typeof i[a]){var r=e(t(i[a]));n.push(a+"='"+r+"'")}return n.push(" "),n.join(" ")},setAttributes:function(e,i){for(var n in i)e.setAttribute(n,t(i[n]));return e},labelAttr:function(t,e){return this.setAttributes(t,{"aria-label":e})},label:function(t){return g._waiAria.getAttributeString({"aria-label":t})},hourScaleAttr:function(t,e){this.labelAttr(t,e)},monthCellAttr:function(t,e){this.labelAttr(t,g.templates.day_date(e))},navBarDateAttr:function(t,e){this.labelAttr(t,e)},dayHeaderAttr:function(t,e){this.labelAttr(t,e)},dayColumnAttr:function(t,e){this.dayHeaderAttr(t,g.templates.day_date(e))},headerButtonsAttributes:function(t,e){return this.setAttributes(t,{role:"button","aria-label":e})},headerToggleState:function(t,e){return this.setAttributes(t,{"aria-pressed":e?"true":"false"})},getHeaderCellAttr:function(t){return g._waiAria.getAttributeString({"aria-label":t})},eventAttr:function(t,e){this._eventCommonAttr(t,e)},_eventCommonAttr:function(e,i){i.setAttribute("aria-label",t(g.templates.event_text(e.start_date,e.end_date,e))),g.config.readonly&&i.setAttribute("aria-readonly",!0),e.$dataprocessor_class&&i.setAttribute("aria-busy",!0),i.setAttribute("aria-selected",g.getState().select_id==e.id?"true":"false")},setEventBarAttr:function(t,e){this._eventCommonAttr(t,e)},_getAttributes:function(t,e){var i={setAttribute:function(t,e){this[t]=e}};return t.apply(this,[e,i]),i},eventBarAttrString:function(t){return this.getAttributeString(this._getAttributes(this.setEventBarAttr,t))},agendaHeadAttrString:function(){return this.getAttributeString({role:"row"})},agendaHeadDateString:function(t){return this.getAttributeString({role:"columnheader","aria-label":t})},agendaHeadDescriptionString:function(t){return this.agendaHeadDateString(t)},agendaDataAttrString:function(){return this.getAttributeString({role:"grid"})},agendaEventAttrString:function(t){var e=this._getAttributes(this._eventCommonAttr,t);return e.role="row",this.getAttributeString(e)},agendaDetailsBtnString:function(){return this.getAttributeString({role:"button","aria-label":g.locale.labels.icon_details})},gridAttrString:function(){return this.getAttributeString({role:"grid"})},gridRowAttrString:function(t){return this.agendaEventAttrString(t)},gridCellAttrString:function(t,e,i){return this.getAttributeString({role:"gridcell","aria-label":[void 0===e.label?e.id:e.label,": ",i]})},mapAttrString:function(){return this.gridAttrString()},mapRowAttrString:function(t){return this.gridRowAttrString(t)},mapDetailsBtnString:function(){return this.agendaDetailsBtnString()},minicalHeader:function(t,e){this.setAttributes(t,{id:e+"","aria-live":"assertice","aria-atomic":"true"})},minicalGrid:function(t,e){this.setAttributes(t,{"aria-labelledby":e+"",role:"grid"})},minicalRow:function(t){this.setAttributes(t,{role:"row"})},minicalDayCell:function(t,e){var i=e.valueOf()<g._max_date.valueOf()&&e.valueOf()>=g._min_date.valueOf();this.setAttributes(t,{role:"gridcell","aria-label":g.templates.day_date(e),"aria-selected":i?"true":"false"})},minicalHeadCell:function(t){this.setAttributes(t,{role:"columnheader"})},weekAgendaDayCell:function(t,e){var i=t.querySelector(".dhx_wa_scale_bar"),n=t.querySelector(".dhx_wa_day_data"),a=g.uid()+"";this.setAttributes(i,{id:a}),this.setAttributes(n,{"aria-labelledby":a})},weekAgendaEvent:function(t,e){this.eventAttr(e,t)},lightboxHiddenAttr:function(t){t.setAttribute("aria-hidden","true")},lightboxVisibleAttr:function(t){t.setAttribute("aria-hidden","false")},lightboxSectionButtonAttrString:function(t){return this.getAttributeString({role:"button","aria-label":t,tabindex:"0"})},yearHeader:function(t,e){this.setAttributes(t,{id:e+""})},yearGrid:function(t,e){this.minicalGrid(t,e)},yearHeadCell:function(t){return this.minicalHeadCell(t)},yearRow:function(t){return this.minicalRow(t)},yearDayCell:function(t){this.setAttributes(t,{role:"gridcell"})},lightboxAttr:function(t){t.setAttribute("role","dialog"),t.setAttribute("aria-hidden","true"),t.firstChild.setAttribute("role","heading")},lightboxButtonAttrString:function(t){return this.getAttributeString({role:"button","aria-label":g.locale.labels[t],tabindex:"0"})},eventMenuAttrString:function(t){return this.getAttributeString({role:"button","aria-label":g.locale.labels[t]})},lightboxHeader:function(t,e){t.setAttribute("aria-label",e)},lightboxSelectAttrString:function(t){var e="";switch(t){case"%Y":e=g.locale.labels.year;break;case"%m":e=g.locale.labels.month;break;case"%d":e=g.locale.labels.day;break;case"%H:%i":e=g.locale.labels.hour+" "+g.locale.labels.minute}return g._waiAria.getAttributeString({"aria-label":e})},messageButtonAttrString:function(t){return"tabindex='0' role='button' aria-label='"+t+"'"},messageInfoAttr:function(t){t.setAttribute("role","alert")},messageModalAttr:function(t,e){t.setAttribute("role","dialog"),e&&t.setAttribute("aria-labelledby",e)},quickInfoAttr:function(t){t.setAttribute("role","dialog")},quickInfoHeaderAttrString:function(){return" role='heading' "},quickInfoHeader:function(t,e){t.setAttribute("aria-label",e)},quickInfoButtonAttrString:function(t){return g._waiAria.getAttributeString({role:"button","aria-label":t,tabindex:"0"})},tooltipAttr:function(t){t.setAttribute("role","tooltip")},tooltipVisibleAttr:function(t){t.setAttribute("aria-hidden","false")},tooltipHiddenAttr:function(t){t.setAttribute("aria-hidden","true")}};for(var s in g._waiAria)g._waiAria[s]=function(t){return function(){return i()?" ":t.apply(this,arguments)}}(g._waiAria[s])}(),g.utils={mixin:function(t,e,i){for(var n in e)(void 0===t[n]||i)&&(t[n]=e[n]);return t},copy:function t(e){var i,n;if(e&&"object"==typeof e)switch(!0){case h(e):n=new Date(e);break;case o(e):for(n=new Array(e.length),i=0;i<e.length;i++)n[i]=t(e[i]);break;case d(e):n=new String(e);break;case l(e):n=new Number(e);break;case _(e):n=new Boolean(e);break;default:n={};for(i in e)Object.prototype.hasOwnProperty.apply(e,[i])&&(n[i]=t(e[i]))}return n||e}},g.$domHelpers={getAbsoluteLeft:function(t){return this.getOffset(t).left},getAbsoluteTop:function(t){return this.getOffset(t).top},getOffsetSum:function(t){for(var e=0,i=0;t;)e+=parseInt(t.offsetTop),i+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:e,left:i}},getOffsetRect:function(t){var e=t.getBoundingClientRect(),i=0,n=0;if(/Mobi/.test(navigator.userAgent)){var a=document.createElement("div");a.style.position="absolute",a.style.left="0px",a.style.top="0px",a.style.width="1px",a.style.height="1px",document.body.appendChild(a);var r=a.getBoundingClientRect();i=e.top-r.top,n=e.left-r.left,a.parentNode.removeChild(a)}else{var s=document.body,o=document.documentElement,d=window.pageYOffset||o.scrollTop||s.scrollTop,l=window.pageXOffset||o.scrollLeft||s.scrollLeft,_=o.clientTop||s.clientTop||0,h=o.clientLeft||s.clientLeft||0;i=e.top+d-_,n=e.left+l-h}return{top:Math.round(i),left:Math.round(n)}},getOffset:function(t){return t.getBoundingClientRect?this.getOffsetRect(t):this.getOffsetSum(t)},closest:function(t,e){return t&&e?w(t,e):null},insertAfter:function(t,e){e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)}};var w;if(Element.prototype.closest)w=function(t,e){return t.closest(e)};else{var D=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;w=function(t,e){var i=t;do{if(D.call(i,e))return i;i=i.parentElement||i.parentNode}while(null!==i&&1===i.nodeType);return null}}g.$env={isIE:navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0,isIE6:!window.XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,isIE7:navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,isIE8:navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,isOpera:navigator.userAgent.indexOf("Opera")>=0,isChrome:navigator.userAgent.indexOf("Chrome")>=0,isKHTML:navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0,isFF:navigator.userAgent.indexOf("Firefox")>=0,isIPad:navigator.userAgent.search(/iPad/gi)>=0,isEdge:-1!=navigator.userAgent.indexOf("Edge")},g.$ajax={_obj:g,cache:!0,method:"get",parse:function(t){if("string"!=typeof t)return t;var e;return t=t.replace(/^[\s]+/,""),window.DOMParser&&!g.$env.isIE?e=(new window.DOMParser).parseFromString(t,"text/xml"):window.ActiveXObject!==window.undefined&&(e=new window.ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)),e},xmltop:function(t,e,i){if(void 0===e.status||e.status<400){var n=e.responseXML?e.responseXML||e:this.parse(e.responseText||e);if(n&&null!==n.documentElement&&!n.getElementsByTagName("parsererror").length)return n.getElementsByTagName(t)[0]}return-1!==i&&this._obj.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],i]),document.createElement("DIV")},xpath:function(t,e){if(e.nodeName||(e=e.responseXML||e),g.$env.isIE)return e.selectNodes(t)||[];for(var i,n=[],a=(e.ownerDocument||e).evaluate(t,e,null,XPathResult.ANY_TYPE,null);;){if(!(i=a.iterateNext()))break;n.push(i)}return n},query:function(t){this._call(t.method||"GET",t.url,t.data||"",t.async||!0,t.callback,null,t.headers)},get:function(t,e){this._call("GET",t,null,!0,e)},getSync:function(t){return this._call("GET",t,null,!1)},put:function(t,e,i){this._call("PUT",t,e,!0,i)},del:function(t,e,i){this._call("DELETE",t,e,!0,i)},post:function(t,e,i){1==arguments.length?e="":2!=arguments.length||"function"!=typeof e&&"function"!=typeof window[e]?e=String(e):(i=e,e=""),this._call("POST",t,e,!0,i)},postSync:function(t,e){return e=null===e?"":String(e),this._call("POST",t,e,!1)},getLong:function(t,e){this._call("GET",t,null,!0,e,{url:t})},postLong:function(t,e,i){2!=arguments.length||"function"!=typeof e&&(window[e],0)||(i=e,e=""),this._call("POST",t,e,!0,i,{url:t,postData:e})},_call:function(t,e,i,n,a,r,s){var o=this._obj,d=window.XMLHttpRequest&&!o.$env.isIE?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),l=null!==navigator.userAgent.match(/AppleWebKit/)&&null!==navigator.userAgent.match(/Qt/)&&null!==navigator.userAgent.match(/Safari/);if(n&&(d.onreadystatechange=function(){if(4==d.readyState||l&&3==d.readyState){if((200!=d.status||""===d.responseText)&&!o.callEvent("onAjaxError",[d]))return;window.setTimeout(function(){"function"==typeof a&&a.apply(window,[{xmlDoc:d,filePath:e}]),r&&(void 0!==r.postData?this.postLong(r.url,r.postData,a):this.getLong(r.url,a)),a=null,d=null},1)}}),"GET"!=t||this.cache||(e+=(e.indexOf("?")>=0?"&":"?")+"dhxr"+(new Date).getTime()+"=1"),d.open(t,e,n),s)for(var _ in s)d.setRequestHeader(_,s[_]);else"POST"==t.toUpperCase()||"PUT"==t||"DELETE"==t?d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==t&&(i=null);if(d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.send(i),!n)return{xmlDoc:d,filePath:e}},urlSeparator:function(t){return-1!=t.indexOf("?")?"&":"?"}};var E=function(t,e){for(var i="var temp=date.match(/[a-zA-Z]+|[0-9]+/g);",n=t.match(/%[a-zA-Z]/g),a=0;a<n.length;a++)switch(n[a]){case"%j":case"%d":i+="set[2]=temp["+a+"]||1;";break;case"%n":case"%m":i+="set[1]=(temp["+a+"]||1)-1;";break;case"%y":i+="set[0]=temp["+a+"]*1+(temp["+a+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":i+="set[3]=temp["+a+"]||0;";break;case"%i":i+="set[4]=temp["+a+"]||0;";break;case"%Y":i+="set[0]=temp["+a+"]||0;";break;case"%a":case"%A":i+="set[3]=set[3]%12+((temp["+a+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":i+="set[5]=temp["+a+"]||0;";break;case"%M":i+="set[1]=this.locale.date.month_short_hash[temp["+a+"]]||0;";break;case"%F":i+="set[1]=this.locale.date.month_full_hash[temp["+a+"]]||0;"}var r="set[0],set[1],set[2],set[3],set[4],set[5]";return e&&(r=" Date.UTC("+r+")"),new Function("date","var set=[0,0,1,0,0,0]; "+i+" return new Date("+r+");")};g.date={init:function(){for(var t=g.locale.date.month_short,e=g.locale.date.month_short_hash={},i=0;i<t.length;i++)e[t[i]]=i;for(var t=g.locale.date.month_full,e=g.locale.date.month_full_hash={},i=0;i<t.length;i++)e[t[i]]=i},_bind_host_object:function(t){return t.bind?t.bind(g):function(){return t.apply(g,arguments)}},date_part:function(t){var e=new Date(t);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getHours()&&(t.getDate()<e.getDate()||t.getMonth()<e.getMonth()||t.getFullYear()<e.getFullYear())&&t.setTime(t.getTime()+36e5*(24-t.getHours())),t},time_part:function(t){return(t.valueOf()/1e3-60*t.getTimezoneOffset())%86400},week_start:function(t){var e=t.getDay();return g.config.start_on_monday&&(0===e?e=6:e--),this.date_part(this.add(t,-1*e,"day"))},month_start:function(t){return t.setDate(1),this.date_part(t)},year_start:function(t){return t.setMonth(0),this.month_start(t)},day_start:function(t){return this.date_part(t)},_add_days:function(t,e){var i=new Date(t.valueOf());if(i.setDate(i.getDate()+e),e==Math.round(e)&&e>0){var n=+i-+t,a=n%864e5;if(a&&t.getTimezoneOffset()==i.getTimezoneOffset()){var r=a/36e5;i.setTime(i.getTime()+60*(24-r)*60*1e3)}}return e>=0&&!t.getHours()&&i.getHours()&&(i.getDate()<t.getDate()||i.getMonth()<t.getMonth()||i.getFullYear()<t.getFullYear())&&i.setTime(i.getTime()+36e5*(24-i.getHours())),i},add:function(t,e,i){var n=new Date(t.valueOf());switch(i){case"day":n=g.date._add_days(n,e);break;case"week":n=g.date._add_days(n,7*e);break;case"month":n.setMonth(n.getMonth()+e);break;case"year":n.setYear(n.getFullYear()+e);break;case"hour":n.setTime(n.getTime()+60*e*60*1e3);break;case"minute":n.setTime(n.getTime()+60*e*1e3);break;default:return g.date["add_"+i](t,e,i)}return n},to_fixed:function(t){return t<10?"0"+t:t},copy:function(t){return new Date(t.valueOf())},date_to_str:function(t,e){t=t.replace(/%[a-zA-Z]/g,function(t){switch(t){case"%d":return'"+this.date.to_fixed(date.getDate())+"';case"%m":return'"+this.date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+this.date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+this.locale.date.day_short[date.getDay()]+"';case"%l":return'"+this.locale.date.day_full[date.getDay()]+"';case"%M":return'"+this.locale.date.month_short[date.getMonth()]+"';case"%F":return'"+this.locale.date.month_full[date.getMonth()]+"';case"%h":return'"+this.date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+this.date.to_fixed(date.getHours())+"';case"%i":return'"+this.date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+this.date.to_fixed(date.getSeconds())+"';case"%W":return'"+this.date.to_fixed(this.date.getISOWeek(date))+"';default:return t}}),e&&(t=t.replace(/date\.get/g,"date.getUTC"));var i=new Function("date",'return "'+t+'";');return g.date._bind_host_object(i)},str_to_date:function(t,e,i){var n=E(t,e),a=/^[0-9]{4}(\-|\/)[0-9]{2}(\-|\/)[0-9]{2} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/,r=/^[0-9]{2}\/[0-9]{2}\/[0-9]{4} ?(([0-9]{1,2}:[0-9]{2})(:[0-9]{1,2})?)?$/,s=/^[0-9]{2}\-[0-9]{2}\-[0-9]{4} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/,o=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,d=function(t){return a.test(String(t))},l=function(t){return r.test(String(t))},_=function(t){return s.test(String(t))},h=function(t){return o.test(t)},c=E("%Y-%m-%d %H:%i:%s",e),u=E("%m/%d/%Y %H:%i:%s",e),f=E("%d-%m-%Y %H:%i:%s",e);return function(t){if(!i&&!g.config.parse_exact_format){if(t&&t.getISOWeek)return new Date(t);if("number"==typeof t)return new Date(t);if(d(t))return c(t);if(l(t))return u(t);if(_(t))return f(t);if(h(t))return new Date(t)}return n.call(g,t)}},getISOWeek:function(t){if(!t)return!1;t=this.date_part(new Date(t));var e=t.getDay();0===e&&(e=7);var i=new Date(t.valueOf());i.setDate(t.getDate()+(4-e));var n=i.getFullYear(),a=Math.round((i.getTime()-new Date(n,0,1).getTime())/864e5);return 1+Math.floor(a/7)},getUTCISOWeek:function(t){return this.getISOWeek(this.convert_to_utc(t))},convert_to_utc:function(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())}},g.locale={date:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},labels:{dhx_cal_today_button:"Today",day_tab:"Day",week_tab:"Week",month_tab:"Month",new_event:"New event",icon_save:"Save",icon_cancel:"Cancel",icon_details:"Details",icon_edit:"Edit",icon_delete:"Delete",confirm_closing:"",confirm_deleting:"Event will be deleted permanently, are you sure?",section_description:"Description",section_time:"Time period",full_day:"Full day",confirm_recurring:"Do you want to edit the whole set of repeated events?",section_recurring:"Repeat event",button_recurring:"Disabled",button_recurring_open:"Enabled",button_edit_series:"Edit series",button_edit_occurrence:"Edit occurrence",agenda_tab:"Agenda",date:"Date",description:"Description",year_tab:"Year",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Daily",repeat_radio_week:"Weekly",repeat_radio_month:"Monthly",repeat_radio_year:"Yearly",repeat_radio_day_type:"Every",repeat_text_day_count:"day",repeat_radio_day_type2:"Every workday",repeat_week:" Repeat every",repeat_text_week_count:"week next days:",repeat_radio_month_type:"Repeat",repeat_radio_month_start:"On",repeat_text_month_day:"day every",repeat_text_month_count:"month",repeat_text_month_count2_before:"every",repeat_text_month_count2_after:"month",repeat_year_label:"On",select_year_day2:"of",repeat_text_year_day:"day",select_year_month:"month",repeat_radio_end:"No end date",repeat_text_occurences_count:"occurrences",repeat_radio_end2:"After",repeat_radio_end3:"End by",month_for_recurring:["January","February","March","April","May","June","July","August","September","October","November","December"],day_for_recurring:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},g.config={default_date:"%j %M %Y",month_date:"%F %Y",load_date:"%Y-%m-%d",week_date:"%l",day_date:"%D, %F %j",hour_date:"%H:%i",month_day:"%d",date_format:"%Y-%m-%d %H:%i",api_date:"%d-%m-%Y %H:%i",parse_exact_format:!1,preserve_length:!0,time_step:5,start_on_monday:!0,first_hour:0,last_hour:24,readonly:!1,drag_resize:!0,drag_move:!0,drag_create:!0,drag_event_body:!0,dblclick_create:!0,edit_on_create:!0,details_on_create:!1,header:null,resize_month_events:!1,resize_month_timed:!1,responsive_lightbox:!1,rtl:!1,cascade_event_display:!1,cascade_event_count:4,cascade_event_margin:30,multi_day:!0,multi_day_height_limit:0,drag_lightbox:!0,preserve_scroll:!0,select:!0,server_utc:!1,touch:!0,touch_tip:!0,touch_drag:500,touch_swipe_dates:!1,quick_info_detached:!0,positive_closing:!1,drag_highlight:!0,limit_drag_out:!1,icons_edit:["icon_save","icon_cancel"],icons_select:["icon_details","icon_edit","icon_delete"],buttons_left:["dhx_save_btn","dhx_cancel_btn"],buttons_right:["dhx_delete_btn"],lightbox:{sections:[{name:"description",map_to:"text",type:"textarea",focus:!0},{name:"time",height:72,type:"time",map_to:"auto"}]},highlight_displayed_event:!0,left_border:!1,ajax_error:"alert",delay_render:0,timeline_swap_resize:!0,wai_aria_attributes:!0,wai_aria_application_role:!0},g.config.buttons_left.$inital=g.config.buttons_left.join(),g.config.buttons_right.$inital=g.config.buttons_right.join(),g._helpers={parseDate:function(t){return(g.templates.xml_date||g.templates.parse_date)(t)},formatDate:function(t){return(g.templates.xml_format||g.templates.format_date)(t)}},g.templates={},g.init_templates=function(){var t=g.locale.labels;t.dhx_save_btn=t.icon_save,t.dhx_cancel_btn=t.icon_cancel,t.dhx_delete_btn=t.icon_delete;var e=g.date.date_to_str,i=g.config;(function(t,e){for(var i in e)t[i]||(t[i]=e[i])})(g.templates,{day_date:e(i.default_date),month_date:e(i.month_date),week_date:function(t,e){return i.rtl?g.templates.day_date(g.date.add(e,-1,"day"))+" &ndash; "+g.templates.day_date(t):g.templates.day_date(t)+" &ndash; "+g.templates.day_date(g.date.add(e,-1,"day"))},day_scale_date:e(i.default_date),month_scale_date:e(i.week_date),week_scale_date:e(i.day_date),hour_scale:e(i.hour_date),time_picker:e(i.hour_date),event_date:e(i.hour_date),month_day:e(i.month_day),load_format:e(i.load_date),format_date:e(i.date_format,i.server_utc),parse_date:g.date.str_to_date(i.date_format,i.server_utc),api_date:g.date.str_to_date(i.api_date,!1,!1),event_header:function(t,e,i){return g.templates.event_date(t)+" - "+g.templates.event_date(e)},event_text:function(t,e,i){return i.text},event_class:function(t,e,i){return""},month_date_class:function(t){return""},week_date_class:function(t){return""},event_bar_date:function(t,e,i){return g.templates.event_date(t)+" "},event_bar_text:function(t,e,i){return i.text},month_events_link:function(t,e){return"<a>View more("+e+" events)</a>"},drag_marker_class:function(t,e,i){return""},drag_marker_content:function(t,e,i){return""},tooltip_date_format:g.date.date_to_str("%Y-%m-%d %H:%i"),tooltip_text:function(t,e,i){return"<b>Event:</b> "+i.text+"<br/><b>Start date:</b> "+g.templates.tooltip_date_format(t)+"<br/><b>End date:</b> "+g.templates.tooltip_date_format(e)}}),this.callEvent("onTemplatesReady",[])},g.uid=function(){return this._seed||(this._seed=(new Date).valueOf()),this._seed++},g._events={},g.clearAll=function(){this._events={},this._loaded={},this._edit_id=null,this._select_id=null,this._drag_id=null,this._drag_mode=null,this._drag_pos=null,this._new_event=null,this.clear_view(),this.callEvent("onClearAll",[])},g.addEvent=function(t,e,i,n,a){if(!arguments.length)return this.addEventNow();var r=t;1!=arguments.length&&(r=a||{},r.start_date=t,r.end_date=e,r.text=i,r.id=n),r.id=r.id||g.uid(),r.text=r.text||"","string"==typeof r.start_date&&(r.start_date=this.templates.api_date(r.start_date)),"string"==typeof r.end_date&&(r.end_date=this.templates.api_date(r.end_date));var s=6e4*(this.config.event_duration||this.config.time_step);r.start_date.valueOf()==r.end_date.valueOf()&&r.end_date.setTime(r.end_date.valueOf()+s),r._timed=this.isOneDayEvent(r);var o=!this._events[r.id];return this._events[r.id]=r,this.event_updated(r),this._loading||this.callEvent(o?"onEventAdded":"onEventChanged",[r.id,r]),r.id},g.deleteEvent=function(t,e){var i=this._events[t];(e||this.callEvent("onBeforeEventDelete",[t,i])&&this.callEvent("onConfirmedBeforeEventDelete",[t,i]))&&(i&&(this._select_id=null,delete this._events[t],this.event_updated(i),this._drag_id==i.id&&(this._drag_id=null,this._drag_mode=null,this._drag_pos=null)),this.callEvent("onEventDeleted",[t,i]))},g.getEvent=function(t){return this._events[t]},g.setEvent=function(t,e){e.id||(e.id=t),this._events[t]=e},g.for_rendered=function(t,e){for(var i=this._rendered.length-1;i>=0;i--)this._rendered[i].getAttribute("event_id")==t&&e(this._rendered[i],i)},g.changeEventId=function(t,e){if(t!=e){var i=this._events[t];i&&(i.id=e,this._events[e]=i,delete this._events[t]),this.for_rendered(t,function(t){t.setAttribute("event_id",e)}),this._select_id==t&&(this._select_id=e),this._edit_id==t&&(this._edit_id=e),this.callEvent("onEventIdChange",[t,e])}},function(){for(var t=["text","Text","start_date","StartDate","end_date","EndDate"],e=function(t){return function(e){return g.getEvent(e)[t]}},i=function(t){return function(e,i){var n=g.getEvent(e);n[t]=i,n._changed=!0,n._timed=this.isOneDayEvent(n),g.event_updated(n,!0)}},n=0;n<t.length;n+=2)g["getEvent"+t[n+1]]=e(t[n]),g["setEvent"+t[n+1]]=i(t[n])}(),g.event_updated=function(t,e){this.is_visible_events(t)?this.render_view_data():this.clear_event(t.id)},g.is_visible_events=function(t){if(t.start_date.valueOf()<this._max_date.valueOf()&&this._min_date.valueOf()<t.end_date.valueOf()){var e=t.start_date.getHours(),i=t.end_date.getHours()+t.end_date.getMinutes()/60,n=this.config.last_hour,a=this.config.first_hour;return!(!this._table_view&&(i>n||i<a)&&(e>=n||e<a))||!!((t.end_date.valueOf()-t.start_date.valueOf())/36e5>24-(this.config.last_hour-this.config.first_hour)||e<n&&i>=a)}return!1},g.isOneDayEvent=function(t){var e=new Date(t.end_date.valueOf()-1);return t.start_date.getFullYear()===e.getFullYear()&&t.start_date.getMonth()===e.getMonth()&&t.start_date.getDate()===e.getDate()&&t.end_date.valueOf()-t.start_date.valueOf()<864e5},g.get_visible_events=function(t){var e=[];for(var i in this._events)this.is_visible_events(this._events[i])&&(t&&!this._events[i]._timed||this.filter_event(i,this._events[i])&&e.push(this._events[i]));return e},g.filter_event=function(t,e){var i=this["filter_"+this._mode];return!i||i(t,e)},g._is_main_area_event=function(t){return!!t._timed},g.render_view_data=function(t,e){var i=!1;if(!t){if(i=!0,this._not_render)return void(this._render_wait=!0);this._render_wait=!1,this.clear_view(),t=this.get_visible_events(!(this._table_view||this.config.multi_day))}for(var n=0,a=t.length;n<a;n++)this._recalculate_timed(t[n]);if(this.config.multi_day&&!this._table_view){for(var r=[],s=[],n=0;n<t.length;n++)this._is_main_area_event(t[n])?r.push(t[n]):s.push(t[n]);if(!this._els.dhx_multi_day){var o=g._commonErrorMessages.unknownView(this._mode);throw new Error(o)}this._rendered_location=this._els.dhx_multi_day[0],this._table_view=!0,this.render_data(s,e),this._table_view=!1,this._rendered_location=this._els.dhx_cal_data[0],this._table_view=!1,this.render_data(r,e)}else{var d=document.createDocumentFragment(),l=this._els.dhx_cal_data[0];this._rendered_location=d,this.render_data(t,e),l.appendChild(d),this._rendered_location=l}i&&this.callEvent("onDataRender",[])},g._view_month_day=function(t){var e=g.getActionData(t).date;g.callEvent("onViewMoreClick",[e])&&g.setCurrentView(e,"day")},g._render_month_link=function(t){for(var e=this._rendered_location,i=this._lame_clone(t),n=t._sday;n<t._eday;n++){i._sday=n,i._eday=n+1;var a=g.date,r=g._min_date;r=a.add(r,i._sweek,"week"),r=a.add(r,i._sday,"day");var s=g.getEvents(r,a.add(r,1,"day")).length,o=this._get_event_bar_pos(i),d=o.x2-o.x,l=document.createElement("div");l.onclick=function(t){g._view_month_day(t||event)},l.className="dhx_month_link",l.style.top=o.y+"px",l.style.left=o.x+"px",l.style.width=d+"px",l.innerHTML=g.templates.month_events_link(r,s),this._rendered.push(l),e.appendChild(l)}},g._recalculate_timed=function(t){if(t){var e;e="object"!=typeof t?this._events[t]:t,e&&(e._timed=g.isOneDayEvent(e))}},g.attachEvent("onEventChanged",g._recalculate_timed),g.attachEvent("onEventAdded",g._recalculate_timed),g.render_data=function(t,e){t=this._pre_render_events(t,e);for(var i={},n=0;n<t.length;n++)if(this._table_view)if("month"!=g._mode)this.render_event_bar(t[n]);else{var a=g.config.max_month_events;a!==1*a||t[n]._sorder<a?this.render_event_bar(t[n]):void 0!==a&&t[n]._sorder==a&&g._render_month_link(t[n])}else{var r=t[n],s=g.locate_holder(r._sday);if(!s)continue;i[r._sday]||(i[r._sday]={real:s,buffer:document.createDocumentFragment(),width:s.clientWidth});var o=i[r._sday];this.render_event(r,o.buffer,o.width)}for(var n in i){var o=i[n];o.real&&o.buffer&&o.real.appendChild(o.buffer)}},g._get_first_visible_cell=function(t){for(var e=0;e<t.length;e++)if(-1==(t[e].className||"").indexOf("dhx_scale_ignore"))return t[e];return t[0]},g._pre_render_events=function(t,e){var i=this.xy.bar_height,n=this._colsS.heights,a=this._colsS.heights=[0,0,0,0,0,0,0],r=this._els.dhx_cal_data[0];if(t=this._table_view?this._pre_render_events_table(t,e):this._pre_render_events_line(t,e),this._table_view)if(e)this._colsS.heights=n;else{var s=r.firstChild;if(s.rows){for(var o=0;o<s.rows.length;o++){a[o]++;var d=s.rows[o].cells,l=this._colsS.height-this.xy.month_head_height;if(a[o]*i>l){var _=l;1*this.config.max_month_events!==this.config.max_month_events||a[o]<=this.config.max_month_events?_=a[o]*i:(this.config.max_month_events+1)*i>l&&(_=(this.config.max_month_events+1)*i);for(var h=0;h<d.length;h++)d[h].childNodes[1].style.height=_+"px"}a[o]=(a[o-1]||0)+g._get_first_visible_cell(d).offsetHeight}if(a.unshift(0),s.parentNode.offsetHeight<s.parentNode.scrollHeight&&!g._colsS.scroll_fix&&g.xy.scroll_width){var c=g._colsS,u=c[c.col_length],f=c.heights.slice();u-=g.xy.scroll_width||0,this._calc_scale_sizes(u,this._min_date,this._max_date),g._colsS.heights=f,this.set_xy(this._els.dhx_cal_header[0],u,this.xy.scale_height),g._render_scales(this._els.dhx_cal_header[0]),g._render_month_scale(this._els.dhx_cal_data[0],this._get_timeunit_start(),this._min_date),c.scroll_fix=!0}}else if(t.length||"visible"!=this._els.dhx_multi_day[0].style.visibility||(a[0]=-1),t.length||-1==a[0]){var v=(s.parentNode.childNodes,(a[0]+1)*i+1),m=v,p=v+"px";this.config.multi_day_height_limit&&(m=Math.min(v,this.config.multi_day_height_limit),p=m+"px"),r.style.top=this._els.dhx_cal_navline[0].offsetHeight+this._els.dhx_cal_header[0].offsetHeight+m+"px",r.style.height=this._obj.offsetHeight-parseInt(r.style.top,10)-(this.xy.margin_top||0)+"px";var x=this._els.dhx_multi_day[0];x.style.height=p,x.style.visibility=-1==a[0]?"hidden":"visible";var b=this._els.dhx_multi_day[1];b.style.height=p,b.style.visibility=-1==a[0]?"hidden":"visible",b.className=a[0]?"dhx_multi_day_icon":"dhx_multi_day_icon_small",this._dy_shift=(a[0]+1)*i,this.config.multi_day_height_limit&&(this._dy_shift=Math.min(this.config.multi_day_height_limit,this._dy_shift)),a[0]=0,m!=v&&(r.style.top=parseInt(r.style.top)+2+"px",x.style.overflowY="auto",b.style.position="fixed",b.style.top="",b.style.left="")}}return t},g._get_event_sday=function(t){var e=this.date.day_start(new Date(t.start_date));return Math.round((e.valueOf()-this._min_date.valueOf())/864e5)},g._get_event_mapped_end_date=function(t){var e=t.end_date;if(this.config.separate_short_events){var i=(t.end_date-t.start_date)/6e4;i<this._min_mapped_duration&&(e=this.date.add(e,this._min_mapped_duration-i,"minute"))}return e},g._pre_render_events_line=function(t,e){t.sort(function(t,e){return t.start_date.valueOf()==e.start_date.valueOf()?t.id>e.id?1:-1:t.start_date>e.start_date?1:-1});var i=[],n=[];this._min_mapped_duration=Math.ceil(60*this.xy.min_event_height/this.config.hour_size_px);for(var a=0;a<t.length;a++){var r=t[a],s=r.start_date,o=r.end_date,d=s.getHours(),l=o.getHours();if(r._sday=this._get_event_sday(r),this._ignores[r._sday])t.splice(a,1),a--;else{if(i[r._sday]||(i[r._sday]=[]),!e){r._inner=!1;for(var _=i[r._sday];_.length;){var h=_[_.length-1],c=this._get_event_mapped_end_date(h);if(!(c.valueOf()<=r.start_date.valueOf()))break;_.splice(_.length-1,1)}for(var u=_.length,f=!1,g=0;g<_.length;g++){var h=_[g],c=this._get_event_mapped_end_date(h);if(c.valueOf()<=r.start_date.valueOf()){f=!0,r._sorder=h._sorder,u=g,r._inner=!0;break}}if(_.length&&(_[_.length-1]._inner=!0),!f)if(_.length)if(_.length<=_[_.length-1]._sorder){if(_[_.length-1]._sorder)for(g=0;g<_.length;g++){for(var v=!1,m=0;m<_.length;m++)if(_[m]._sorder==g){v=!0;break}if(!v){r._sorder=g;break}}else r._sorder=0;r._inner=!0}else{var p=_[0]._sorder;for(g=1;g<_.length;g++)_[g]._sorder>p&&(p=_[g]._sorder);r._sorder=p+1,r._inner=!1}else r._sorder=0;_.splice(u,u==_.length?0:1,r),_.length>(_.max_count||0)?(_.max_count=_.length,r._count=_.length):r._count=r._count?r._count:1}(d<this.config.first_hour||l>=this.config.last_hour)&&(n.push(r),t[a]=r=this._copy_event(r),d<this.config.first_hour&&(r.start_date.setHours(this.config.first_hour),r.start_date.setMinutes(0)),l>=this.config.last_hour&&(r.end_date.setMinutes(0),r.end_date.setHours(this.config.last_hour)),r.start_date>r.end_date||d==this.config.last_hour)&&(t.splice(a,1),a--)}}if(!e){for(var a=0;a<t.length;a++)t[a]._count=i[t[a]._sday].max_count;for(var a=0;a<n.length;a++)n[a]._count=i[n[a]._sday].max_count}return t},g._time_order=function(t){t.sort(function(t,e){return t.start_date.valueOf()==e.start_date.valueOf()?t._timed&&!e._timed?1:!t._timed&&e._timed?-1:t.id>e.id?1:-1:t.start_date>e.start_date?1:-1})},g._is_any_multiday_cell_visible=function(t,e,i){var n=this._cols.length,a=!1,r=t,s=!0,o=new Date(e);for(g.date.day_start(new Date(e)).valueOf()!=e.valueOf()&&(o=g.date.day_start(o),o=g.date.add(o,1,"day"));r<o;){s=!1;var d=this.locate_holder_day(r,!1,i),l=d%n;if(!this._ignores[l]){a=!0;break}r=g.date.add(r,1,"day")}return s||a},g._pre_render_events_table=function(t,e){this._time_order(t);for(var i,n=[],a=[[],[],[],[],[],[],[]],r=this._colsS.heights,s=this._cols.length,o={},d=0;d<t.length;d++){var l=t[d],_=l.id;o[_]||(o[_]={first_chunk:!0,last_chunk:!0});var h=o[_],c=i||l.start_date,u=l.end_date;c<this._min_date&&(h.first_chunk=!1,c=this._min_date),u>this._max_date&&(h.last_chunk=!1,u=this._max_date);var f=this.locate_holder_day(c,!1,l);if(l._sday=f%s,!this._ignores[l._sday]||!l._timed){var v=this.locate_holder_day(u,!0,l)||s;l._eday=v%s||s,l._length=v-f,l._sweek=Math.floor((this._correct_shift(c.valueOf(),1)-this._min_date.valueOf())/(864e5*s));if(g._is_any_multiday_cell_visible(c,u,l)){var m,p=a[l._sweek];for(m=0;m<p.length&&!(p[m]._eday<=l._sday);m++);if(l._sorder&&e||(l._sorder=m),l._sday+l._length<=s)i=null,n.push(l),p[m]=l,r[l._sweek]=p.length-1,l._first_chunk=h.first_chunk,l._last_chunk=h.last_chunk;else{var x=this._copy_event(l);x.id=l.id,x._length=s-l._sday,x._eday=s,x._sday=l._sday,x._sweek=l._sweek,x._sorder=l._sorder,x.end_date=this.date.add(c,x._length,"day"),x._first_chunk=h.first_chunk,h.first_chunk&&(h.first_chunk=!1),n.push(x),p[m]=x,i=x.end_date,r[l._sweek]=p.length-1,d--}}}}return n},g._copy_dummy=function(){var t=new Date(this.start_date),e=new Date(this.end_date);this.start_date=t,this.end_date=e},g._copy_event=function(t){return this._copy_dummy.prototype=t,new this._copy_dummy},g._rendered=[],g.clear_view=function(){for(var t=0;t<this._rendered.length;t++){var e=this._rendered[t];e.parentNode&&e.parentNode.removeChild(e)}this._rendered=[]},g.updateEvent=function(t){var e=this.getEvent(t);this.clear_event(t),e&&this.is_visible_events(e)&&this.filter_event(t,e)&&(this._table_view||this.config.multi_day||e._timed)&&(this.config.update_render?this.render_view_data():"month"!=this.getState().mode||this.getState().drag_id||this.isOneDayEvent(e)?this.render_view_data([e],!0):this.render_view_data())},g.clear_event=function(t){this.for_rendered(t,function(t,e){t.parentNode&&t.parentNode.removeChild(t),g._rendered.splice(e,1)})},g._y_from_date=function(t){var e=60*t.getHours()+t.getMinutes();return Math.round((60*e*1e3-60*this.config.first_hour*60*1e3)*this.config.hour_size_px/36e5)%(24*this.config.hour_size_px)},g._calc_event_y=function(t,e){e=e||0;var i=60*t.start_date.getHours()+t.start_date.getMinutes(),n=60*t.end_date.getHours()+t.end_date.getMinutes()||60*g.config.last_hour;return{top:this._y_from_date(t.start_date),height:Math.max(e,(n-i)*this.config.hour_size_px/60)}},g.render_event=function(t,e,i){var n=g.xy.menu_width,a=this.config.use_select_menu_space?0:n;if(!(t._sday<0)){var r=g.locate_holder(t._sday);if(r){e=e||r;var s=this._calc_event_y(t,g.xy.min_event_height),o=s.top,d=s.height,l=t._count||1,_=t._sorder||0;i=i||r.clientWidth;var h=Math.floor((i-a)/l),c=_*h+1;if(t._inner||(h*=l-_),this.config.cascade_event_display){var u=this.config.cascade_event_count,f=this.config.cascade_event_margin;c=_%u*f;var v=t._inner?(l-_-1)%u*f/2:0;h=Math.floor(i-a-c-v)}var m=this._render_v_bar(t,a+c,o,h,d,t._text_style,g.templates.event_header(t.start_date,t.end_date,t),g.templates.event_text(t.start_date,t.end_date,t));this._waiAria.eventAttr(t,m),this._rendered.push(m),e.appendChild(m);if(c=c+parseInt(this.config.rtl?r.style.right:r.style.left,10)+a,this._edit_id==t.id){m.style.zIndex=1,h=Math.max(h-4,g.xy.editor_width),m=document.createElement("div"),m.setAttribute("event_id",t.id),this._waiAria.eventAttr(t,m),m.className="dhx_cal_event dhx_cal_editor",this.config.rtl&&c++,this.set_xy(m,h,d-20,c,o+(g.xy.event_header_height||14)),t.color&&(m.style.backgroundColor=t.color);var p=g.templates.event_class(t.start_date,t.end_date,t);p&&(m.className+=" "+p);var x=document.createElement("div");this.set_xy(x,h-6,d-26),x.style.cssText+=";margin:2px 2px 2px 2px;overflow:hidden;",m.appendChild(x),this._els.dhx_cal_data[0].appendChild(m),this._rendered.push(m),x.innerHTML="<textarea class='dhx_cal_editor'>"+t.text+"</textarea>",this._editor=x.querySelector("textarea"),this._quirks7&&(this._editor.style.height=d-12+"px"),this._editor.onkeydown=function(t){if((t||event).shiftKey)return!0;var e=(t||event).keyCode;e==g.keys.edit_save&&g.editStop(!0),e==g.keys.edit_cancel&&g.editStop(!1),e!=g.keys.edit_save&&e!=g.keys.edit_cancel||t.preventDefault&&t.preventDefault()},this._editor.onselectstart=function(t){return(t||event).cancelBubble=!0,!0},g._focus(this._editor,!0),this._els.dhx_cal_data[0].scrollLeft=0}if(0!==this.xy.menu_width&&this._select_id==t.id){this.config.cascade_event_display&&this._drag_mode&&(m.style.zIndex=1);for(var b,y=this.config["icons_"+(this._edit_id==t.id?"edit":"select")],w="",D=t.color?"background-color: "+t.color+";":"",E=t.textColor?"color: "+t.textColor+";":"",A=0;A<y.length;A++)b=this._waiAria.eventMenuAttrString(y[A]),w+="<div class='dhx_menu_icon "+y[A]+"' style='"+D+E+"' title='"+this.locale.labels[y[A]]+"'"+b+"></div>";var S=this._render_v_bar(t,c-n+1,o,n,20*y.length+26-2,"","<div style='"+D+E+"' class='dhx_menu_head'></div>",w,!0);S.style.left=c-n+1,this._els.dhx_cal_data[0].appendChild(S),this._rendered.push(S)}this.config.drag_highlight&&this._drag_id==t.id&&this.highlightEventPosition(t)}}},g._render_v_bar=function(t,e,i,n,a,r,s,o,d){var l=document.createElement("div"),_=t.id,h=d?"dhx_cal_event dhx_cal_select_menu":"dhx_cal_event",c=g.getState();c.drag_id==t.id&&(h+=" dhx_cal_event_drag"),c.select_id==t.id&&(h+=" dhx_cal_event_selected");var u=g.templates.event_class(t.start_date,t.end_date,t);u&&(h=h+" "+u),this.config.cascade_event_display&&(h+=" dhx_cal_event_cascade");var f=t.color?"background-color:"+t.color+";":"",v=t.textColor?"color:"+t.textColor+";":"",m=g._border_box_events(),p=n-2,x=m?p:n-4,b=m?p:n-6,y=m?p:n-(this._quirks?4:14),w=m?p-2:n-8,D=m?a-this.xy.event_header_height-1:a-(this._quirks?20:30)+1,E='<div event_id="'+_+'" class="'+h+'" style="position:absolute; top:'+i+"px; "+(this.config.rtl?"right:":"left:")+e+"px; width:"+x+"px; height:"+a+"px;"+(r||"")+'"></div>';l.innerHTML=E;var A=l.cloneNode(!0).firstChild;if(!d&&g.renderEvent(A,t,n,a,s,o))return A;A=l.firstChild;var S='<div class="dhx_event_move dhx_header" style=" width:'+b+"px;"+f+'" >&nbsp;</div>';S+='<div class="dhx_event_move dhx_title" style="'+f+v+'">'+s+"</div>",S+='<div class="dhx_body" style=" width:'+y+"px; height:"+D+"px;"+f+v+'">'+o+"</div>";var k="dhx_event_resize dhx_footer";return(d||!1===t._drag_resize)&&(k="dhx_resize_denied "+k),S+='<div class="'+k+'" style=" width:'+w+"px;"+(d?" margin-top:-1px;":"")+f+v+'" ></div>',A.innerHTML=S,A},g.renderEvent=function(){return!1},g.locate_holder=function(t){return"day"==this._mode?this._els.dhx_cal_data[0].firstChild:this._els.dhx_cal_data[0].childNodes[t]},g.locate_holder_day=function(t,e){var i=Math.floor((this._correct_shift(t,1)-this._min_date)/864e5);return e&&this.date.time_part(t)&&i++,i},g._get_dnd_order=function(t,e,i){if(!this._drag_event)return t;this._drag_event._orig_sorder?t=this._drag_event._orig_sorder:this._drag_event._orig_sorder=t;for(var n=e*t;n+e>i;)t--,n-=e;return t=Math.max(t,0)},g._get_event_bar_pos=function(t){var e=this.config.rtl,i=this._colsS,n=i[t._sday],a=i[t._eday];e&&(n=i[i.col_length]-i[t._eday]+i[0],a=i[i.col_length]-i[t._sday]+i[0]),a==n&&(a=i[t._eday+1]);var r=this.xy.bar_height,s=t._sorder;if(t.id==this._drag_id){var o=i.heights[t._sweek+1]-i.heights[t._sweek]-this.xy.month_head_height;s=g._get_dnd_order(s,r,o)}var d=s*r;return{x:n,x2:a,y:i.heights[t._sweek]+(i.height?this.xy.month_scale_height+2:2)+d}},g.render_event_bar=function(t){var e=this._rendered_location,i=this._get_event_bar_pos(t),n=i.y,a=i.x,r=i.x2,s="";if(r){var o=g.config.resize_month_events&&"month"==this._mode&&(!t._timed||g.config.resize_month_timed),d=document.createElement("div"),l=t.hasOwnProperty("_first_chunk")&&t._first_chunk,_=t.hasOwnProperty("_last_chunk")&&t._last_chunk,h=o&&(t._timed||l),c=o&&(t._timed||_),u=!0,f="dhx_cal_event_clear";t._timed&&!o||(u=!1,f="dhx_cal_event_line"),l&&(f+=" dhx_cal_event_line_start"),_&&(f+=" dhx_cal_event_line_end"),h&&(s+="<div class='dhx_event_resize dhx_event_resize_start'></div>"),c&&(s+="<div class='dhx_event_resize dhx_event_resize_end'></div>");var v=g.templates.event_class(t.start_date,t.end_date,t);v&&(f+=" "+v);var m=t.color?"background:"+t.color+";":"",p=t.textColor?"color:"+t.textColor+";":"",x=["position:absolute","top:"+n+"px","left:"+a+"px","width:"+(r-a-3-(u?1:0))+"px",p,m,t._text_style||""].join(";"),b="<div event_id='"+t.id+"' class='"+f+"' style='"+x+"'"+this._waiAria.eventBarAttrString(t)+">";o&&(b+=s),"month"==g.getState().mode&&(t=g.getEvent(t.id)),t._timed&&(b+=g.templates.event_bar_date(t.start_date,t.end_date,t)),b+=g.templates.event_bar_text(t.start_date,t.end_date,t)+"</div>",b+="</div>",d.innerHTML=b,this._rendered.push(d.firstChild),e.appendChild(d.firstChild)}},g._locate_event=function(t){for(var e=null;t&&!e&&t.getAttribute;)e=t.getAttribute("event_id"),t=t.parentNode;return e},g._locate_css=function(t,e,i){void 0===i&&(i=!0);for(var n=t.target||t.srcElement,a="";n;){if(a=g._getClassName(n)){var r=a.indexOf(e);if(r>=0){if(!i)return n;var s=0===r||!g._trim(a.charAt(r-1)),o=r+e.length>=a.length||!g._trim(a.charAt(r+e.length));if(s&&o)return n}}n=n.parentNode}return null},g.edit=function(t){this._edit_id!=t&&(this.editStop(!1,t),this._edit_id=t,this.updateEvent(t))},g.editStop=function(t,e){if(!e||this._edit_id!=e){var i=this.getEvent(this._edit_id);i&&(t&&(i.text=this._editor.value),this._edit_id=null,this._editor=null,this.updateEvent(i.id),this._edit_stop_event(i,t))}},g._edit_stop_event=function(t,e){this._new_event?(e?this.callEvent("onEventAdded",[t.id,t]):t&&this.deleteEvent(t.id,!0),this._new_event=null):e&&this.callEvent("onEventChanged",[t.id,t])},g.getEvents=function(t,e){var i=[];for(var n in this._events){var a=this._events[n];a&&(!t&&!e||a.start_date<e&&a.end_date>t)&&i.push(a)}return i},g.getRenderedEvent=function(t){if(t){for(var e=g._rendered,i=0;i<e.length;i++){var n=e[i];if(n.getAttribute("event_id")==t)return n}return null}},g.showEvent=function(t,e){var i;t&&"object"==typeof t&&(e=t.mode,i=t.section,t=t.section);var n="number"==typeof t||"string"==typeof t?g.getEvent(t):t;if(e=e||g._mode,n&&(!this.checkEvent("onBeforeEventDisplay")||this.callEvent("onBeforeEventDisplay",[n,e]))){var a=g.config.scroll_hour;g.config.scroll_hour=n.start_date.getHours();var r=g.config.preserve_scroll;g.config.preserve_scroll=!1;var s=n.color,o=n.textColor;if(g.config.highlight_displayed_event&&(n.color=g.config.displayed_event_color,n.textColor=g.config.displayed_event_text_color),g.setCurrentView(new Date(n.start_date),e),n.color=s,n.textColor=o,g.config.scroll_hour=a,g.config.preserve_scroll=r,g.matrix&&g.matrix[e]){var d=g.getView(),l=d.y_property,_=g.getEvent(n.id);if(_){if(!i){var i=_[l];Array.isArray(i)?i=i[0]:"string"==typeof i&&g.config.section_delimiter&&i.indexOf(g.config.section_delimiter)>-1&&(i=i.split(g.config.section_delimiter)[0])}var h=d.posFromSection(i),c=d.posFromDate(_.start_date),u=g.$container.querySelector(".dhx_timeline_data_wrapper");c-=(u.offsetWidth-d.dx)/2,h=h-u.offsetHeight/2+d.dy/2,d.scrollTo({left:c,top:h})}}g.callEvent("onAfterEventDisplay",[n,e])}},g._append_drag_marker=function(t){if(!t.parentNode){var e=g._els.dhx_cal_data[0],i=e.lastChild,n=g._getClassName(i);n.indexOf("dhx_scale_holder")<0&&i.previousSibling&&(i=i.previousSibling),n=g._getClassName(i),i&&0===n.indexOf("dhx_scale_holder")&&i.appendChild(t)}},g._update_marker_position=function(t,e){var i=g._calc_event_y(e,0);t.style.top=i.top+"px",t.style.height=i.height+"px"},g.highlightEventPosition=function(t){var e=document.createElement("div");e.setAttribute("event_id",t.id),this._rendered.push(e),this._update_marker_position(e,t);var i=this.templates.drag_marker_class(t.start_date,t.end_date,t),n=this.templates.drag_marker_content(t.start_date,t.end_date,t);e.className="dhx_drag_marker",i&&(e.className+=" "+i),n&&(e.innerHTML=n),this._append_drag_marker(e)},g._loaded={},g._load=function(t,e){function i(t){g.on_load(t),g.callEvent("onLoadEnd",[])}if(t=t||this._load_url){t+=(-1==t.indexOf("?")?"?":"&")+"timeshift="+(new Date).getTimezoneOffset(),this.config.prevent_cache&&(t+="&uid="+this.uid());var n;if(e=e||this._date,this._load_mode){var a=this.templates.load_format;for(e=this.date[this._load_mode+"_start"](new Date(e.valueOf()));e>this._min_date;)e=this.date.add(e,-1,this._load_mode);n=e;for(var r=!0;n<this._max_date;)n=this.date.add(n,1,this._load_mode),this._loaded[a(e)]&&r?e=this.date.add(e,1,this._load_mode):r=!1;var s=n;do{n=s,s=this.date.add(n,-1,this._load_mode)}while(s>e&&this._loaded[a(s)]);if(n<=e)return!1;for(g.$ajax.get(t+"&from="+a(e)+"&to="+a(n),i);e<n;)this._loaded[a(e)]=!0,e=this.date.add(e,1,this._load_mode)}else g.$ajax.get(t,i);return this.callEvent("onXLS",[]),this.callEvent("onLoadStart",[]),!0}},g._parsers={},g._parsers.xml={canParse:function(t,e){if(e.responseXML&&e.responseXML.firstChild)return!0;try{var i=g.$ajax.parse(e.responseText),n=g.$ajax.xmltop("data",i);if(n&&"data"===n.tagName)return!0}catch(t){}return!1},parse:function(t){var e;if(t.xmlDoc.responseXML||(t.xmlDoc.responseXML=g.$ajax.parse(t.xmlDoc.responseText)),e=g.$ajax.xmltop("data",t.xmlDoc),"data"!=e.tagName)return null;var i=e.getAttribute("dhx_security");i&&(window.dhtmlx&&(dhtmlx.security_key=i),g.security_key=i);for(var n=g.$ajax.xpath("//coll_options",t.xmlDoc),a=0;a<n.length;a++){var r=n[a].getAttribute("for"),s=g.serverList[r];s||(g.serverList[r]=s=[]),s.splice(0,s.length);for(var o=g.$ajax.xpath(".//item",n[a]),d=0;d<o.length;d++){for(var l=o[d],_=l.attributes,h={key:o[d].getAttribute("value"),label:o[d].getAttribute("label")},c=0;c<_.length;c++){var u=_[c];"value"!=u.nodeName&&"label"!=u.nodeName&&(h[u.nodeName]=u.nodeValue)}s.push(h)}}n.length&&g.callEvent("onOptionsLoad",[]);for(var f=g.$ajax.xpath("//userdata",t.xmlDoc),a=0;a<f.length;a++){var v=g._xmlNodeToJSON(f[a]);g._userdata[v.name]=v.text}var m=[];e=g.$ajax.xpath("//event",t.xmlDoc);for(var a=0;a<e.length;a++){var p=m[a]=g._xmlNodeToJSON(e[a]);g._init_event(p)}return m}},g.json=g._parsers.json={canParse:function(t){if(t&&"object"==typeof t)return!0;if("string"==typeof t)try{var e=JSON.parse(t);return"[object Object]"===Object.prototype.toString.call(e)||"[object Array]"===Object.prototype.toString.call(e)}catch(t){return!1}return!1},parse:function(t){var e=[];"string"==typeof t&&(t=JSON.parse(t)),e="[object Array]"===Object.prototype.toString.call(t)?t:t?t.data:[],e=e||[],t.dhx_security&&(window.dhtmlx&&(dhtmlx.security_key=t.dhx_security),g.security_key=t.dhx_security);var i=t&&t.collections?t.collections:{},n=!1;for(var a in i)if(i.hasOwnProperty(a)){n=!0;var r=i[a],s=g.serverList[a];s||(g.serverList[a]=s=[]),s.splice(0,s.length);for(var o=0;o<r.length;o++){var d=r[o],l={key:d.value,label:d.label};for(var _ in d)if(d.hasOwnProperty(_)){if("value"==_||"label"==_)continue;l[_]=d[_]}s.push(l)}}n&&g.callEvent("onOptionsLoad",[]);for(var h=[],c=0;c<e.length;c++){var u=e[c];g._init_event(u),h.push(u)}return h}},g.ical=g._parsers.ical={canParse:function(t){return"string"==typeof t&&new RegExp("^BEGIN:VCALENDAR").test(t)},parse:function(t){var e=t.match(RegExp(this.c_start+"[^\f]*"+this.c_end,""));if(e.length){e[0]=e[0].replace(/[\r\n]+ /g,""),e[0]=e[0].replace(/[\r\n]+(?=[a-z \t])/g," "),e[0]=e[0].replace(/\;[^:\r\n]*:/g,":");for(var i,n=[],a=RegExp("(?:"+this.e_start+")([^\f]*?)(?:"+this.e_end+")","g");null!==(i=a.exec(e));){for(var r,s={},o=/[^\r\n]+[\r\n]+/g;null!==(r=o.exec(i[1]));)this.parse_param(r.toString(),s);s.uid&&!s.id&&(s.id=s.uid),n.push(s)}return n}},parse_param:function(t,e){var i=t.indexOf(":");if(-1!=i){var n=t.substr(0,i).toLowerCase(),a=t.substr(i+1).replace(/\\\,/g,",").replace(/[\r\n]+$/,"");"summary"==n?n="text":"dtstart"==n?(n="start_date",a=this.parse_date(a,0,0)):"dtend"==n&&(n="end_date",a=this.parse_date(a,0,0)),e[n]=a}},parse_date:function(t,e,i){var n=t.split("T"),a=!1;n[1]&&(e=n[1].substr(0,2),i=n[1].substr(2,2),a=!("Z"!=n[1][6]));var r=n[0].substr(0,4),s=parseInt(n[0].substr(4,2),10)-1,o=n[0].substr(6,2);return g.config.server_utc||a?new Date(Date.UTC(r,s,o,e,i)):new Date(r,s,o,e,i)},c_start:"BEGIN:VCALENDAR",e_start:"BEGIN:VEVENT",e_end:"END:VEVENT",c_end:"END:VCALENDAR"},g.on_load=function(t){this.callEvent("onBeforeParse",[]);var e,i=!1,n=!1;for(var a in this._parsers){var r=this._parsers[a];if(r.canParse(t.xmlDoc.responseText,t.xmlDoc)){try{var s=t.xmlDoc.responseText;"xml"===a&&(s=t),e=r.parse(s),e||(i=!0)}catch(t){i=!0}n=!0;break}}if(!n)if(this._process&&this[this._process])try{e=this[this._process].parse(t.xmlDoc.responseText)}catch(t){i=!0}else i=!0;(i||t.xmlDoc.status&&t.xmlDoc.status>=400)&&(this.callEvent("onLoadError",[t.xmlDoc]),e=[]),this._process_loading(e),this.callEvent("onXLE",[]),this.callEvent("onParse",[])},g._process_loading=function(t){this._loading=!0,this._not_render=!0;for(var e=0;e<t.length;e++)this.callEvent("onEventLoading",[t[e]])&&this.addEvent(t[e]);this._not_render=!1,this._render_wait&&this.render_view_data(),this._loading=!1,this._after_call&&this._after_call(),this._after_call=null},g._init_event=function(t){t.text=t.text||t._tagvalue||"",t.start_date=g._init_date(t.start_date),t.end_date=g._init_date(t.end_date)},g._init_date=function(t){return t?"string"==typeof t?g._helpers.parseDate(t):new Date(t):null},g.json={},g.json.parse=function(t){var e=[];"string"==typeof t&&(t=JSON.parse(t)),e="[object Array]"===Object.prototype.toString.call(t)?t:t?t.data:[],e=e||[],t.dhx_security&&(window.dhtmlx&&(dhtmlx.security_key=t.dhx_security),g.security_key=t.dhx_security);var i=t&&t.collections?t.collections:{},n=!1;for(var a in i)if(i.hasOwnProperty(a)){n=!0;var r=i[a],s=g.serverList[a];s||(g.serverList[a]=s=[]),s.splice(0,s.length);for(var o=0;o<r.length;o++){var d=r[o],l={key:d.value,label:d.label};for(var _ in d)if(d.hasOwnProperty(_)){if("value"==_||"label"==_)continue;l[_]=d[_]}s.push(l)}}n&&g.callEvent("onOptionsLoad",[]);for(var h=[],c=0;c<e.length;c++){var u=e[c];g._init_event(u),h.push(u)}return h},g.parse=function(t,e){this._process=e,this.on_load({xmlDoc:{responseText:t}})},g.load=function(t,e){"string"==typeof e&&(this._process=e,e=arguments[2]),this._load_url=t,this._after_call=e,this._load(t,this._date)},g.setLoadMode=function(t){"all"==t&&(t=""),this._load_mode=t},g.serverList=function(t,e){return e?(this.serverList[t]=e.slice(0),this.serverList[t]):(this.serverList[t]=this.serverList[t]||[],this.serverList[t])},g._userdata={},g._xmlNodeToJSON=function(t){for(var e={},i=0;i<t.attributes.length;i++)e[t.attributes[i].name]=t.attributes[i].value;for(var i=0;i<t.childNodes.length;i++){var n=t.childNodes[i];1==n.nodeType&&(e[n.tagName]=n.firstChild?n.firstChild.nodeValue:"")}return e.text||(e.text=t.firstChild?t.firstChild.nodeValue:""),e},g.attachEvent("onXLS",function(){if(!0===this.config.show_loading){var t;t=this.config.show_loading=document.createElement("div"),t.className="dhx_loading",t.style.left=Math.round((this._x-128)/2)+"px",t.style.top=Math.round((this._y-15)/2)+"px",this._obj.appendChild(t)}}),g.attachEvent("onXLE",function(){var t=this.config.show_loading;t&&"object"==typeof t&&(t.parentNode&&t.parentNode.removeChild(t),this.config.show_loading=!0)}),g._lightbox_controls={},g.formSection=function(t){var e=this.config.lightbox.sections,i=0;for(i;i<e.length&&e[i].name!=t;i++);var n=e[i];g._lightbox||g.getLightbox();var a=document.getElementById(n.id),r=a.nextSibling,s={section:n,header:a,node:r,getValue:function(t){return g.form_blocks[n.type].get_value(r,t||{},n)},setValue:function(t,e){return g.form_blocks[n.type].set_value(r,t,e||{},n)}},o=g._lightbox_controls["get_"+n.type+"_control"];return o?o(s):s},g._lightbox_controls.get_template_control=function(t){return t.control=t.node,t},g._lightbox_controls.get_select_control=function(t){return t.control=t.node.getElementsByTagName("select")[0],t},g._lightbox_controls.get_textarea_control=function(t){return t.control=t.node.getElementsByTagName("textarea")[0],t},g._lightbox_controls.get_time_control=function(t){return t.control=t.node.getElementsByTagName("select"),t},g._lightbox_controls.defaults={template:{height:30},textarea:{height:200},select:{height:23},time:{height:20}},g.form_blocks={template:{render:function(t){var e=g._lightbox_controls.defaults.template,i=e?e.height:30;return"<div class='dhx_cal_ltext dhx_cal_template' style='height:"+(t.height||i||30)+"px;'></div>"},set_value:function(t,e,i,n){t.innerHTML=e||""},get_value:function(t,e,i){return t.innerHTML||""},focus:function(t){}},textarea:{render:function(t){var e=g._lightbox_controls.defaults.textarea,i=e?e.height:200;return"<div class='dhx_cal_ltext' style='height:"+(t.height||i||"130")+"px;'><textarea></textarea></div>"},set_value:function(t,e,i){g.form_blocks.textarea._get_input(t).value=e||""},get_value:function(t,e){return g.form_blocks.textarea._get_input(t).value},focus:function(t){var e=g.form_blocks.textarea._get_input(t);g._focus(e,!0)},_get_input:function(t){return t.getElementsByTagName("textarea")[0]}},select:{render:function(t){for(var e=g._lightbox_controls.defaults.select,i=e?e.height:23,n=(t.height||i||"23")+"px",a="<div class='dhx_cal_ltext' style='height:"+n+";'><select style='width:100%;'>",r=0;r<t.options.length;r++)a+="<option value='"+t.options[r].key+"'>"+t.options[r].label+"</option>";return a+="</select></div>"},set_value:function(t,e,i,n){var a=t.firstChild;!a._dhx_onchange&&n.onchange&&(a.onchange=n.onchange,a._dhx_onchange=!0),void 0===e&&(e=(a.options[0]||{}).value),a.value=e||""},get_value:function(t,e){return t.firstChild.value},focus:function(t){var e=t.firstChild;g._focus(e,!0)}},time:{render:function(t){t.time_format||(t.time_format=["%H:%i","%d","%m","%Y"]),t._time_format_order={};var e=t.time_format,i=g.config,n=g.date.date_part(g._currentDate()),a=1440,r=0;g.config.limit_time_select&&(a=60*i.last_hour+1,r=60*i.first_hour,n.setHours(i.first_hour));for(var s="",o=0;o<e.length;o++){var d=e[o];o>0&&(s+=" ");var l="",_="";switch(d){case"%Y":l="dhx_lightbox_year_select",t._time_format_order[3]=o;var h,c,u;t.year_range&&(isNaN(t.year_range)?t.year_range.push&&(c=t.year_range[0],u=t.year_range[1]):h=t.year_range),h=h||10;var f=f||Math.floor(h/2);c=c||n.getFullYear()-f,u=u||c+h;for(var v=c;v<u;v++)_+="<option value='"+v+"'>"+v+"</option>";break;case"%m":l="dhx_lightbox_month_select",t._time_format_order[2]=o;for(var v=0;v<12;v++)_+="<option value='"+v+"'>"+this.locale.date.month_full[v]+"</option>";break;case"%d":l="dhx_lightbox_day_select",t._time_format_order[1]=o;for(var v=1;v<32;v++)_+="<option value='"+v+"'>"+v+"</option>";break;case"%H:%i":l="dhx_lightbox_time_select",t._time_format_order[0]=o;var v=r,m=n.getDate();for(t._time_values=[];v<a;){_+="<option value='"+v+"'>"+this.templates.time_picker(n)+"</option>",t._time_values.push(v),n.setTime(n.valueOf()+60*this.config.time_step*1e3);v=24*(n.getDate()!=m?1:0)*60+60*n.getHours()+n.getMinutes()}}if(_){var p=g._waiAria.lightboxSelectAttrString(d);s+="<select class='"+l+"' "+(t.readonly?"disabled='disabled'":"")+p+">"+_+"</select> "}}var x=g._lightbox_controls.defaults.select;return"<div style='height:"+((x?x.height:23)||30)+"px;padding-top:0px;font-size:inherit;' class='dhx_section_time'>"+s+"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>"+s+"</div>"},set_value:function(t,e,i,n){function a(t,e,i){for(var a=n._time_values,r=60*i.getHours()+i.getMinutes(),s=r,o=!1,d=0;d<a.length;d++){var _=a[d];if(_===r){o=!0;break}_<r&&(s=_)}t[e+l[0]].value=o?r:s,o||s||(t[e+l[0]].selectedIndex=-1),t[e+l[1]].value=i.getDate(),t[e+l[2]].value=i.getMonth(),t[e+l[3]].value=i.getFullYear()}var r,s,o=g.config,d=t.getElementsByTagName("select"),l=n._time_format_order;if(o.full_day){if(!t._full_day){var _="<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> "+g.locale.labels.full_day+"&nbsp;</label></input>";g.config.wide_form||(_=t.previousSibling.innerHTML+_),t.previousSibling.innerHTML=_,t._full_day=!0}var h=t.previousSibling.getElementsByTagName("input")[0];h.checked=0===g.date.time_part(i.start_date)&&0===g.date.time_part(i.end_date),d[l[0]].disabled=h.checked,d[l[0]+d.length/2].disabled=h.checked,h.onclick=function(){if(h.checked){var e={};g.form_blocks.time.get_value(t,e,n),r=g.date.date_part(e.start_date),s=g.date.date_part(e.end_date),(+s==+r||+s>=+r&&(0!==i.end_date.getHours()||0!==i.end_date.getMinutes()))&&(s=g.date.add(s,1,"day"))}else r=null,s=null;d[l[0]].disabled=h.checked,d[l[0]+d.length/2].disabled=h.checked,a(d,0,r||i.start_date),a(d,4,s||i.end_date)}}if(o.auto_end_date&&o.event_duration)for(var c=function(){r=new Date(d[l[3]].value,d[l[2]].value,d[l[1]].value,0,d[l[0]].value),s=new Date(r.getTime()+60*g.config.event_duration*1e3),a(d,4,s)},u=0;u<4;u++)d[u].onchange=c;a(d,0,i.start_date),a(d,4,i.end_date)},get_value:function(t,e,i){var n=t.getElementsByTagName("select"),a=i._time_format_order;if(e.start_date=new Date(n[a[3]].value,n[a[2]].value,n[a[1]].value,0,n[a[0]].value),e.end_date=new Date(n[a[3]+4].value,n[a[2]+4].value,n[a[1]+4].value,0,n[a[0]+4].value),!n[a[3]].value||!n[a[3]+4].value){var r=g.getEvent(g._lightbox_id);r&&(e.start_date=r.start_date,e.end_date=r.end_date)}return e.end_date<=e.start_date&&(e.end_date=g.date.add(e.start_date,g.config.time_step,"minute")),{start_date:new Date(e.start_date),end_date:new Date(e.end_date)}},focus:function(t){g._focus(t.getElementsByTagName("select")[0])}}},g._setLbPosition=function(t){if(t){var e=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,i=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,n=window.innerHeight||document.documentElement.clientHeight;t.style.top=e?Math.round(e+Math.max((n-t.offsetHeight)/2,0))+"px":Math.round(Math.max((n-t.offsetHeight)/2,0)+9)+"px",document.documentElement.scrollWidth>document.body.offsetWidth?t.style.left=Math.round(i+(document.body.offsetWidth-t.offsetWidth)/2)+"px":t.style.left=Math.round((document.body.offsetWidth-t.offsetWidth)/2)+"px"}},g.showCover=function(t){t&&(t.style.display="block",this._setLbPosition(t)),g.config.responsive_lightbox&&(document.documentElement.classList.add("dhx_cal_overflow_container"),document.body.classList.add("dhx_cal_overflow_container")),this.show_cover()},g.showLightbox=function(t){if(t){if(!this.callEvent("onBeforeLightbox",[t]))return void(this._new_event&&(this._new_event=null));var e=this.getLightbox();this.showCover(e),this._fill_lightbox(t,e),this._waiAria.lightboxVisibleAttr(e),this.callEvent("onLightbox",[t])}},g._fill_lightbox=function(t,e){var i=this.getEvent(t),n=e.getElementsByTagName("span"),a=[];if(g.templates.lightbox_header){a.push("");var r=g.templates.lightbox_header(i.start_date,i.end_date,i);a.push(r),n[1].innerHTML="",n[2].innerHTML=r}else{var s=this.templates.event_header(i.start_date,i.end_date,i),o=(this.templates.event_bar_text(i.start_date,i.end_date,i)||"").substr(0,70);a.push(s),a.push(o),n[1].innerHTML=s,n[2].innerHTML=o}this._waiAria.lightboxHeader(e,a.join(" "));for(var d=this.config.lightbox.sections,l=0;l<d.length;l++){var _=d[l],h=g._get_lightbox_section_node(_),c=this.form_blocks[_.type],u=void 0!==i[_.map_to]?i[_.map_to]:_.default_value;c.set_value.call(this,h,u,i,_),d[l].focus&&c.focus.call(this,h)}g._lightbox_id=t},g._get_lightbox_section_node=function(t){return document.getElementById(t.id).nextSibling},g._lightbox_out=function(t){for(var e=this.config.lightbox.sections,i=0;i<e.length;i++){var n=document.getElementById(e[i].id);n=n?n.nextSibling:n;var a=this.form_blocks[e[i].type],r=a.get_value.call(this,n,t,e[i]);"auto"!=e[i].map_to&&(t[e[i].map_to]=r)}return t},g._empty_lightbox=function(t){var e=g._lightbox_id,i=this.getEvent(e);this.getLightbox();this._lame_copy(i,t),this.setEvent(i.id,i),this._edit_stop_event(i,!0),this.render_view_data()},g.hide_lightbox=function(t){g.endLightbox(!1,this.getLightbox())},g.hideLightbox=g.hide_lightbox,g.hideCover=function(t){t&&(t.style.display="none"),this.hide_cover(),g.config.responsive_lightbox&&(document.documentElement.classList.remove("dhx_cal_overflow_container"),document.body.classList.remove("dhx_cal_overflow_container"))},g.hide_cover=function(){this._cover&&this._cover.parentNode.removeChild(this._cover),this._cover=null},g.show_cover=function(){this._cover||(this._cover=document.createElement("div"),this._cover.className="dhx_cal_cover",document.body.appendChild(this._cover))},g.save_lightbox=function(){var t=this._lightbox_out({},this._lame_copy(this.getEvent(this._lightbox_id)));this.checkEvent("onEventSave")&&!this.callEvent("onEventSave",[this._lightbox_id,t,this._new_event])||(this._empty_lightbox(t),this.hide_lightbox())},g.startLightbox=function(t,e){this._lightbox_id=t,this._custom_lightbox=!0,this._temp_lightbox=this._lightbox,this._lightbox=e,this.showCover(e)},g.endLightbox=function(t,e){var e=e||g.getLightbox(),i=g.getEvent(this._lightbox_id);i&&this._edit_stop_event(i,t),t&&g.render_view_data(),this.hideCover(e),this._custom_lightbox&&(this._lightbox=this._temp_lightbox,this._custom_lightbox=!1),this._temp_lightbox=this._lightbox_id=null,this._waiAria.lightboxHiddenAttr(e),this.callEvent("onAfterLightbox",[])},g.resetLightbox=function(){g._lightbox&&!g._custom_lightbox&&g._lightbox.parentNode.removeChild(g._lightbox),g._lightbox=null},g.cancel_lightbox=function(){this.callEvent("onEventCancel",[this._lightbox_id,this._new_event]),this.hide_lightbox()},g._init_lightbox_events=function(){this.getLightbox().onclick=function(t){var e=t?t.target:event.srcElement;if(e.className||(e=e.previousSibling),!(e&&e.className&&g._getClassName(e).indexOf("dhx_btn_set")>-1)||(e=e.querySelector("[dhx_button]"))){var i=g._getClassName(e);if(e&&i)switch(i){case"dhx_save_btn":g.save_lightbox();break;case"dhx_delete_btn":var n=g.locale.labels.confirm_deleting;g._dhtmlx_confirm(n,g.locale.labels.title_confirm_deleting,function(){g.deleteEvent(g._lightbox_id),g._new_event=null,g.hide_lightbox()});break;case"dhx_cancel_btn":g.cancel_lightbox();break;default:if(e.getAttribute("dhx_button"))g.callEvent("onLightboxButton",[i,e,t]);else{var a,r,s;-1!=i.indexOf("dhx_custom_button")&&(-1!=i.indexOf("dhx_custom_button_")?(a=e.parentNode.getAttribute("index"),s=e.parentNode.parentNode):(a=e.getAttribute("index"),s=e.parentNode,e=e.firstChild)),a&&(r=g.form_blocks[g.config.lightbox.sections[a].type],r.button_click(a,e,s,s.nextSibling))}}}},this.getLightbox().onkeydown=function(t){var e=t||window.event,i=t.target||t.srcElement,n=i.querySelector("[dhx_button]");switch(n||(n=i.parentNode.querySelector(".dhx_custom_button, .dhx_readonly")),(t||e).keyCode){case 32:if((t||e).shiftKey)return;n&&n.click&&n.click();break;case g.keys.edit_save:if((t||e).shiftKey)return;n&&n.click?n.click():g.save_lightbox();break;case g.keys.edit_cancel:g.cancel_lightbox()}}},g.setLightboxSize=function(){var t=this._lightbox;if(t){var e=t.childNodes[1];e.style.height="0px",e.style.height=e.scrollHeight+"px",t.style.height=e.scrollHeight+g.xy.lightbox_additional_height+"px",e.style.height=e.scrollHeight+"px"}},g._init_dnd_events=function(){g.event(document.body,"mousemove",g._move_while_dnd),g.event(document.body,"mouseup",g._finish_dnd),g._init_dnd_events=function(){}},g._move_while_dnd=function(t){if(g._dnd_start_lb){document.dhx_unselectable||(document.body.className+=" dhx_unselectable",document.dhx_unselectable=!0);var e=g.getLightbox(),i=t&&t.target?[t.pageX,t.pageY]:[event.clientX,event.clientY];e.style.top=g._lb_start[1]+i[1]-g._dnd_start_lb[1]+"px",e.style.left=g._lb_start[0]+i[0]-g._dnd_start_lb[0]+"px"}},g._ready_to_dnd=function(t){var e=g.getLightbox();g._lb_start=[parseInt(e.style.left,10),parseInt(e.style.top,10)],g._dnd_start_lb=t&&t.target?[t.pageX,t.pageY]:[event.clientX,event.clientY]},g._finish_dnd=function(){g._lb_start&&(g._lb_start=g._dnd_start_lb=!1,document.body.className=document.body.className.replace(" dhx_unselectable",""),document.dhx_unselectable=!1)},g.getLightbox=function(){if(!this._lightbox){var t=document.createElement("div");t.className="dhx_cal_light",g.config.wide_form&&(t.className+=" dhx_cal_light_wide"),g.form_blocks.recurring&&(t.className+=" dhx_cal_light_rec"),g.config.rtl&&(t.className+=" dhx_cal_light_rtl"),g.config.responsive_lightbox&&(t.className+=" dhx_cal_light_responsive"),/msie|MSIE 6/.test(navigator.userAgent)&&(t.className+=" dhx_ie6"),t.style.visibility="hidden";for(var e=this._lightbox_template,i=this.config.buttons_left,n="",a=0;a<i.length;a++)n=this._waiAria.lightboxButtonAttrString(i[a]),e+="<div "+n+" class='dhx_btn_set dhx_"+(g.config.rtl?"right":"left")+"_btn_set "+i[a]+"_set'><div dhx_button='1' class='"+i[a]+"'></div><div>"+g.locale.labels[i[a]]+"</div></div>";i=this.config.buttons_right;for(var r=g.config.rtl,a=0;a<i.length;a++)n=this._waiAria.lightboxButtonAttrString(i[a]),e+="<div "+n+" class='dhx_btn_set dhx_"+(r?"left":"right")+"_btn_set "+i[a]+"_set' style='float:"+(r?"left":"right")+";'><div dhx_button='1' class='"+i[a]+"'></div><div>"+g.locale.labels[i[a]]+"</div></div>";e+="</div>",t.innerHTML=e,g.config.drag_lightbox&&(t.firstChild.onmousedown=g._ready_to_dnd,t.firstChild.onselectstart=function(){return!1},t.firstChild.style.cursor="move",g._init_dnd_events()),this._waiAria.lightboxAttr(t),document.body.insertBefore(t,document.body.firstChild),this._lightbox=t;var s=this.config.lightbox.sections;e="";for(var a=0;a<s.length;a++){var o=this.form_blocks[s[a].type];if(o){s[a].id="area_"+this.uid();var d="";if(s[a].button){var n=g._waiAria.lightboxSectionButtonAttrString(this.locale.labels["button_"+s[a].button]);d="<div "+n+" class='dhx_custom_button' index='"+a+"'><div class='dhx_custom_button_"+s[a].button+"'></div><div>"+this.locale.labels["button_"+s[a].button]+"</div></div>"}this.config.wide_form&&(e+="<div class='dhx_wrap_section'>");var l=this.locale.labels["section_"+s[a].name];"string"!=typeof l&&(l=s[a].name),e+="<div id='"+s[a].id+"' class='dhx_cal_lsection'>"+d+"<label>"+l+"</label></div>"+o.render.call(this,s[a]),e+="</div>"}}for(var _=t.getElementsByTagName("div"),a=0;a<_.length;a++){var h=_[a];if("dhx_cal_larea"==g._getClassName(h)){h.innerHTML=e;break}}g._bindLightboxLabels(s),this.setLightboxSize(),this._init_lightbox_events(this),t.style.display="none",t.style.visibility="visible"}return this._lightbox},g._bindLightboxLabels=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.id&&document.getElementById(i.id)){for(var n=document.getElementById(i.id),a=n.querySelector("label"),r=g._get_lightbox_section_node(i);r&&!r.querySelector;)r=r.nextSibling;var s=!0;if(r){var o=r.querySelector("input, select, textarea");o&&(i.inputId=o.id||"input_"+g.uid(),o.id||(o.id=i.inputId),a.setAttribute("for",i.inputId),s=!1)}if(s){g.form_blocks[i.type].focus&&(a.onclick=function(t){return function(){var e=g.form_blocks[t.type],i=g._get_lightbox_section_node(t);e&&e.focus&&e.focus.call(g,i)}}(i))}}}},g.attachEvent("onEventIdChange",function(t,e){this._lightbox_id==t&&(this._lightbox_id=e)}),g._lightbox_template="<div class='dhx_cal_ltitle'><span class='dhx_mark'>&nbsp;</span><span class='dhx_time'></span><span class='dhx_title'></span></div><div class='dhx_cal_larea'></div>",g._init_touch_events=function(){if((this.config.touch&&(-1!=navigator.userAgent.indexOf("Mobile")||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android")||-1!=navigator.userAgent.indexOf("Touch"))&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&(this.xy.scroll_width=0,this._mobile=!0),this.config.touch){var t=!0;try{document.createEvent("TouchEvent")}catch(e){t=!1}t?this._touch_events(["touchmove","touchstart","touchend"],function(t){return t.touches&&t.touches.length>1?null:t.touches[0]?{target:t.target,pageX:t.touches[0].pageX,pageY:t.touches[0].pageY,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:t},function(){return!1}):window.PointerEvent||window.navigator.pointerEnabled?this._touch_events(["pointermove","pointerdown","pointerup"],function(t){return"mouse"==t.pointerType?null:t},function(t){return!t||"mouse"==t.pointerType}):window.navigator.msPointerEnabled&&this._touch_events(["MSPointerMove","MSPointerDown","MSPointerUp"],function(t){return t.pointerType==t.MSPOINTER_TYPE_MOUSE?null:t},function(t){return!t||t.pointerType==t.MSPOINTER_TYPE_MOUSE})}},g._touch_events=function(t,e,i){function n(t,e,n){t.addEventListener(e,function(t){if(g._is_lightbox_open())return!0;if(!i(t))return n(t)},{passive:!1})}function a(t,e,i,n){if(!t||!e)return!1;for(var a=t.target;a&&a!=g._obj;)a=a.parentNode;if(a!=g._obj)return!1;if(g.matrix&&g.matrix[g.getState().mode]){if(g.matrix[g.getState().mode].scrollable)return!1}var r=Math.abs(t.pageY-e.pageY),s=Math.abs(t.pageX-e.pageX);return r<n&&s>i&&(!r||s/r>3)&&(t.pageX>e.pageX?g._click.dhx_cal_next_button():g._click.dhx_cal_prev_button(),!0)}function r(t){if(!i(t)){var e=g.getState().drag_mode,n=!!g.matrix&&g.matrix[g._mode],a=g.render_view_data;return"create"==e&&n&&(g.render_view_data=function(){for(var t=g.getState().drag_id,e=g.getEvent(t),i=n.y_property,a=g.getEvents(e.start_date,e.end_date),r=0;r<a.length;r++)a[r][i]!=e[i]&&(a.splice(r,1),r--);e._sorder=a.length-1,e._count=a.length,this.render_data([e],g.getState().mode)}),g._on_mouse_move(t),"create"==e&&n&&(g.render_view_data=a),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,!1}}function s(t){i(t)||(g._hide_global_tip(),_&&(g._on_mouse_up(e(t||event)),g._temp_touch_block=!1),g._drag_id=null,g._drag_mode=null,g._drag_pos=null,g._pointerDragId=null,clearTimeout(l),_=c=!1,h=!0)}var o,d,l,_,h,c,u=(-1!=navigator.userAgent.indexOf("Android")&&navigator.userAgent.indexOf("WebKit"),0);n(document.body,t[0],function(t){if(!i(t)){var n=e(t);if(n){if(_)return r(n),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,g._update_global_tip(),!1;if(d=e(t),c)return d?void((o.target!=d.target||Math.abs(o.pageX-d.pageX)>5||Math.abs(o.pageY-d.pageY)>5)&&(h=!0,clearTimeout(l))):void(h=!0)}}}),n(this._els.dhx_cal_data[0],"touchcancel",s),n(this._els.dhx_cal_data[0],"contextmenu",function(t){if(!i(t))return c?(t&&t.preventDefault&&t.preventDefault(),(t||event).cancelBubble=!0,!1):void 0}),n(this._obj,t[1],function(t){if(document&&document.body&&document.body.classList.add("dhx_cal_touch_active"),!i(t)){g._pointerDragId=t.pointerId;var n;if(_=h=!1,c=!0,!(n=d=e(t)))return void(h=!0);var a=new Date;if(!h&&!_&&a-u<250)return g._click.dhx_cal_data(n),window.setTimeout(function(){n.type="dblclick",g._on_dbl_click(n)},50),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,g._block_next_stop=!0,!1;if(u=a,!h&&!_&&g.config.touch_drag){var r=g._locate_event(document.activeElement),s=g._locate_event(n.target),f=o?g._locate_event(o.target):null;if(r&&s&&r==s&&r!=f)return t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,g._ignore_next_click=!1,g._click.dhx_cal_data(n),o=n,!1;l=setTimeout(function(){_=!0;var t=o.target,e=g._getClassName(t);t&&-1!=e.indexOf("dhx_body")&&(t=t.previousSibling),g._on_mouse_down(o,t),g._drag_mode&&"create"!=g._drag_mode&&g.for_rendered(g._drag_id,function(t,e){t.style.display="none",g._rendered.splice(e,1)}),g.config.touch_tip&&g._show_global_tip(),g.updateEvent(g._drag_id)},g.config.touch_drag),o=n}}}),n(this._els.dhx_cal_data[0],t[2],function(t){if(document&&document.body&&document.body.classList.remove("dhx_cal_touch_active"),!i(t))return g.config.touch_swipe_dates&&!_&&a(o,d,200,100)&&(g._block_next_stop=!0),_&&(g._ignore_next_click=!0,setTimeout(function(){g._ignore_next_click=!1},100)),s(t),g._block_next_stop?(g._block_next_stop=!1,t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,!1):void 0}),g.event(document.body,t[2],s)},g._show_global_tip=function(){g._hide_global_tip();var t=g._global_tip=document.createElement("div");t.className="dhx_global_tip",g._update_global_tip(1),document.body.appendChild(t)},g._update_global_tip=function(t){var e=g._global_tip;if(e){var i="";if(g._drag_id&&!t){var n=g.getEvent(g._drag_id);n&&(i="<div>"+(n._timed?g.templates.event_header(n.start_date,n.end_date,n):g.templates.day_date(n.start_date,n.end_date,n))+"</div>")}"create"==g._drag_mode||"new-size"==g._drag_mode?e.innerHTML=(g.locale.labels.drag_to_create||"Drag to create")+i:e.innerHTML=(g.locale.labels.drag_to_move||"Drag to move")+i}},g._hide_global_tip=function(){var t=g._global_tip;t&&t.parentNode&&(t.parentNode.removeChild(t),g._global_tip=0)},g._dp_init=function(t){t._methods=["_set_event_text_style","","_dp_change_event_id","_dp_hook_delete"],this._dp_change_event_id=function(t,e){g.getEvent(t)&&g.changeEventId(t,e)},this._dp_hook_delete=function(e,i){if(g.getEvent(e))return i&&e!=i&&("true_deleted"==this.getUserData(e,t.action_param)&&this.setUserData(e,t.action_param,"updated"),this.changeEventId(e,i)),this.deleteEvent(i,!0)},this.attachEvent("onEventAdded",function(e){!this._loading&&this._validId(e)&&t.setUpdated(e,!0,"inserted")}),this.attachEvent("onConfirmedBeforeEventDelete",function(e){if(this._validId(e)){var i=t.getState(e);return"inserted"==i||this._new_event?(t.setUpdated(e,!1),!0):"deleted"!=i&&("true_deleted"==i||(t.setUpdated(e,!0,"deleted"),!1))}}),this.attachEvent("onEventChanged",function(e){!this._loading&&this._validId(e)&&t.setUpdated(e,!0,"updated")}),g.attachEvent("onClearAll",function(){t._in_progress={},t._invalid={},t.updatedRows=[],t._waitMode=0});var e=function(t,i,n){n=n||"",i=i||{};for(var a in t)0!==a.indexOf("_")&&(t[a]&&t[a].getUTCFullYear?i[n+a]=this.obj._helpers.formatDate(t[a]):t[a]&&"object"==typeof t[a]?e.call(this,t[a],i,n+a+"."):i[n+a]=t[a]);return i},i=function(t){var e=g.utils.copy(t);for(var n in e)0===n.indexOf("_")?delete e[n]:e[n]&&(e[n].getUTCFullYear?e[n]=this.obj._helpers.formatDate(e[n]):"object"==typeof e[n]&&(e[n]=i(e[n])));return e};t._getRowData=function(t,n){var a=this.obj.getEvent(t);return"JSON"==this._tMode?i.call(this,a):e.call(this,a)},t._clearUpdateFlag=function(){},t.attachEvent("insertCallback",g._update_callback),t.attachEvent("updateCallback",g._update_callback),t.attachEvent("deleteCallback",function(t,e){this.obj.getEvent(e)?(this.obj.setUserData(e,this.action_param,"true_deleted"),this.obj.deleteEvent(e)):this.obj._add_rec_marker&&this.obj._update_callback(t,e)})},g._validId=function(t){return!0},g.setUserData=function(t,e,i){if(t){var n=this.getEvent(t);n&&(n[e]=i)}else this._userdata[e]=i},g.getUserData=function(t,e){if(t){var i=this.getEvent(t);return i?i[e]:null}return this._userdata[e]},g._set_event_text_style=function(t,e){if(g.getEvent(t)){this.for_rendered(t,function(t){t.style.cssText+=";"+e});var i=this.getEvent(t);i._text_style=e,this.event_updated(i)}},g._update_callback=function(t,e){var i=g._xmlNodeToJSON(t.firstChild);"none"==i.rec_type&&(i.rec_pattern="none"),i.text=i.text||i._tagvalue,i.start_date=g._helpers.parseDate(i.start_date),i.end_date=g._helpers.parseDate(i.end_date),g.addEvent(i),g._add_rec_marker&&g.setCurrentView()},g.getRootView=function(){return{view:{render:function(){return{tag:"div",type:1,attrs:{style:"width:100%;height:100%;"},hooks:{didInsert:function(){g.setCurrentView()}},body:[{el:this.el,type:1}]}},init:function(){var t=document.createElement("DIV");t.id="scheduler_"+g.uid(),t.style.width="100%",t.style.height="100%",t.classList.add("dhx_cal_container"),t.cmp="grid",t.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div><div class="dhx_cal_tab" name="day_tab"></div><div class="dhx_cal_tab" name="week_tab"></div><div class="dhx_cal_tab" name="month_tab"></div></div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>',g.init(t),this.el=t}},type:4}},g._skin_settings={fix_tab_position:[1,0],use_select_menu_space:[1,0],wide_form:[1,0],hour_size_px:[44,42],displayed_event_color:["#ff4a4a","ffc5ab"],displayed_event_text_color:["#ffef80","7e2727"]},g._skin_xy={lightbox_additional_height:[90,50],nav_height:[59,22],bar_height:[24,20]},g._is_material_skin=function(){return g.skin?(g.skin+"").indexOf("material")>-1:c()};var A,S;window.addEventListener("DOMContentLoaded",f),window.addEventListener("load",f),g._border_box_events=function(){return u()},g._configure=function(t,e,i){for(var n in e)void 0===t[n]&&(t[n]=e[n][i])},g._skin_init=function(){if(!g.skin)for(var t=document.getElementsByTagName("link"),e=0;e<t.length;e++){var i=t[e].href.match("dhtmlxscheduler_([a-z]+).css");if(i){g.skin=i[1];break}}var n=0;if(!g.skin||"classic"!==g.skin&&"glossy"!==g.skin||(n=1),g._is_material_skin()){var a=g.config.buttons_left.$inital,r=g.config.buttons_right.$inital;if(a&&g.config.buttons_left.slice().join()==a&&r&&g.config.buttons_right.slice().join()==r){var s=g.config.buttons_left.slice();g.config.buttons_left=g.config.buttons_right.slice(),g.config.buttons_right=s}g.xy.event_header_height=18,g.xy.week_agenda_scale_height=35,g.xy.map_icon_width=38,g._lightbox_controls.defaults.textarea.height=64,g._lightbox_controls.defaults.time.height="auto"}if(this._configure(g.config,g._skin_settings,n),this._configure(g.xy,g._skin_xy,n),"flat"===g.skin&&(g.xy.scale_height=35,g.templates.hour_scale=function(t){var e=t.getMinutes();return e=e<10?"0"+e:e,"<span class='dhx_scale_h'>"+t.getHours()+"</span><span class='dhx_scale_m'>&nbsp;"+e+"</span>"}),!n){var o=g.config.minicalendar;o&&(o.padding=14),g.templates.event_bar_date=function(t,e,i){return"• <b>"+g.templates.event_date(t)+"</b> "},g.attachEvent("onTemplatesReady",function(){var t=g.date.date_to_str("%d");g.templates._old_month_day||(g.templates._old_month_day=g.templates.month_day);var e=g.templates._old_month_day;if(g.templates.month_day=function(i){if("month"==this._mode){var n=t(i);return 1==i.getDate()&&(n=g.locale.date.month_full[i.getMonth()]+" "+n),+i==+g.date.date_part(this._currentDate())&&(n=g.locale.labels.dhx_cal_today_button+" "+n),n}return e.call(this,i)},g.config.fix_tab_position){var i=g._els.dhx_cal_navline[0].getElementsByTagName("div"),n=null,a=211,r=[14,75,136],s=14;g._is_material_skin()&&(r=[16,103,192],a=294,s=-1);for(var o=0;o<i.length;o++){var d=i[o],l=d.getAttribute("name");if(l){switch(d.style.right="auto",l){case"day_tab":d.style.left=r[0]+"px",d.className+=" dhx_cal_tab_first";break;case"week_tab":d.style.left=r[1]+"px";break;case"month_tab":d.style.left=r[2]+"px",d.className+=" dhx_cal_tab_last";break;default:d.style.left=a+"px",d.className+=" dhx_cal_tab_standalone",a=a+s+d.offsetWidth}d.className+=" "+l}else 0===(d.className||"").indexOf("dhx_minical_icon")&&d.parentNode==g._els.dhx_cal_navline[0]&&(n=d)}n&&(n.style.left=a+"px")}}),g._skin_init=function(){}}},window.jQuery&&function(t){var e=0,i=[];t.fn.dhx_scheduler=function(n){if("string"!=typeof n){var a=[];return this.each(function(){if(this&&this.getAttribute)if(this.getAttribute("dhxscheduler"))a.push(window[this.getAttribute("dhxscheduler")]);else{var t="scheduler";e&&(t="scheduler"+(e+1),window[t]=Scheduler.getSchedulerInstance());var i=window[t];this.setAttribute("dhxscheduler",t);for(var r in n)"data"!=r&&(i.config[r]=n[r]);this.getElementsByTagName("div").length||(this.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div><div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div></div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>',this.className+=" dhx_cal_container"),i.init(this,i.config.date,i.config.mode),n.data&&i.parse(n.data),a.push(i),e++}}),1===a.length?a[0]:a}if(i[n])return i[n].apply(this,[]);t.error("Method "+n+" does not exist on jQuery.dhx_scheduler")}}(jQuery),function(){function t(t,e,i){e&&(t._date=e),i&&(t._mode=i)}var e=g.setCurrentView,i=g.updateView,n=null,a=null,r=function(e,r){var s=this;window.clearTimeout(a),window.clearTimeout(n);var o=s._date,d=s._mode;t(this,e,r),a=setTimeout(function(){if(!s.callEvent("onBeforeViewChange",[d,o,r||s._mode,e||s._date]))return void t(s,o,d);i.call(s,e,r),s.callEvent("onViewChange",[s._mode,s._date]),window.clearTimeout(n),a=0},g.config.delay_render)},s=function(e,r){var s=this,o=arguments;t(this,e,r),window.clearTimeout(n),n=setTimeout(function(){a||i.apply(s,o)},g.config.delay_render)};g.attachEvent("onSchedulerReady",function(){g.config.delay_render?(g.setCurrentView=r,g.updateView=s):(g.setCurrentView=e,g.updateView=i)})}();for(var k=0;k<Scheduler._schedulerPlugins.length;k++)Scheduler._schedulerPlugins[k](g);return g._internal_id=Scheduler._seed++,Scheduler.$syncFactory&&Scheduler.$syncFactory(g),g},window.scheduler=Scheduler.getSchedulerInstance(),window.Scheduler={plugin:scheduler.bind(Scheduler.plugin,Scheduler)},dhtmlx&&dhtmlx.attaches&&(dhtmlx.attaches.attachScheduler=function(t,e,i,n){var i=i||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>',a=document.createElement("DIV");return a.id="dhxSchedObj_"+this._genStr(12),a.innerHTML='<div id="'+a.id+'" class="dhx_cal_container" style="width:100%; height:100%;"><div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+i+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div></div>',document.body.appendChild(a.firstChild),this.attachObject(a.id,!1,!0),this.vs[this.av].sched=n,this.vs[this.av].schedId=a.id,n.setSizes=n.updateView,n.destructor=function(){},n.init(a.id,t,e),this.vs[this._viewRestore()].sched})}();
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_active_links.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(t){t.config.active_link_view="day";t._active_link_click=function(e){var i=e.target||event.srcElement;var a=i.getAttribute("jump_to");var _=t.date.str_to_date(t.config.api_date);if(a){t.setCurrentView(_(a),t.config.active_link_view);if(e&&e.preventDefault)e.preventDefault();return false}};t.attachEvent("onTemplatesReady",function(){var e=function(e,i){i=i||e+"_scale_date";if(!t.templates["_active_links_old_"+i]){t.templates["_active_links_old_"+i]=t.templates[i]}var a=t.templates["_active_links_old_"+i];var _=t.date.date_to_str(t.config.api_date);t.templates[i]=function(t){return"<a jump_to='"+_(t)+"' href='#'>"+a(t)+"</a>"}};e("week");e("","month_day");if(this.matrix){for(var i in this.matrix)e(i)}this._detachDomEvent(this._obj,"click",t._active_link_click);t.event(this._obj,"click",t._active_link_click)})});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_agenda_view.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(a){a.date.add_agenda=function(e){return a.date.add(e,1,"year")};a.templates.agenda_time=function(e,t,d){if(d._timed)return this.day_date(d.start_date,d.end_date,d)+" "+this.event_date(e);else return a.templates.day_date(e)+" &ndash; "+a.templates.day_date(t)};a.templates.agenda_text=function(a,e,t){return t.text};a.templates.agenda_date=function(){return""};a.date.agenda_start=function(){return a.date.date_part(a._currentDate())};a.attachEvent("onTemplatesReady",function(){var e=a.dblclick_dhx_cal_data;a.dblclick_dhx_cal_data=function(){if(this._mode=="agenda"){if(!this.config.readonly&&this.config.dblclick_create)this.addEventNow()}else{if(e)return e.apply(this,arguments)}};var t=a.render_data;a.render_data=function(a){if(this._mode=="agenda")_();else return t.apply(this,arguments)};var d=a.render_view_data;a.render_view_data=function(){if(this._mode=="agenda"){a._agendaScrollTop=a._els["dhx_cal_data"][0].childNodes[0].scrollTop;a._els["dhx_cal_data"][0].childNodes[0].scrollTop=0}return d.apply(this,arguments)};function n(e){if(e){var t=a.locale.labels;var d=a._waiAria.agendaHeadAttrString();var n=a._waiAria.agendaHeadDateString(t.date);var _=a._waiAria.agendaHeadDescriptionString(t.description);a._els["dhx_cal_header"][0].innerHTML="<div "+d+" class='dhx_agenda_line'>"+"<div "+n+">"+t.date+"</div>"+"<span class = 'description_header' style='padding-left:25px' "+_+">"+t.description+"</span>"+"</div>";a._table_view=true;a.set_sizes()}}function _(){var e=a._date;var t=a.get_visible_events();t.sort(function(a,e){return a.start_date>e.start_date?1:-1});var d=a._waiAria.agendaDataAttrString();var n;var _="<div class='dhx_agenda_area' "+d+">";for(var i=0;i<t.length;i++){var r=t[i];var l=r.color?"background:"+r.color+";":"";var s=r.textColor?"color:"+r.textColor+";":"";var c=a.templates.event_class(r.start_date,r.end_date,r);n=a._waiAria.agendaEventAttrString(r);var o=a._waiAria.agendaDetailsBtnString();_+="<div "+n+" class='dhx_agenda_line"+(c?" "+c:"")+"' event_id='"+r.id+"' style='"+s+""+l+""+(r._text_style||"")+"'><div class='dhx_agenda_event_time'>"+(a.config.rtl?a.templates.agenda_time(r.end_date,r.start_date,r):a.templates.agenda_time(r.start_date,r.end_date,r))+"</div>";_+="<div "+o+" class='dhx_event_icon icon_details'>&nbsp;</div>";_+="<span>"+a.templates.agenda_text(r.start_date,r.end_date,r)+"</span></div>"}_+="<div class='dhx_v_border'></div></div>";a._els["dhx_cal_data"][0].innerHTML=_;a._els["dhx_cal_data"][0].childNodes[0].scrollTop=a._agendaScrollTop||0;var v=a._els["dhx_cal_data"][0].childNodes[0];var g=v.childNodes[v.childNodes.length-1];g.style.height=v.offsetHeight<a._els["dhx_cal_data"][0].offsetHeight?"100%":v.offsetHeight+"px";var h=a._els["dhx_cal_data"][0].firstChild.childNodes;var f=a._getNavDateElement();if(f){f.innerHTML=a.templates.agenda_date(a._min_date,a._max_date,a._mode)}a._rendered=[];for(var i=0;i<h.length-1;i++)a._rendered[i]=h[i]}a.agenda_view=function(e){a._min_date=a.config.agenda_start||a.date.agenda_start(a._date);a._max_date=a.config.agenda_end||a.date.add_agenda(a._min_date,1);n(e);if(e){a._cols=null;a._colsS=null;a._table_view=true;_()}else{a._table_view=false}}})});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_all_timed.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){(function(){e.config.all_timed="short";e.config.all_timed_month=false;var t=function(t){if(!((t.end_date-t.start_date)/(1e3*60*60)>=24)){return true}if(e._drag_mode=="resize"&&e._drag_id==t.id){return true}return false};e._safe_copy=function(t){var a=null,i=e._copy_event(t);if(t.event_pid){a=e.getEvent(t.event_pid)}if(a&&a.isPrototypeOf(t)){delete i.event_length;delete i.event_pid;delete i.rec_pattern;delete i.rec_type}return i};var a=e._pre_render_events_line;var i=e._pre_render_events_table;var n=function(e,t){if(!this._table_view){return a.call(this,e,t)}return i.call(this,e,t)};e._pre_render_events_line=e._pre_render_events_table=function(a,i){if(!this.config.all_timed||this._table_view&&this._mode!="month"||this._mode=="month"&&!this.config.all_timed_month)return n.call(this,a,i);for(var _=0;_<a.length;_++){var r=a[_];if(r._timed)continue;if(this.config.all_timed=="short"){if(!t(r)){if(this._mode!="month"){a.splice(_--,1)}continue}}var d=this._safe_copy(r);if(!r._virtual){d._first_chunk=true}else{d._first_chunk=false}d._drag_resize=false;d._virtual=true;d.start_date=new Date(d.start_date);if(!u(r)){d.end_date=new Date(r.end_date)}else{d.end_date=o(d.start_date);if(this.config.last_hour!=24){d.end_date=c(d.start_date,this.config.last_hour)}}var s=false;if(d.start_date<this._max_date&&d.end_date>this._min_date&&d.start_date<d.end_date){a[_]=d;s=true}var l=this._safe_copy(r);l._virtual=true;l.end_date=new Date(l.end_date);if(l.start_date<this._min_date)l.start_date=c(this._min_date,this.config.first_hour);else l.start_date=c(o(r.start_date),this.config.first_hour);if(l.start_date<this._max_date&&l.start_date<l.end_date){if(s){a.splice(_+1,0,l)}else{a[_--]=l;continue}l._last_chunk=false}else{d._last_chunk=true;d._drag_resize=true}}var f=this._drag_mode=="move"?false:i;return n.call(this,a,f);function u(e){var t=o(e.start_date);return+e.end_date>+t}function o(t){var a=e.date.add(t,1,"day");a=e.date.date_part(a);return a}function c(t,a){var i=e.date.date_part(new Date(t));i.setHours(a);return i}};var _=e.get_visible_events;e.get_visible_events=function(e){if(!(this.config.all_timed&&this.config.multi_day))return _.call(this,e);return _.call(this,false)};e.attachEvent("onBeforeViewChange",function(t,a,i,n){e._allow_dnd=i=="day"||i=="week";return true});e._is_main_area_event=function(e){return!!(e._timed||this.config.all_timed===true||this.config.all_timed=="short"&&t(e))};var r=e.updateEvent;e.updateEvent=function(t){var a=e.getEvent(t);var i;var n;if(a){i=e.config.all_timed&&!(e.isOneDayEvent(e._events[t])||e.getState().drag_id);if(i){n=e.config.update_render;e.config.update_render=true}}r.apply(e,arguments);if(a){if(i){e.config.update_render=n}}}})()});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_collision.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){(function(){var t;var n;e.config.collision_limit=1;function i(n){var i=e._get_section_view();if(i&&n){t=e.getEvent(n)[e._get_section_property()]}}e.attachEvent("onBeforeDrag",function(e){i(e);return true});e.attachEvent("onBeforeLightbox",function(t){var r=e.getEvent(t);n=[r.start_date,r.end_date];i(t);return true});e.attachEvent("onEventChanged",function(t){if(!t||!e.getEvent(t))return true;var i=e.getEvent(t);if(!e.checkCollision(i)){if(!n)return false;i.start_date=n[0];i.end_date=n[1];i._timed=this.isOneDayEvent(i)}return true});e.attachEvent("onBeforeEventChanged",function(t,n,i){return e.checkCollision(t)});e.attachEvent("onEventAdded",function(t,n){var i=e.checkCollision(n);if(!i)e.deleteEvent(t)});e.attachEvent("onEventSave",function(t,n,i){n=e._lame_clone(n);n.id=t;if(!(n.start_date&&n.end_date)){var r=e.getEvent(t);n.start_date=new Date(r.start_date);n.end_date=new Date(r.end_date)}if(n.rec_type){e._roll_back_dates(n)}return e.checkCollision(n)});e._check_sections_collision=function(t,n){var i=e._get_section_property();if(t[i]==n[i]&&t.id!=n.id)return true;return false};e.checkCollision=function(n){var i=[];var r=e.config.collision_limit;if(n.rec_type){var a=e.getRecDates(n);for(var o=0;o<a.length;o++){var c=e.getEvents(a[o].start_date,a[o].end_date);for(var v=0;v<c.length;v++){if((c[v].event_pid||c[v].id)!=n.id)i.push(c[v])}}}else{i=e.getEvents(n.start_date,n.end_date);for(var _=0;_<i.length;_++){var l=i[_];if(l.id==n.id||l.event_length&&[l.event_pid,l.event_length].join("#")==n.id){i.splice(_,1);break}}}var d=e._get_section_view();var f=e._get_section_property();var s=true;if(d){var u=0;for(var _=0;_<i.length;_++){if(i[_].id!=n.id&&this._check_sections_collision(i[_],n))u++}if(u>=r){s=false}}else{if(i.length>=r)s=false}if(!s){var g=!e.callEvent("onEventCollision",[n,i]);if(!g){n[f]=t||n[f]}return g}return s}})()});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_container_autoresize.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e.config.container_autoresize=true;e.config.month_day_min_height=90;e.config.min_grid_size=25;e.config.min_map_size=400;var i=e._pre_render_events;var t=true;var h=0;var n=0;e._pre_render_events=function(a,s){if(!(e.config.container_autoresize&&t)){return i.apply(this,arguments)}var o=this.xy.bar_height;var l=this._colsS.heights;var r=this._colsS.heights=[0,0,0,0,0,0,0];var _=this._els["dhx_cal_data"][0];if(!this._table_view)a=this._pre_render_events_line(a,s);else a=this._pre_render_events_table(a,s);if(this._table_view){if(s){this._colsS.heights=l}else{var d=_.firstChild;if(d.rows){for(var c=0;c<d.rows.length;c++){r[c]++;if(r[c]*o>this._colsS.height-this.xy.month_head_height){var f=d.rows[c].cells;var g=this._colsS.height-this.xy.month_head_height;if(this.config.max_month_events*1!==this.config.max_month_events||r[c]<=this.config.max_month_events){g=r[c]*o}else if((this.config.max_month_events+1)*o>this._colsS.height-this.xy.month_head_height){g=(this.config.max_month_events+1)*o}for(var v=0;v<f.length;v++){f[v].childNodes[1].style.height=g+"px"}r[c]=(r[c-1]||0)+f[0].offsetHeight}r[c]=(r[c-1]||0)+d.rows[c].cells[0].offsetHeight}r.unshift(0);if(d.parentNode.offsetHeight<d.parentNode.scrollHeight&&!d._h_fix){}}else{if(!a.length&&this._els["dhx_multi_day"][0].style.visibility=="visible")r[0]=-1;if(a.length||r[0]==-1){var m=d.parentNode.childNodes;var u=(r[0]+1)*o+1;if(n!=u+1){this._obj.style.height=h-n+u-1+"px"}u+="px";_.style.top=this._els["dhx_cal_navline"][0].offsetHeight+this._els["dhx_cal_header"][0].offsetHeight+parseInt(u,10)+"px";_.style.height=this._obj.offsetHeight-parseInt(_.style.top,10)-(this.xy.margin_top||0)+"px";var x=this._els["dhx_multi_day"][0];x.style.height=u;x.style.visibility=r[0]==-1?"hidden":"visible";x=this._els["dhx_multi_day"][1];x.style.height=u;x.style.visibility=r[0]==-1?"hidden":"visible";x.className=r[0]?"dhx_multi_day_icon":"dhx_multi_day_icon_small";this._dy_shift=(r[0]+1)*o;r[0]=0}}}}return a};var a=["dhx_cal_navline","dhx_cal_header","dhx_multi_day","dhx_cal_data"];var s=function(i){h=0;for(var t=0;t<a.length;t++){var s=a[t];var o=e._els[s]?e._els[s][0]:null;var l=0;switch(s){case"dhx_cal_navline":case"dhx_cal_header":l=parseInt(o.style.height,10);break;case"dhx_multi_day":l=o?o.offsetHeight-1:0;n=l;break;case"dhx_cal_data":var _=e.getState().mode;if(o.childNodes[1]&&_!="month"){l=o.childNodes[1].offsetHeight}else{l=Math.max(o.offsetHeight-1,o.scrollHeight)}if(_=="month"){if(e.config.month_day_min_height&&!i){var d=o.getElementsByTagName("tr").length;l=d*e.config.month_day_min_height}if(i){o.style.height=l+"px"}}else if(_=="year"){l=190*e.config.year_y}else if(_=="agenda"){l=0;if(o.childNodes&&o.childNodes.length){for(var c=0;c<o.childNodes.length;c++){l+=o.childNodes[c].offsetHeight}}if(l+2<e.config.min_grid_size){l=e.config.min_grid_size}else{l+=2}}else if(_=="week_agenda"){var f=e.xy.week_agenda_scale_height+e.config.min_grid_size,g;var v;for(var m=0;m<o.childNodes.length;m++){v=o.childNodes[m];for(var c=0;c<v.childNodes.length;c++){var u=0,x=v.childNodes[c].childNodes[1];for(var y=0;y<x.childNodes.length;y++){u+=x.childNodes[y].offsetHeight}g=u+e.xy.week_agenda_scale_height;g=m==1&&(c==2||c==3)?g*2:g;if(g>f){f=g}}}l=f*3}else if(_=="map"){l=0;var p=o.querySelectorAll(".dhx_map_line");for(var c=0;c<p.length;c++){l+=p[c].offsetHeight}if(l+2<e.config.min_map_size){l=e.config.min_map_size}else{l+=2}}else if(e._gridView){l=0;if(o.childNodes[1].childNodes[0].childNodes&&o.childNodes[1].childNodes[0].childNodes.length){var p=o.childNodes[1].childNodes[0].childNodes[0].childNodes;for(var c=0;c<p.length;c++){l+=p[c].offsetHeight}l+=2;if(l<e.config.min_grid_size){l=e.config.min_grid_size}}else{l=e.config.min_grid_size}}if(e.matrix&&e.matrix[_]){if(i){l+=0;o.style.height=l+"px"}else{l=0;var N=e.matrix[_];var w=N.y_unit;for(var E=0;E<w.length;E++){l+=N._section_height[w[E].key]}if(e.$container.clientWidth!=e.$container.scrollWidth){l+=r()}}l-=1}if(_=="day"||_=="week"||e._props&&e._props[_]){l+=2}break}l+=1;h+=l}e._obj.style.height=h+"px";if(!i)e.updateView()};function o(){t=false;e.callEvent("onAfterSchedulerResize",[]);t=true}var l=function(){if(!(e.config.container_autoresize&&t))return true;var i=e.getState().mode;if(!i){return true}var h=window.requestAnimationFrame||window.setTimeout;var n=document.documentElement.scrollTop;h(function(){s()});if(e.matrix&&e.matrix[i]||i=="month"){h(function(){s(true);document.documentElement.scrollTop=n;o()},1)}else{o()}};e.attachEvent("onBeforeViewChange",function(){var i=e.config.container_autoresize;if(!e.xy.$original_scroll_width){e.xy.$original_scroll_width=e.xy.scroll_width}e.xy.scroll_width=i?0:e.xy.$original_scroll_width;if(e.matrix){for(var t in e.matrix){var h=e.matrix[t];if(!h.$original_section_autoheight){h.$original_section_autoheight=h.section_autoheight}if(i){h.section_autoheight=false}else{h.section_autoheight=h.$original_section_autoheight}}}return true});e.attachEvent("onViewChange",l);e.attachEvent("onXLE",l);e.attachEvent("onEventChanged",l);e.attachEvent("onEventCreated",l);e.attachEvent("onEventAdded",l);e.attachEvent("onEventDeleted",l);e.attachEvent("onAfterSchedulerResize",l);e.attachEvent("onClearAll",l);e.attachEvent("onBeforeExpand",function(){t=false;return true});e.attachEvent("onBeforeCollapse",function(){t=true;return true});function r(){var e=document.createElement("div");e.style.cssText="visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;";document.body.appendChild(e);var i=e.offsetWidth-e.clientWidth;document.body.removeChild(e);return i}});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_cookie.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){(function(){function t(e,t,i){var n=e+"="+i+(t?"; "+t:"");document.cookie=n}function i(e){var t=e+"=";if(document.cookie.length>0){var i=document.cookie.indexOf(t);if(i!=-1){i+=t.length;var n=document.cookie.indexOf(";",i);if(n==-1)n=document.cookie.length;return document.cookie.substring(i,n)}}return""}var n=true;e.attachEvent("onBeforeViewChange",function(a,o,r,u){if(n&&e._get_url_nav){var s=e._get_url_nav();if(s.date||s.mode||s.event){n=false}}var c=(e._obj.id||"scheduler")+"_settings";if(n){n=false;var f=i(c);if(f){if(!e._min_date){e._min_date=u}f=unescape(f).split("@");f[0]=this._helpers.parseDate(f[0]);var d=this.isViewExists(f[1])?f[1]:r,l=!isNaN(+f[0])?f[0]:u;window.setTimeout(function(){e.setCurrentView(l,d)},1);return false}}var v=escape(this._helpers.formatDate(u||o)+"@"+(r||a));t(c,"expires=Sun, 31 Jan 9999 22:00:00 GMT",v);return true});var a=e._load;e._load=function(){var t=arguments;if(!e._date){var i=this;window.setTimeout(function(){a.apply(i,t)},1)}else{a.apply(this,t)}}})()});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_csp.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e.date.date_to_str=function(t,a){return function(r){return t.replace(/%[a-zA-Z]/g,function(t){switch(t){case"%d":return a?e.date.to_fixed(r.getUTCDate()):e.date.to_fixed(r.getDate());case"%m":return a?e.date.to_fixed(r.getUTCMonth()+1):e.date.to_fixed(r.getMonth()+1);case"%j":return a?r.getUTCDate():r.getDate();case"%n":return a?r.getUTCMonth()+1:r.getMonth()+1;case"%y":return a?e.date.to_fixed(r.getUTCFullYear()%100):e.date.to_fixed(r.getFullYear()%100);case"%Y":return a?r.getUTCFullYear():r.getFullYear();case"%D":return a?e.locale.date.day_short[r.getUTCDay()]:e.locale.date.day_short[r.getDay()];case"%l":return a?e.locale.date.day_full[r.getUTCDay()]:e.locale.date.day_full[r.getDay()];case"%M":return a?e.locale.date.month_short[r.getUTCMonth()]:e.locale.date.month_short[r.getMonth()];case"%F":return a?e.locale.date.month_full[r.getUTCMonth()]:e.locale.date.month_full[r.getMonth()];case"%h":return a?e.date.to_fixed((r.getUTCHours()+11)%12+1):e.date.to_fixed((r.getHours()+11)%12+1);case"%g":return a?(r.getUTCHours()+11)%12+1:(r.getHours()+11)%12+1;case"%G":return a?r.getUTCHours():r.getHours();case"%H":return a?e.date.to_fixed(r.getUTCHours()):e.date.to_fixed(r.getHours());case"%i":return a?e.date.to_fixed(r.getUTCMinutes()):e.date.to_fixed(r.getMinutes());case"%a":return a?r.getUTCHours()>11?"pm":"am":r.getHours()>11?"pm":"am";case"%A":return a?r.getUTCHours()>11?"PM":"AM":r.getHours()>11?"PM":"AM";case"%s":return a?e.date.to_fixed(r.getUTCSeconds()):e.date.to_fixed(r.getSeconds());case"%W":return a?e.date.to_fixed(e.date.getUTCISOWeek(r)):e.date.to_fixed(e.date.getISOWeek(r));default:return t}})}};e.date.str_to_date=function(t,a){return function(r){var o=[0,0,1,0,0,0];var s=r.match(/[a-zA-Z]+|[0-9]+/g);var n=t.match(/%[a-zA-Z]/g);for(var c=0;c<n.length;c++){switch(n[c]){case"%j":case"%d":o[2]=s[c]||1;break;case"%n":case"%m":o[1]=(s[c]||1)-1;break;case"%y":o[0]=s[c]*1+(s[c]>50?1900:2e3);break;case"%g":case"%G":case"%h":case"%H":o[3]=s[c]||0;break;case"%i":o[4]=s[c]||0;break;case"%Y":o[0]=s[c]||0;break;case"%a":case"%A":o[3]=o[3]%12+((s[c]||"").toLowerCase()=="am"?0:12);break;case"%s":o[5]=s[c]||0;break;case"%M":o[1]=e.locale.date.month_short_hash[s[c]]||0;break;case"%F":o[1]=e.locale.date.month_full_hash[s[c]]||0;break;default:break}}if(a){return new Date(Date.UTC(o[0],o[1],o[2],o[3],o[4],o[5]))}return new Date(o[0],o[1],o[2],o[3],o[4],o[5])}}});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_daytimeline.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){(function(){if(!e._inited_multisection_copies){e.attachEvent("onEventIdChange",function(e,t){var a=this._multisection_copies;if(!a)return;if(a[e]&&!a[t]){var r=a[e];delete a[e];a[t]=r}});e._inited_multisection_copies=true}e._register_copies_array=function(e){for(var t=0;t<e.length;t++)this._register_copy(e[t])};e._register_copy=function(e){if(!this._multisection_copies){return}if(!this._multisection_copies[e.id]){this._multisection_copies[e.id]={}}var t=e[this._get_section_property()];var a=this._multisection_copies[e.id];a[t]=e};e._get_copied_event=function(t,a){if(!this._multisection_copies[t])return null;if(this._multisection_copies[t][a])return this._multisection_copies[t][a];var r=this._multisection_copies[t];if(e._drag_event&&e._drag_event._orig_section&&r[e._drag_event._orig_section]){return r[e._drag_event._orig_section]}else{var _=Infinity,n=null;for(var i in r){if(r[i]._sorder<_){n=r[i];_=r[i]._sorder}}return n}};e._clear_copied_events=function(){this._multisection_copies={}};e._restore_render_flags=function(t){var a=this._get_section_property();for(var r=0;r<t.length;r++){var _=t[r];var n=e._get_copied_event(_.id,_[a]);if(n){for(var i in n){if(i.indexOf("_")===0){_[i]=n[i]}}}}};var t=e.createTimelineView;e.createTimelineView=function(a){if(a.render!="days"){t.apply(this,arguments);return}var r=a.name;var _=a.y_property="timeline-week"+r;a.y_unit=[];a.render="bar";a.days=a.days||7;t.call(this,a);e.templates[r+"_scalex_class"]=function(){};e.templates[r+"_scaley_class"]=function(){};e.templates[r+"_scale_label"]=function(t,a,r){return e.templates.day_date(a)};e.date[r+"_start"]=function(t){t=e.date.week_start(t);t=e.date.add(t,a.x_step*a.x_start,a.x_unit);return t};e.date["add_"+r]=function(t,r){return e.date.add(t,r*a.days,"day")};function n(){var t=new Date(e.getState().date);var _=e.date[r+"_start"](t);_=e.date.date_part(_);var n=[];var i=e.matrix[r];i.y_unit=n;i.order={};for(var d=0;d<a.days;d++){n.push({key:+_,label:_});i.order[i.y_unit[d].key]=d;_=e.date.add(_,1,"day")}}var i=e._renderMatrix;e._renderMatrix=function(e,t){if(e){n()}i.apply(this,arguments)};function d(e){var t={};for(var a in e)t[a]=e[a];return t}var s=e.checkCollision;e.checkCollision=function(t){if(t[_]){var t=d(t);delete t[_]}return s.apply(e,[t])};e.attachEvent("onBeforeDrag",function(t,a,r){var _=r.target||r.srcElement;var n=e._getClassName(_);if(a=="resize"){if(n.indexOf("dhx_event_resize_end")<0){e._w_line_drag_from_start=true}else{e._w_line_drag_from_start=false}}else if(a=="move"){if(n.indexOf("no_drag_move")>=0){return false}}return true});var o=e["mouse_"+r];e["mouse_"+r]=function(t){var a;if(this._drag_event)a=this._drag_event._move_delta;var _=e.matrix[this._mode];if(_.scrollable&&!t.converted){t.converted=1;t.x-=-_._x_scroll;t.y+=_._y_scroll}if(a===undefined&&e._drag_mode=="move"){var n={y:t.y};e._resolve_timeline_section(_,n);var i=t.x-_.dx;var d=new Date(n.section);y(e._timeline_drag_date(_,i),d);var s=e._drag_event;var f=this.getEvent(this._drag_id);if(f){s._move_delta=(f.start_date-d)/6e4;if(this.config.preserve_length&&t._ignores){s._move_delta=this._get_real_event_length(f.start_date,d,_);s._event_length=this._get_real_event_length(f.start_date,f.end_date,_)}}}var t=o.apply(e,arguments);if(e._drag_mode&&e._drag_mode!="move"){var v=null;if(e._drag_event&&e._drag_event["timeline-week"+r]){v=new Date(e._drag_event["timeline-week"+r])}else{v=new Date(t.section)}t.y+=Math.round((v-e.date.date_part(new Date(e._min_date)))/(1e3*60*this.config.time_step));if(e._drag_mode=="resize"){t.resize_from_start=e._w_line_drag_from_start}}else{if(e._drag_event){var l=Math.floor(Math.abs(t.y/(24*60/e.config.time_step)));l*=t.y>0?1:-1;t.y=t.y%(24*60/e.config.time_step);var c=e.date.date_part(new Date(e._min_date));if(c.valueOf()!=new Date(t.section).valueOf()){t.x=Math.floor((t.section-c)/(24*60*6e4));t.x+=l}}}return t};e.attachEvent("onEventCreated",function(t,a){if(e._events[t]){delete e._events[t][_]}return true});e.attachEvent("onBeforeEventChanged",function(t,a,r,n){if(e._events[t.id]){delete e._events[t.id][_]}return true});var f=e._update_timeline_section;e._update_timeline_section=function(t){var a,_;if(this._mode==r){a=t.event;if(a){_=e._get_copied_event(a.id,e.date.day_start(new Date(a.start_date.valueOf())));if(_){t.event._sorder=_._sorder;t.event._count=_._count}}}var n=f.apply(this,arguments);if(a&&_){_._count=a._count;_._sorder=a._sorder}};var v=e.render_view_data;e.render_view_data=function(t,a){if(this._mode==r){if(t){t=p(t);e._restore_render_flags(t)}}return v.apply(e,[t,a])};var l=e.get_visible_events;e.get_visible_events=function(){if(this._mode==r){this._clear_copied_events();e._max_date=e.date.date_part(e.date.add(e._min_date,a.days,"day"));var t=l.apply(e,arguments);t=p(t);e._register_copies_array(t);return t}return l.apply(e,arguments)};var c=e.addEventNow;e.addEventNow=function(t){if(e.getState().mode==r){if(t[_]){var a=new Date(t[_]);u(a,t.start_date);u(a,t.end_date)}else{var n=new Date(t.start_date);t[_]=+e.date.date_part(n)}}return c.apply(e,arguments)};function u(e,t){t.setDate(1);t.setFullYear(e.getFullYear());t.setMonth(e.getMonth());t.setDate(e.getDate())}function p(t){var a=[];for(var r=0;r<t.length;r++){var _=g(t[r]);if(!e.isOneDayEvent(_)){var n=new Date(Math.min(+_.end_date,+e._max_date)),i=new Date(Math.max(+_.start_date,+e._min_date));var d=[];while(+i<+n){var s=g(_);s.start_date=i;s.end_date=new Date(Math.min(+w(s.start_date),+n));i=w(i);h(s);a.push(s);d.push(s)}m(d,_)}else{h(_);a.push(_)}}return a}function m(e,t){var a=false;var r=false;for(var _=0,n=e.length;_<n;_++){var i=e[_];a=+i._w_start_date==+t.start_date;r=+i._w_end_date==+t.end_date;i._no_resize_start=i._no_resize_end=true;if(a){i._no_resize_start=false}if(r)i._no_resize_end=false}}function g(t){var a=e.getEvent(t.event_pid);if(a&&a.isPrototypeOf(t)){t=e._copy_event(t);delete t.event_length;delete t.event_pid;delete t.rec_pattern;delete t.rec_type}else{t=e._lame_clone(t)}return t}function h(t){if(t._w_start_date&&t._w_end_date){return}var a=e.date,r=t._w_start_date=new Date(t.start_date),n=t._w_end_date=new Date(t.end_date);t[_]=+a.date_part(t.start_date);if(!t._count)t._count=1;if(!t._sorder)t._sorder=0;var i=n-r;t.start_date=new Date(e._min_date);y(r,t.start_date);t.end_date=new Date(+t.start_date+i);if(r.getTimezoneOffset()!=n.getTimezoneOffset()){t.end_date=new Date(t.end_date.valueOf()+(r.getTimezoneOffset()-n.getTimezoneOffset())*(1e3*60))}}function y(e,t){t.setMinutes(e.getMinutes());t.setHours(e.getHours())}function w(t){var a=e.date.add(t,1,"day");a=e.date.date_part(a);return a}var D=e._render_marked_timespan;e._render_marked_timespan=function(){if(e._mode==r){return}return D.apply(this,arguments)}}})()});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_editors.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e.form_blocks["combo"]={render:function(e){if(!e.cached_options)e.cached_options={};var t="";t+="<div class='"+e.type+"' style='height:"+(e.height||20)+"px;' ></div>";return t},set_value:function(t,n,a,o){(function(){a();var n=e.attachEvent("onAfterLightbox",function(){a();e.detachEvent(n)});function a(){if(t._combo&&t._combo.DOMParent){var e=t._combo;if(e.unload){e.unload()}else if(e.destructor){e.destructor()}e.DOMParent=e.DOMelem=null}}})();window.dhx_globalImgPath=o.image_path||"/";t._combo=new dhtmlXCombo(t,o.name,t.offsetWidth-8);if(o.onchange)t._combo.attachEvent("onChange",o.onchange);if(o.options_height)t._combo.setOptionHeight(o.options_height);var i=t._combo;i.enableFilteringMode(o.filtering,o.script_path||null,!!o.cache);if(!o.script_path){var c=[];for(var l=0;l<o.options.length;l++){var r=o.options[l];var d=[r.key,r.label,r.css];c.push(d)}i.addOption(c);if(a[o.map_to]){var u=i.getIndexByValue(a[o.map_to]);i.selectOption(u)}}else{var s=a[o.map_to];if(s){if(o.cached_options[s]){i.addOption(s,o.cached_options[s]);i.disable(1);i.selectOption(0);i.disable(0)}else{e.$ajax.get(o.script_path+"?id="+s+"&uid="+e.uid(),function(t){var n=t.xmlDoc.responseText;var a;try{var c=JSON.parse(n);a=c.options[0].text}catch(n){var l=e.$ajax.xpath("//option",t.xmlDoc)[0];a=l.childNodes[0].nodeValue}o.cached_options[s]=a;i.addOption(s,a);i.disable(1);i.selectOption(0);i.disable(0)})}}else{i.setComboValue("")}}},get_value:function(e,t,n){var a=e._combo.getSelectedValue();if(n.script_path){n.cached_options[a]=e._combo.getSelectedText()}return a},focus:function(e){}};e.form_blocks["radio"]={render:function(t){var n="";n+="<div class='dhx_cal_ltext dhx_cal_radio"+"' style='height:"+t.height+"px;' >";for(var a=0;a<t.options.length;a++){var o=e.uid();n+="<input id='"+o+"' type='radio' name='"+t.name+"' value='"+t.options[a].key+"'><label for='"+o+"'>"+" "+t.options[a].label+"</label>";if(t.vertical)n+="<br/>"}n+="</div>";return n},set_value:function(e,t,n,a){var o=e.getElementsByTagName("input");for(var i=0;i<o.length;i++){o[i].checked=false;var c=n[a.map_to]||t;if(o[i].value==c){o[i].checked=true}}},get_value:function(e,t,n){var a=e.getElementsByTagName("input");for(var o=0;o<a.length;o++){if(a[o].checked){return a[o].value}}},focus:function(e){}};e.form_blocks["checkbox"]={render:function(t){if(e.config.wide_form)return'<div class="dhx_cal_wide_checkbox" '+(t.height?"style='height:"+t.height+"px;'":"")+"></div>";else return""},set_value:function(t,n,a,o){t=document.getElementById(o.id);var i=e.uid();var c=typeof o.checked_value!="undefined"?n==o.checked_value:!!n;t.className+=" dhx_cal_checkbox";var l="<input id='"+i+"' type='checkbox' value='true' name='"+o.name+"'"+(c?"checked='true'":"")+"'>";var r="<label for='"+i+"'>"+(e.locale.labels["section_"+o.name]||o.name)+"</label>";if(e.config.wide_form){t.innerHTML=r;t.nextSibling.innerHTML=l}else t.innerHTML=l+r;if(o.handler){var d=t.getElementsByTagName("input")[0];d.onclick=o.handler}},get_value:function(e,t,n){e=document.getElementById(n.id);var a=e.getElementsByTagName("input")[0];if(!a)a=e.nextSibling.getElementsByTagName("input")[0];return a.checked?n.checked_value||true:n.unchecked_value||false},focus:function(e){}}});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_expand.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e.expand=function(){if(!e.callEvent("onBeforeExpand",[]))return;var t=e._obj;do{t._position=t.style.position||"";t.style.position="static"}while((t=t.parentNode)&&t.style);t=e._obj;t.style.position="absolute";t._width=t.style.width;t._height=t.style.height;t.style.width=t.style.height="100%";t.style.top=t.style.left="0px";var o=document.body;o.scrollTop=0;o=o.parentNode;if(o)o.scrollTop=0;document.body._overflow=document.body.style.overflow||"";document.body.style.overflow="hidden";e._maximize();e.callEvent("onExpand",[])};e.collapse=function(){if(!e.callEvent("onBeforeCollapse",[]))return;var t=e._obj;do{t.style.position=t._position}while((t=t.parentNode)&&t.style);t=e._obj;t.style.width=t._width;t.style.height=t._height;document.body.style.overflow=document.body._overflow;e._maximize();e.callEvent("onCollapse",[])};e.attachEvent("onTemplatesReady",function(){var t=document.createElement("div");t.className="dhx_expand_icon";e.toggleIcon=t;e._obj.appendChild(t);t.onclick=function(){if(!e.expanded)e.expand();else e.collapse()}});e._maximize=function(){this.expanded=!this.expanded;this.toggleIcon.style.backgroundPosition="0 "+(this.expanded?"0":"18")+"px";var t=["left","top"];for(var o=0;o<t.length;o++){var n=e.xy["margin_"+t[o]];var i=e["_prev_margin_"+t[o]];if(e.xy["margin_"+t[o]]){e["_prev_margin_"+t[o]]=e.xy["margin_"+t[o]];e.xy["margin_"+t[o]]=0}else{if(i){e.xy["margin_"+t[o]]=e["_prev_margin_"+t[o]];delete e["_prev_margin_"+t[o]]}}}e.setCurrentView()}});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_grid_view.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){(function(){e._grid={names:{},sort_rules:{int:function(e,t,r){return r(e)*1<r(t)*1?1:-1},str:function(e,t,r){return r(e)<r(t)?1:-1},date:function(e,t,r){return new Date(r(e))<new Date(r(t))?1:-1}},_getObjName:function(e){return"grid_"+e},_getViewName:function(e){return e.replace(/^grid_/,"")}}})();e.createGridView=function(t){var r=t.name||"grid";var i=e._grid._getObjName(r);e._grid.names[r]=r;e.config[r+"_start"]=t.from||new Date(0);e.config[r+"_end"]=t.to||new Date(9999,1,1);e[i]=t;e[i].defPadding=8;e[i].columns=e[i].fields;e[i].unit=t.unit||"month";e[i].step=t.step||1;delete e[i].fields;function a(e){return!(e!==undefined&&(e*1!=e||e<0))}var d=e[i].columns;for(var _=0;_<d.length;_++){if(a(d[_].width))d[_].initialWidth=d[_].width;if(!a(d[_].paddingLeft))delete d[_].paddingLeft;if(!a(d[_].paddingRight))delete d[_].paddingRight}e[i].select=t.select===undefined?true:t.select;if(e.locale.labels[r+"_tab"]===undefined)e.locale.labels[r+"_tab"]=e[i].label||e.locale.labels.grid_tab;e[i]._selected_divs=[];e.date[r+"_start"]=function(r){if(e.date[t.unit+"_start"])return e.date[t.unit+"_start"](r);else return r};e.date["add_"+r]=function(t,r){return e.date.add(t,r*e[i].step,e[i].unit)};e.templates[r+"_date"]=function(t,r){if(e.config.rtl){return e.templates.day_date(r)+" - "+e.templates.day_date(t)}else{return e.templates.day_date(t)+" - "+e.templates.day_date(r)}};e.templates[r+"_full_date"]=function(t,i,a){if(e.isOneDayEvent(a)){return this[r+"_single_date"](t)}else if(e.config.rtl){return e.templates.day_date(i)+" &ndash; "+e.templates.day_date(t)}else{return e.templates.day_date(t)+" &ndash; "+e.templates.day_date(i)}};e.templates[r+"_single_date"]=function(t){return e.templates.day_date(t)+" "+this.event_date(t)};e.templates[r+"_field"]=function(e,t){return t[e]};e.attachEvent("onTemplatesReady",function(){e.attachEvent("onEventSelected",function(t){if(this._mode==r&&e[i].select){e._grid.selectEvent(t,r);return false}});e.attachEvent("onEventUnselected",function(t){if(this._mode==r&&e[i].select){e._grid.unselectEvent("",r)}});var t=e.render_data;e.render_data=function(a){if(this._mode==r)e._grid._fill_grid_tab(i);else return t.apply(this,arguments)};var a=e.render_view_data;e.render_view_data=function(){var t=e._els["dhx_cal_data"][0].lastChild;if(this._mode==r&&t){e._grid._gridScrollTop=t.scrollTop}return a.apply(this,arguments)}});e[r+"_view"]=function(t){e._grid._sort_marker=null;delete e._gridView;e._grid._gridScrollTop=0;e._rendered=[];e[i]._selected_divs=[];if(t){var a=null,d=null;var _=e[i];if(_.paging){a=e.date[r+"_start"](new Date(e._date));d=e.date["add_"+r](a,1)}else{a=e.config[r+"_start"];d=e.config[r+"_end"]}e._min_date=a;e._max_date=d;e._grid.set_full_view(i);var n="";if(+a>+new Date(0)&&+d<+new Date(9999,1,1)){n=e.templates[r+"_date"](a,d)}var l=e._getNavDateElement();if(l){l.innerHTML=n}e._gridView=i}else{}}};e.dblclick_dhx_grid_area=function(){if(!this.config.readonly&&this.config.dblclick_create)this.addEventNow()};if(e._click.dhx_cal_header){e._old_header_click=e._click.dhx_cal_header}e._click.dhx_cal_header=function(t){if(e._gridView){var r=t||window.event;var i=e._grid._get_target_column(r,e._gridView);e._grid._toggle_sort_state(e._gridView,i.id);e.clear_view();e._grid._fill_grid_tab(e._gridView)}else if(e._old_header_click)return e._old_header_click.apply(this,arguments)};e._grid.selectEvent=function(t,r){if(e.callEvent("onBeforeRowSelect",[t])){var i=e._grid._getObjName(r);e.for_rendered(t,function(t){t.className+=" dhx_grid_event_selected";e[i]._selected_divs.push(t)})}};e._grid._unselectDiv=function(e){e.className=e.className.replace(/ dhx_grid_event_selected/,"")};e._grid.unselectEvent=function(t,r){var i=e._grid._getObjName(r);if(!i||!e[i]._selected_divs)return;if(!t){for(var a=0;a<e[i]._selected_divs.length;a++)e._grid._unselectDiv(e[i]._selected_divs[a]);e[i]._selected_divs=[]}else{for(var a=0;a<e[i]._selected_divs.length;a++)if(e[i]._selected_divs[a].getAttribute("event_id")==t){e._grid._unselectDiv(e[i]._selected_divs[a]);e[i]._selected_divs.slice(a,1);break}}};e._grid._get_target_column=function(t,r){var i=t.originalTarget||t.srcElement;var a=e._getClassName(i);if(a=="dhx_grid_view_sort")i=i.parentNode;var d=0;for(var _=0;_<i.parentNode.childNodes.length;_++){if(i.parentNode.childNodes[_]==i){d=_;break}}return e[r].columns[d]};e._grid._get_sort_state=function(t){var r=e[t];return r.sort};e._grid._toggle_sort_state=function(t,r){var i=this._get_sort_state(t);var a=e[t];if(i&&i.column==r){i.direction=i.direction=="asc"?"desc":"asc"}else{a.sort={column:r,direction:"desc"}}};e._grid._get_sort_value_for_column=function(e){var t=null;if(e.template){var r=e.template;t=function(e){return r(e.start_date,e.end_date,e)}}else{var i=e.id;if(i=="date")i="start_date";t=function(e){return e[i]}}return t};e._grid.draw_sort_marker=function(t,r){if(e._grid._sort_marker){e._grid._sort_marker.className=e._grid._sort_marker.className.replace(/( )?dhx_grid_sort_(asc|desc)/,"");e._grid._sort_marker.removeChild(e._grid._sort_marker.lastChild)}if(r){var i=e._grid._get_column_node(t,r.column);i.className+=" dhx_grid_sort_"+r.direction;e._grid._sort_marker=i;var a="<div class='dhx_grid_view_sort' style='left:"+(+i.style.width.replace("px","")-15+i.offsetLeft)+"px'>&nbsp;</div>";i.innerHTML+=a}};e._grid.sort_grid=function(t){t=t||{direction:"desc",value:function(e){return e.start_date},rule:e._grid.sort_rules["date"]};var r=e.get_visible_events();r.sort(function(e,r){return t.rule(e,r,t.value)});if(t.direction=="asc"){r=r.reverse()}return r};e._grid.set_full_view=function(t){if(t){var r=e.locale.labels;var i=e._grid._print_grid_header(t);e._els["dhx_cal_header"][0].innerHTML=i;e._table_view=true;e.set_sizes()}};e._grid._calcPadding=function(t,r){return(t.paddingLeft!==undefined?1*t.paddingLeft:e[r].defPadding)+(t.paddingRight!==undefined?1*t.paddingRight:e[r].defPadding)};e._grid._getStyles=function(e,t){var r=[],i="";for(var a=0;t[a];a++){i=t[a]+":";switch(t[a]){case"text-align":if(e.align)r.push(i+e.align);break;case"vertical-align":if(e.valign)r.push(i+e.valign);break;case"padding-left":if(e.paddingLeft!==undefined)r.push(i+(e.paddingLeft||"0")+"px");break;case"padding-right":if(e.paddingRight!==undefined)r.push(i+(e.paddingRight||"0")+"px");break}}return r};e._grid._get_column_node=function(t,r){var i=-1;for(var a=0;a<t.length;a++){if(t[a].id==r){i=a;break}}if(i<0)return null;return e._obj.querySelectorAll(".dhx_grid_line > div")[i]};e._grid._get_sort_rule=function(t){var r=e[t];var i=this._get_sort_state(t);var a;if(i){var d;for(var _=0;_<r.columns.length;_++){if(r.columns[_].id==i.column){d=r.columns[_];break}}if(d){var n=e._grid._get_sort_value_for_column(d);var l=d.sort;if(typeof l!="function"){l=e._grid.sort_rules[l]||e._grid.sort_rules["str"]}a={direction:i.direction,rule:l,value:n}}}return a};e._grid._fill_grid_tab=function(t){var r=e[t];var i=this._get_sort_state(t);var a=this._get_sort_rule(t);if(a){e._grid.draw_sort_marker(r.columns,i)}var d=e._date;var _=e._grid.sort_grid(a);var n=e[t].columns;var l="<div>";var s=-2;for(var g=0;g<n.length;g++){var o=e._grid._calcPadding(n[g],t);s+=n[g].width+o;if(g<n.length-1){var c=e.config.rtl?"right":"left";l+="<div class='dhx_grid_v_border' style='"+c+":"+s+"px'></div>"}}l+="</div>";var f=e._waiAria.gridAttrString();l+="<div class='dhx_grid_area'><table "+f+">";for(var g=0;g<_.length;g++){l+=e._grid._print_event_row(_[g],t)}l+="</table></div>";e._els["dhx_cal_data"][0].innerHTML=l;e._els["dhx_cal_data"][0].lastChild.scrollTop=e._grid._gridScrollTop||0;var u=e._els["dhx_cal_data"][0].getElementsByTagName("tr");e._rendered=[];for(var g=0;g<u.length;g++){e._rendered[g]=u[g]}};e._grid._getCellContent=function(t,r){var i;var a=e.getState().mode;if(r.template){i=r.template(t.start_date,t.end_date,t)}else if(r.id=="date"){i=e.templates[a+"_full_date"](t.start_date,t.end_date,t)}else if(r.id=="start_date"||r.id=="end_date"){i=e.templates[a+"_single_date"](t[r.id])}else{i=e.templates[a+"_field"](r.id,t)}return i};e._grid._print_event_row=function(t,r){var i=[];if(t.color)i.push("background:"+t.color);if(t.textColor)i.push("color:"+t.textColor);if(t._text_style)i.push(t._text_style);if(e[r]["rowHeight"])i.push("height:"+e[r]["rowHeight"]+"px");var a="";if(i.length){a="style='"+i.join(";")+"'"}var d=e[r].columns;var _=e.templates.event_class(t.start_date,t.end_date,t);var n=e._waiAria.gridRowAttrString(t);var l="<tr "+n+" class='dhx_grid_event"+(_?" "+_:"")+"' event_id='"+t.id+"' "+a+">";var s=e._grid._getViewName(r);var g=["text-align","vertical-align","padding-left","padding-right"];for(var o=0;o<d.length;o++){var c=e._grid._getCellContent(t,d[o]);var f=e._waiAria.gridCellAttrString(t,d[o],c);var u=e._grid._getStyles(d[o],g);var v=d[o].css?' class="'+d[o].css+'"':"";l+="<td "+f+" style='width:"+d[o].width+"px;"+u.join(";")+"' "+v+">"+c+"</td>"}l+="<td class='dhx_grid_dummy'></td></tr>";return l};e._grid._print_grid_header=function(t){var r="<div class='dhx_grid_line'>";var i=e[t].columns;var a=[];var d=i.length;var _=e._obj.clientWidth-2*i.length-20;for(var n=0;n<i.length;n++){var l=i[n].initialWidth*1;if(!isNaN(l)&&i[n].initialWidth!==""&&i[n].initialWidth!==null&&typeof i[n].initialWidth!="boolean"){d--;_-=l;a[n]=l}else{a[n]=null}}var s=Math.floor(_/d);var g=["text-align","padding-left","padding-right"];for(var o=0;o<i.length;o++){var c=!a[o]?s:a[o];i[o].width=c-e._grid._calcPadding(i[o],t);var f=e._grid._getStyles(i[o],g);r+="<div style='width:"+(i[o].width-1)+"px;"+f.join(";")+"'>"+(i[o].label===undefined?i[o].id:i[o].label)+"</div>"}r+="</div>";return r}});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_html_templates.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e.attachEvent("onTemplatesReady",function(){var n=document.body.getElementsByTagName("DIV");for(var t=0;t<n.length;t++){var a=n[t].className||"";a=a.split(":");if(a.length==2&&a[0]=="template"){var r='return "'+(n[t].innerHTML||"").replace(/\"/g,'\\"').replace(/[\n\r]+/g,"")+'";';r=unescape(r).replace(/\{event\.([a-z]+)\}/g,function(e,n){return'"+ev.'+n+'+"'});e.templates[a[1]]=Function("start","end","ev",r);n[t].style.display="none"}}})});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_key_nav.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
(function(){function e(e){e.config.key_nav=true;e.config.key_nav_step=30;e.addShortcut=function(e,a,i){var n=t(i);if(n){n.prototype.bind(e,a)}};e.getShortcutHandler=function(a,i){var n=t(i);if(n){var r=e.$keyboardNavigation.shortcuts.parse(a);if(r.length){return n.prototype.findHandler(r[0])}}};e.removeShortcut=function(e,a){var i=t(a);if(i){i.prototype.unbind(e)}};e.focus=function(){if(!e.config.key_nav){return}var t=e.$keyboardNavigation.dispatcher;t.enable();var a=t.getActiveNode();if(!a||a instanceof e.$keyboardNavigation.MinicalButton||a instanceof e.$keyboardNavigation.MinicalCell){t.setDefaultNode()}else{t.focusNode(t.getActiveNode())}};function t(t){var a={minicalButton:e.$keyboardNavigation.MinicalButton,minicalDate:e.$keyboardNavigation.MinicalCell,scheduler:e.$keyboardNavigation.SchedulerNode,dataArea:e.$keyboardNavigation.DataArea,timeSlot:e.$keyboardNavigation.TimeSlot,event:e.$keyboardNavigation.Event};var i={};for(var n in a)i[n.toLowerCase()]=a[n];t=(t+"").toLowerCase();return i[t]||a.scheduler}e.$keyboardNavigation={};e._compose=function(){var e=Array.prototype.slice.call(arguments,0);var t={};for(var a=0;a<e.length;a++){var i=e[a];if(typeof i=="function"){i=new i}for(var n in i){t[n]=i[n]}}return t};e.$keyboardNavigation.shortcuts={createCommand:function(){return{modifiers:{shift:false,alt:false,ctrl:false,meta:false},keyCode:null}},parse:function(e){var t=[];var a=this.getExpressions(this.trim(e));for(var i=0;i<a.length;i++){var n=this.getWords(a[i]);var r=this.createCommand();for(var o=0;o<n.length;o++){if(this.commandKeys[n[o]]){r.modifiers[n[o]]=true}else if(this.specialKeys[n[o]]){r.keyCode=this.specialKeys[n[o]]}else{r.keyCode=n[o].charCodeAt(0)}}t.push(r)}return t},getCommandFromEvent:function(e){var t=this.createCommand();t.modifiers.shift=!!e.shiftKey;t.modifiers.alt=!!e.altKey;t.modifiers.ctrl=!!e.ctrlKey;t.modifiers.meta=!!e.metaKey;t.keyCode=e.which||e.keyCode;if(t.keyCode>=96&&t.keyCode<=105){t.keyCode-=48}var a=String.fromCharCode(t.keyCode);if(a){t.keyCode=a.toLowerCase().charCodeAt(0)}return t},getHashFromEvent:function(e){return this.getHash(this.getCommandFromEvent(e))},getHash:function(e){var t=[];for(var a in e.modifiers){if(e.modifiers[a]){t.push(a)}}t.push(e.keyCode);return t.join(this.junctionChar)},getExpressions:function(e){return e.split(this.junctionChar)},getWords:function(e){return e.split(this.combinationChar)},trim:function(e){return e.replace(/\s/g,"")},junctionChar:",",combinationChar:"+",commandKeys:{shift:16,alt:18,ctrl:17,meta:true},specialKeys:{backspace:8,tab:9,enter:13,esc:27,space:32,up:38,down:40,left:37,right:39,home:36,end:35,pageup:33,pagedown:34,delete:46,insert:45,plus:107,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123}};e.$keyboardNavigation.EventHandler={_handlers:null,findHandler:function(t){if(!this._handlers)this._handlers={};var a=e.$keyboardNavigation.shortcuts;var i=a.getHash(t);return this._handlers[i]},doAction:function(e,t){var a=this.findHandler(e);if(a){a.call(this,t);if(t.preventDefault)t.preventDefault();else t.returnValue=false}},bind:function(t,a){if(!this._handlers)this._handlers={};var i=e.$keyboardNavigation.shortcuts;var n=i.parse(t);for(var r=0;r<n.length;r++){this._handlers[i.getHash(n[r])]=a}},unbind:function(t){var a=e.$keyboardNavigation.shortcuts;var i=a.parse(t);for(var n=0;n<i.length;n++){if(this._handlers[a.getHash(i[n])]){delete this._handlers[a.getHash(i[n])]}}},bindAll:function(e){for(var t in e){this.bind(t,e[t])}},initKeys:function(){if(!this._handlers)this._handlers={};if(this.keys){this.bindAll(this.keys)}}};(function(){e.$keyboardNavigation.getFocusableNodes=e._getFocusableNodes;e.$keyboardNavigation.trapFocus=function t(a,i){if(i.keyCode!=9)return false;var n=e.$keyboardNavigation.getFocusableNodes(a);var r=document.activeElement;var o=-1;for(var d=0;d<n.length;d++){if(n[d]==r){o=d;break}}var s,l;if(i.shiftKey){s=o<=0?n[n.length-1]:o-1;l=n[s];if(l){l.focus();i.preventDefault();return true}}else{s=o>=n.length-1?0:o+1;l=n[s];if(l){l.focus();i.preventDefault();return true}}return false}})();e.$keyboardNavigation.marker={clear:function(){var t=e.$container.querySelectorAll(".dhx_focus_slot");for(var a=0;a<t.length;a++){t[a].parentNode.removeChild(t[a])}},createElement:function(){var e=document.createElement("div");e.setAttribute("tabindex",-1);e.className="dhx_focus_slot";return e},renderMultiple:function(t,a,i){var n=[];var r=new Date(t);var o=new Date(Math.min(a.valueOf(),e.date.add(e.date.day_start(new Date(t)),1,"day").valueOf()));while(r.valueOf()<a.valueOf()){n=n.concat(i.call(this,r,new Date(Math.min(o.valueOf(),a.valueOf()))));r=e.date.day_start(e.date.add(r,1,"day"));o=e.date.day_start(e.date.add(r,1,"day"));o=new Date(Math.min(o.valueOf(),a.valueOf()))}return n},render:function(t,a,i){this.clear();var n=[];var r=e.$keyboardNavigation.TimeSlot.prototype._modes;var o=e.$keyboardNavigation.TimeSlot.prototype._getMode();switch(o){case r.units:n=this.renderVerticalMarker(t,a,i);break;case r.timeline:n=this.renderTimelineMarker(t,a,i);break;case r.year:n=n.concat(this.renderMultiple(t,a,this.renderYearMarker));break;case r.month:n=this.renderMonthMarker(t,a);break;case r.weekAgenda:n=n.concat(this.renderMultiple(t,a,this.renderWeekAgendaMarker));break;case r.list:n=this.renderAgendaMarker(t,a);break;case r.dayColumns:n=n.concat(this.renderMultiple(t,a,this.renderVerticalMarker));break}this.addWaiAriaLabel(n,t,a,i);this.addDataAttributes(n,t,a,i);for(var d=n.length-1;d>=0;d--){if(n[d].offsetWidth){return n[d]}}return null},addDataAttributes:function(t,a,i,n){var r=e.date.date_to_str(e.config.api_date);var o=r(a),d=r(i);for(var s=0;s<t.length;s++){t[s].setAttribute("data-start-date",o);t[s].setAttribute("data-end-date",d);if(n){t[s].setAttribute("data-section",n)}}},addWaiAriaLabel:function(t,a,i,n){var r="";var o=e.getState();var d=o.mode;var s=false;r+=e.templates.day_date(a);if(e.date.day_start(new Date(a)).valueOf()!=a.valueOf()){r+=" "+e.templates.hour_scale(a);s=true}if(e.date.day_start(new Date(a)).valueOf()!=e.date.day_start(new Date(i)).valueOf()){r+=" - "+e.templates.day_date(i);if(s||e.date.day_start(new Date(i)).valueOf()!=i.valueOf()){r+=" "+e.templates.hour_scale(i)}}if(n){if(e.matrix&&e.matrix[d]){r+=", "+e.templates[d+"_scale_label"](n.key,n.label,n)}else if(e._props&&e._props[d]){r+=", "+e.templates[d+"_scale_text"](n.key,n.label,n)}}for(var l=0;l<t.length;l++){e._waiAria.setAttributes(t[l],{"aria-label":r,"aria-live":"polite"})}},renderWeekAgendaMarker:function(t,a){var i=e.$container.querySelectorAll(".dhx_wa_day_cont .dhx_wa_scale_bar");var n=e.date.week_start(new Date(e.getState().min_date));var r=-1;var o=e.date.day_start(new Date(t));for(var d=0;d<i.length;d++){r++;if(e.date.day_start(new Date(n)).valueOf()==o.valueOf()){break}else{n=e.date.add(n,1,"day")}}if(r!=-1)return this._wrapDiv(i[r]);return[]},_wrapDiv:function(e){var t=this.createElement();t.style.top=e.offsetTop+"px";t.style.left=e.offsetLeft+"px";t.style.width=e.offsetWidth+"px";t.style.height=e.offsetHeight+"px";e.appendChild(t);return[t]},renderYearMarker:function(t,a){var i=e._get_year_cell(t);i.style.position="relative";var n=this.createElement();n.style.top="0px";n.style.left="0px";n.style.width="100%";n.style.height="100%";i.appendChild(n);return[n]},renderAgendaMarker:function(t,a){var i=this.createElement();i.style.height="1px";i.style.width="100%";i.style.opacity=1;i.style.top="0px";i.style.left="0px";e.$container.querySelector(".dhx_cal_data").appendChild(i);return[i]},renderTimelineMarker:function(t,a,i){var n=e._lame_copy({},e.matrix[e._mode]);var r=n._scales;n.round_position=false;var o=[];var d=t?new Date(t):e._min_date;var s=a?new Date(a):e._max_date;if(d.valueOf()<e._min_date.valueOf())d=new Date(e._min_date);if(s.valueOf()>e._max_date.valueOf())s=new Date(e._max_date);if(!n._trace_x)return o;for(var l=0;l<n._trace_x.length;l++){if(e._is_column_visible(n._trace_x[l]))break}if(l==n._trace_x.length)return o;var u=r[i];if(!(d<a&&s>t))return o;var c=this.createElement();var f=e._timeline_getX({start_date:t},false,n)-1;var v=e._timeline_getX({start_date:a},false,n)-1;var h=n._section_height[i]-1||n.dy-1;var _=0;if(e._isRender("cell")){_=u.offsetTop;f+=n.dx;v+=n.dx;u=e.$container.querySelector(".dhx_cal_data")}else{}var g=Math.max(1,v-f-1);c.style.cssText="height: "+h+"px; left: "+f+"px; width: "+g+"px; top: "+_+"px;";u.appendChild(c);o.push(c);return o},renderMonthCell:function(t){var a=e.$container.querySelectorAll(".dhx_month_head");var i=[];for(var n=0;n<a.length;n++){i.push(a[n].parentNode)}var r=e.date.week_start(new Date(e.getState().min_date));var o=-1;var d=0;var s=-1;var l=r;var u=e.date.day_start(new Date(t));for(var n=0;n<i.length;n++){o++;if(s==6){d++;s=0}else{s++}if(e.date.day_start(new Date(l)).valueOf()==u.valueOf()){break}else{l=e.date.add(l,1,"day")}}if(o==-1){return[]}var c=e._colsS[s];var f=e._colsS.heights[d];var v=this.createElement();v.style.top=f+"px";v.style.left=c+"px";v.style.width=e._cols[s]+"px";v.style.height=(e._colsS.heights[d+1]-f||e._colsS.height)+"px";var h=e.$container.querySelector(".dhx_cal_data");var _=h.querySelector("table");if(_.nextSibling){h.insertBefore(v,_.nextSibling)}else{h.appendChild(v)}return v},renderMonthMarker:function(t,a){var i=[];var n=t;while(n.valueOf()<a.valueOf()){i.push(this.renderMonthCell(n));n=e.date.add(n,1,"day")}return i},renderVerticalMarker:function(t,a,i){var n=e.locate_holder_day(t);var r=[];var o=null;var d=e.config;if(e._ignores[n])return r;if(e._props&&e._props[e._mode]&&i){var s=e._props[e._mode];n=s.order[i];var l=s.order[i];if(!(s.days>1)){n=l;if(s.size&&n>s.position+s.size){n=0}}else{n=e.locate_holder_day(t)+l}}o=e.locate_holder(n);if(!o||o.querySelector(".dhx_scale_hour")){return document.createElement("div")}var u=Math.max(t.getHours()*60+t.getMinutes(),d.first_hour*60);var c=Math.min(a.getHours()*60+a.getMinutes(),d.last_hour*60);if(!c&&e.date.day_start(new Date(a)).valueOf()>e.date.day_start(new Date(t)).valueOf()){c=d.last_hour*60}if(c<=u){return[]}var f=this.createElement();var v=e.config.hour_size_px*d.last_hour+1;var h=60*60*1e3;f.style.top=Math.round((u*60*1e3-e.config.first_hour*h)*e.config.hour_size_px/h)%v+"px";f.style.lineHeight=f.style.height=Math.max(Math.round((c-u)*60*1e3*e.config.hour_size_px/h)%v,1)+"px";f.style.width="100%";o.appendChild(f);r.push(f);return r[0]}};e.$keyboardNavigation.SchedulerNode=function(){};e.$keyboardNavigation.SchedulerNode.prototype=e._compose(e.$keyboardNavigation.EventHandler,{getDefaultNode:function(){var t=new e.$keyboardNavigation.TimeSlot;if(!t.isValid()){t=t.fallback()}return t},_modes:{month:"month",year:"year",dayColumns:"dayColumns",timeline:"timeline",units:"units",weekAgenda:"weekAgenda",list:"list"},getMode:function(){var t=e.getState();var a=t.mode;if(e.matrix&&e.matrix[a]){return this._modes.timeline}else if(e._props&&e._props[a]){return this._modes.units}else if(a=="month"){return this._modes.month}else if(a=="year"){return this._modes.year}else if(a=="week_agenda"){return this._modes.weekAgenda}else if(a=="map"||a=="agenda"||e._grid&&e["grid_"+a]){return this._modes.list}else{return this._modes.dayColumns}},focus:function(){e.focus()},blur:function(){},disable:function(){e.$container.setAttribute("tabindex","0")},enable:function(){if(e.$container)e.$container.removeAttribute("tabindex")},isEnabled:function(){return e.$container.hasAttribute("tabindex")},_compareEvents:function(e,t){if(e.start_date.valueOf()==t.start_date.valueOf())return e.id>t.id?1:-1;return e.start_date.valueOf()>t.start_date.valueOf()?1:-1},_pickEvent:function(t,a,i,n){var r=e.getState();t=new Date(Math.max(r.min_date.valueOf(),t.valueOf()));a=new Date(Math.min(r.max_date.valueOf(),a.valueOf()));var o=e.getEvents(t,a);o.sort(this._compareEvents);if(n){o=o.reverse()}var d=!!i;for(var s=0;s<o.length&&d;s++){if(o[s].id==i){d=false}o.splice(s,1);s--}for(var s=0;s<o.length;s++){var l=new e.$keyboardNavigation.Event(o[s].id);if(l.getNode())return o[s]}return null},nextEventHandler:function(t){var a=e.$keyboardNavigation.dispatcher.activeNode;var i=t||a&&a.eventId;var n=null;if(i&&e.getEvent(i)){var r=e.getEvent(i);n=e.$keyboardNavigation.SchedulerNode.prototype._pickEvent(r.start_date,e.date.add(r.start_date,1,"year"),r.id,false)}if(!n&&!t){var o=e.getState();n=e.$keyboardNavigation.SchedulerNode.prototype._pickEvent(o.min_date,e.date.add(o.min_date,1,"year"),null,false)}if(n){var d=new e.$keyboardNavigation.Event(n.id);if(!d.isValid()){this.nextEventHandler(n.id)}else{if(a){a.blur()}e.$keyboardNavigation.dispatcher.setActiveNode(d)}}},prevEventHandler:function(t){var a=e.$keyboardNavigation.dispatcher.activeNode;var i=t||a&&a.eventId;var n=null;if(i&&e.getEvent(i)){var r=e.getEvent(i);n=e.$keyboardNavigation.SchedulerNode.prototype._pickEvent(e.date.add(r.end_date,-1,"year"),r.end_date,r.id,true)}if(!n&&!t){var o=e.getState();n=e.$keyboardNavigation.SchedulerNode.prototype._pickEvent(e.date.add(o.max_date,-1,"year"),o.max_date,null,true)}if(n){var d=new e.$keyboardNavigation.Event(n.id);if(!d.isValid()){this.prevEventHandler(n.id)}else{if(a){a.blur()}e.$keyboardNavigation.dispatcher.setActiveNode(d)}}},keys:{"alt+1, alt+2, alt+3, alt+4, alt+5, alt+6, alt+7, alt+8, alt+9":function(t){var a=e.$keyboardNavigation.HeaderCell.prototype.getNodes(".dhx_cal_navline .dhx_cal_tab");var i=t.key;if(i===undefined){i=t.keyCode-48}if(a[i*1-1]){a[i*1-1].click()}},"ctrl+left,meta+left":function(t){e._click.dhx_cal_prev_button()},"ctrl+right,meta+right":function(t){e._click.dhx_cal_next_button()},"ctrl+up,meta+up":function(t){var a=e.$container.querySelector(".dhx_cal_data");a.scrollTop-=20},"ctrl+down,meta+down":function(t){var a=e.$container.querySelector(".dhx_cal_data");a.scrollTop+=20},e:function(){this.nextEventHandler()},home:function(){e.setCurrentView(new Date)},"shift+e":function(){this.prevEventHandler()},"ctrl+enter,meta+enter":function(){e.addEventNow({start_date:new Date(e.getState().date)})},"ctrl+c,meta+c":function(t){e._key_nav_copy_paste(t)},"ctrl+v,meta+v":function(t){e._key_nav_copy_paste(t)},"ctrl+x,meta+x":function(t){e._key_nav_copy_paste(t)}}});e.$keyboardNavigation.SchedulerNode.prototype.bindAll(e.$keyboardNavigation.SchedulerNode.prototype.keys);e.$keyboardNavigation.KeyNavNode=function(){};e.$keyboardNavigation.KeyNavNode.prototype=e._compose(e.$keyboardNavigation.EventHandler,{isValid:function(){return true},fallback:function(){return null},moveTo:function(t){e.$keyboardNavigation.dispatcher.setActiveNode(t)},compareTo:function(e){if(!e)return false;for(var t in this){if(!!this[t]!=!!e[t])return false;var a=!!(this[t]&&this[t].toString);var i=!!(e[t]&&e[t].toString);if(i!=a)return false;if(!(i&&a)){if(e[t]!=this[t])return false}else{if(e[t].toString()!=this[t].toString())return false}}return true},getNode:function(){},focus:function(){var e=this.getNode();if(e){e.setAttribute("tabindex","-1");if(e.focus)e.focus()}},blur:function(){var e=this.getNode();if(e){e.setAttribute("tabindex","-1")}}});e.$keyboardNavigation.HeaderCell=function(e){this.index=e||0};e.$keyboardNavigation.HeaderCell.prototype=e._compose(e.$keyboardNavigation.KeyNavNode,{getNode:function(e){e=e||this.index||0;var t=this.getNodes();if(t[e])return t[e]},getNodes:function(t){t=t||[".dhx_cal_navline .dhx_cal_prev_button",".dhx_cal_navline .dhx_cal_next_button",".dhx_cal_navline .dhx_cal_today_button",".dhx_cal_navline .dhx_cal_tab"].join(", ");var a=Array.prototype.slice.call(e.$container.querySelectorAll(t));a.sort(function(e,t){return e.offsetLeft-t.offsetLeft});return a},_handlers:null,isValid:function(){return!!this.getNode(this.index)},fallback:function(){var t=this.getNode(0);if(!t){t=new e.$keyboardNavigation.TimeSlot}return t},keys:{left:function(){var t=this.index-1;if(t<0){t=this.getNodes().length-1}this.moveTo(new e.$keyboardNavigation.HeaderCell(t))},right:function(){var t=this.index+1;if(t>=this.getNodes().length){t=0}this.moveTo(new e.$keyboardNavigation.HeaderCell(t))},down:function(){this.moveTo(new e.$keyboardNavigation.TimeSlot)},enter:function(){var e=this.getNode();if(e){e.click()}}}});e.$keyboardNavigation.HeaderCell.prototype.bindAll(e.$keyboardNavigation.HeaderCell.prototype.keys);e.$keyboardNavigation.Event=function(t){this.eventId=null;if(e.getEvent(t)){var a=e.getEvent(t);this.start=new Date(a.start_date);this.end=new Date(a.end_date);this.section=this._getSection(a);this.eventId=t}};e.$keyboardNavigation.Event.prototype=e._compose(e.$keyboardNavigation.KeyNavNode,{_getNodes:function(){return Array.prototype.slice.call(e.$container.querySelectorAll("[event_id]"))},_modes:e.$keyboardNavigation.SchedulerNode.prototype._modes,getMode:e.$keyboardNavigation.SchedulerNode.prototype.getMode,_handlers:null,isValid:function(){return!!(e.getEvent(this.eventId)&&this.getNode())},fallback:function(){var t=this._getNodes()[0];var a=null;if(!t||!e._locate_event(t)){a=new e.$keyboardNavigation.TimeSlot}else{var i=e._locate_event(t);a=new e.$keyboardNavigation.Event(i)}return a},getNode:function(){function t(t){var a=t.getBoundingClientRect();var i=e.$container.querySelector(".dhx_cal_data").getBoundingClientRect();if(a.bottom<i.top||a.top>i.bottom){return false}return true}var a="[event_id='"+this.eventId+"']";var i=e.$keyboardNavigation.dispatcher.getInlineEditor(this.eventId);if(i){return i}else{if(e.isMultisectionEvent&&e.isMultisectionEvent(e.getEvent(this.eventId))){var n=e.$container.querySelectorAll(a);for(var r=0;r<n.length;r++){if(t(n[r])){return n[r]}}return n[0]}else{return e.$container.querySelector(a)}}},focus:function(){var t=e.getEvent(this.eventId);var a=e.getState();if(t.start_date.valueOf()>a.max_date.valueOf()||t.end_date.valueOf()<=a.min_date.valueOf()){e.setCurrentView(t.start_date)}e.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)},blur:function(){e.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this)},_getSection:function(t){var a=null;var i=e.getState().mode;if(e.matrix&&e.matrix[i]){var n=e.matrix[e.getState().mode];a=t[n.y_property]}else if(e._props&&e._props[i]){var r=e._props[i];a=t[r.map_to]}return a},_moveToSlot:function(t){var a=e.getEvent(this.eventId);if(a){var i=this._getSection(a);var n=new e.$keyboardNavigation.TimeSlot(a.start_date,null,i);this.moveTo(n.nextSlot(n,t))}else{this.moveTo(new e.$keyboardNavigation.TimeSlot)}},keys:{left:function(){this._moveToSlot("left")},right:function(){this._moveToSlot("right")},down:function(){if(this.getMode()==this._modes.list){e.$keyboardNavigation.SchedulerNode.prototype.nextEventHandler()}else{this._moveToSlot("down")}},space:function(){var t=this.getNode();if(t&&t.click){t.click()}else{this.moveTo(new e.$keyboardNavigation.TimeSlot)}},up:function(){if(this.getMode()==this._modes.list){e.$keyboardNavigation.SchedulerNode.prototype.prevEventHandler()}else{this._moveToSlot("up")}},delete:function(){if(e.getEvent(this.eventId)){e._click.buttons["delete"](this.eventId)}else{this.moveTo(new e.$keyboardNavigation.TimeSlot)}},enter:function(){if(e.getEvent(this.eventId)){e.showLightbox(this.eventId)}else{this.moveTo(new e.$keyboardNavigation.TimeSlot)}}}});e.$keyboardNavigation.Event.prototype.bindAll(e.$keyboardNavigation.Event.prototype.keys);e.$keyboardNavigation.TimeSlot=function(t,a,i,n){var r=e.getState();var o=e.matrix&&e.matrix[r.mode];if(!t){t=this.getDefaultDate()}if(!a){if(o){a=e.date.add(t,o.x_step,o.x_unit)}else{a=e.date.add(t,e.config.key_nav_step,"minute")}}this.section=i||this._getDefaultSection();this.start_date=new Date(t);this.end_date=new Date(a);this.movingDate=n||null};e.$keyboardNavigation.TimeSlot.prototype=e._compose(e.$keyboardNavigation.KeyNavNode,{_handlers:null,getDefaultDate:function(){var t;var a=e.getState();var i=e.matrix&&e.matrix[a.mode];if(i){t=e.date[i.name+"_start"](new Date(a.date));t=this.findVisibleColumn(t)}else{t=new Date(e.getState().min_date);t=this.findVisibleColumn(t);t.setHours(e.config.first_hour);if(!e._table_view){var n=e.$container.querySelector(".dhx_cal_data");if(n.scrollTop){t.setHours(e.config.first_hour+Math.ceil(n.scrollTop/e.config.hour_size_px))}}}return t},clone:function(t){return new e.$keyboardNavigation.TimeSlot(t.start_date,t.end_date,t.section,t.movingDate)},_getMultisectionView:function(){var t=e.getState();var a;if(e._props&&e._props[t.mode]){a=e._props[t.mode]}else if(e.matrix&&e.matrix[t.mode]){a=e.matrix[t.mode]}return a},_getDefaultSection:function(){var e=null;var t=this._getMultisectionView();if(t&&!e){e=this._getNextSection()}return e},_getNextSection:function(e,t){var a=this._getMultisectionView();var i=a.order[e];var n=i;if(i!==undefined){n=i+t}else{n=a.size&&a.position?a.position:0}n=n<0?n=(a.options||a.y_unit).length-1:n;var r=a.options||a.y_unit;if(r[n]){return r[n].key}else{return null}},isValid:function(){var t=e.getState();var a=!(this.start_date.valueOf()<t.min_date.valueOf()||this.start_date.valueOf()>=t.max_date.valueOf());if(!a)return false;if(!this.isVisible(this.start_date,this.end_date))return false;var i=this._getMultisectionView();if(i){return i.order[this.section]!==undefined}else{return true}},fallback:function(){var t=new e.$keyboardNavigation.TimeSlot;if(!t.isValid()){return new e.$keyboardNavigation.DataArea}else{return t}},getNodes:function(){return Array.prototype.slice.call(e.$container.querySelectorAll(".dhx_focus_slot"))},getNode:function(){return this.getNodes()[0]},focus:function(){e.$keyboardNavigation.marker.render(this.start_date,this.end_date,this.section);e.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this);e.$keyboardNavigation._pasteDate=this.start_date;e.$keyboardNavigation._pasteSection=this.section},blur:function(){e.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this);e.$keyboardNavigation.marker.clear()},_modes:e.$keyboardNavigation.SchedulerNode.prototype._modes,_getMode:e.$keyboardNavigation.SchedulerNode.prototype.getMode,addMonthDate:function(t,a,i){var n;switch(a){case"up":n=e.date.add(t,-1,"week");break;case"down":n=e.date.add(t,1,"week");break;case"left":n=e.date.day_start(e.date.add(t,-1,"day"));n=this.findVisibleColumn(n,-1);break;case"right":n=e.date.day_start(e.date.add(t,1,"day"));n=this.findVisibleColumn(n,1);break;default:n=e.date.day_start(new Date(t));break}var r=e.getState();if(t.valueOf()<r.min_date.valueOf()||!i&&t.valueOf()>=r.max_date.valueOf()){n=new Date(r.min_date)}return n},nextMonthSlot:function(t,a,i){var n,r;n=this.addMonthDate(t.start_date,a,i);n.setHours(e.config.first_hour);r=new Date(n);r.setHours(e.config.last_hour);return{start_date:n,end_date:r}},_alignTimeSlot:function(t,a,i,n){var r=new Date(a);while(r.valueOf()<t.valueOf()){r=e.date.add(r,n,i)}if(r.valueOf()>t.valueOf()){r=e.date.add(r,-n,i)}return r},nextTimelineSlot:function(t,a,i){var n=e.getState();var r=e.matrix[n.mode];var o=this._alignTimeSlot(t.start_date,e.date[r.name+"_start"](new Date(t.start_date)),r.x_unit,r.x_step);var d=this._alignTimeSlot(t.end_date,e.date[r.name+"_start"](new Date(t.end_date)),r.x_unit,r.x_step);if(d.valueOf()<=o.valueOf()){d=e.date.add(o,r.x_step,r.x_unit)}var s=this.clone(t);s.start_date=o;s.end_date=d;s.section=t.section||this._getNextSection();switch(a){case"up":s.section=this._getNextSection(t.section,-1);break;case"down":s.section=this._getNextSection(t.section,+1);break;case"left":s.start_date=this.findVisibleColumn(e.date.add(s.start_date,-r.x_step,r.x_unit),-1);s.end_date=e.date.add(s.start_date,r.x_step,r.x_unit);break;case"right":s.start_date=this.findVisibleColumn(e.date.add(s.start_date,r.x_step,r.x_unit),1);s.end_date=e.date.add(s.start_date,r.x_step,r.x_unit);break;default:break}if(s.start_date.valueOf()<n.min_date.valueOf()||s.start_date.valueOf()>=n.max_date.valueOf()){if(i&&s.start_date.valueOf()>=n.max_date.valueOf()){s.start_date=new Date(n.max_date)}else{s.start_date=e.date[n.mode+"_start"](e.date.add(n.date,a=="left"?-1:1,n.mode));s.end_date=e.date.add(s.start_date,r.x_step,r.x_unit)}}return s},nextUnitsSlot:function(t,a,i){var n=this.clone(t);n.section=t.section||this._getNextSection();var r=t.section||this._getNextSection();var o=e.getState();var d=e._props[o.mode];switch(a){case"left":r=this._getNextSection(t.section,-1);var s=d.size?d.size-1:d.options.length;if(d.days>1&&d.order[r]==s-1){if(e.date.add(t.start_date,-1,"day").valueOf()>=o.min_date.valueOf()){n=this.nextDaySlot(t,a,i)}}break;case"right":r=this._getNextSection(t.section,1);if(d.days>1&&!d.order[r]){if(e.date.add(t.start_date,1,"day").valueOf()<o.max_date.valueOf()){n=this.nextDaySlot(t,a,i)}}break;default:n=this.nextDaySlot(t,a,i);r=t.section;break}n.section=r;return n},_moveDate:function(t,a){var i=this.findVisibleColumn(e.date.add(t,a,"day"),a);i.setHours(t.getHours());i.setMinutes(t.getMinutes());return i},isBeforeLastHour:function(t,a){var i=t.getMinutes(),n=t.getHours(),r=e.config.last_hour;return n<r||!a&&((r==24||n==r)&&!i)},isAfterFirstHour:function(t,a){var i=t.getMinutes(),n=t.getHours(),r=e.config.first_hour,o=e.config.last_hour;return n>=r||!a&&(!i&&(!n&&o==24||n==o))},isInVisibleDayTime:function(e,t){return this.isBeforeLastHour(e,t)&&this.isAfterFirstHour(e,t)},nextDaySlot:function(t,a,i){var n,r;var o=e.config.key_nav_step;var d=this._alignTimeSlot(t.start_date,e.date.day_start(new Date(t.start_date)),"minute",o);var s=t.start_date;switch(a){case"up":n=e.date.add(d,-o,"minute");if(!this.isInVisibleDayTime(n,true)){if(!i||this.isInVisibleDayTime(s,true)){var l=true;if(i&&e.date.date_part(new Date(n)).valueOf()!=e.date.date_part(new Date(s)).valueOf())l=false;if(l)n=this.findVisibleColumn(e.date.add(t.start_date,-1,"day"),-1);n.setHours(e.config.last_hour);n.setMinutes(0);n=e.date.add(n,-o,"minute")}}r=e.date.add(n,o,"minute");break;case"down":n=e.date.add(d,o,"minute");var u=i?n:e.date.add(n,o,"minute");if(!this.isInVisibleDayTime(u,false)){if(!i||this.isInVisibleDayTime(s,false)){if(!i){n=this.findVisibleColumn(e.date.add(t.start_date,1,"day"),1);n.setHours(e.config.first_hour);n.setMinutes(0)}else{var l=true;if(e.date.date_part(new Date(s)).valueOf()==s.valueOf()){l=false}if(l){n=this.findVisibleColumn(e.date.add(t.start_date,1,"day"),1)}n.setHours(e.config.first_hour);n.setMinutes(0);n=e.date.add(n,o,"minute")}}}r=e.date.add(n,o,"minute");break;case"left":n=this._moveDate(t.start_date,-1);r=this._moveDate(t.end_date,-1);break;case"right":n=this._moveDate(t.start_date,1);r=this._moveDate(t.end_date,1);break;default:n=d;r=e.date.add(n,o,"minute");break}return{start_date:n,end_date:r}},nextWeekAgendaSlot:function(t,a){var i,n;var r=e.getState();switch(a){case"down":case"left":i=e.date.day_start(e.date.add(t.start_date,-1,"day"));i=this.findVisibleColumn(i,-1);break;case"up":case"right":i=e.date.day_start(e.date.add(t.start_date,1,"day"));i=this.findVisibleColumn(i,1);break;default:i=e.date.day_start(t.start_date);break}if(t.start_date.valueOf()<r.min_date.valueOf()||t.start_date.valueOf()>=r.max_date.valueOf()){i=new Date(r.min_date)}n=new Date(i);n.setHours(e.config.last_hour);return{start_date:i,end_date:n}},nextAgendaSlot:function(e,t){return{start_date:e.start_date,end_date:e.end_date}},isDateVisible:function(t){if(!e._ignores_detected)return true;var a=e.matrix&&e.matrix[e.getState().mode];var i;if(a){i=e._get_date_index(a,t)}else{i=e.locate_holder_day(t)}return!e._ignores[i]},findVisibleColumn:function(t,a){var i=t;a=a||1;var n=e.getState();while(!this.isDateVisible(i)&&(a>0&&i.valueOf()<=n.max_date.valueOf()||a<0&&i.valueOf()>=n.min_date.valueOf())){i=this.nextDateColumn(i,a)}return i},nextDateColumn:function(t,a){a=a||1;var i=e.matrix&&e.matrix[e.getState().mode];var n;if(i){n=e.date.add(t,a*i.x_step,i.x_unit)}else{n=e.date.day_start(e.date.add(t,a,"day"))}return n},isVisible:function(t,a){if(!e._ignores_detected)return true;var i=new Date(t);while(i.valueOf()<a.valueOf()){if(this.isDateVisible(i))return true;i=this.nextDateColumn(i)}return false},nextSlot:function(t,a,i,n){var r;i=i||this._getMode();var o=e.$keyboardNavigation.TimeSlot.prototype.clone(t);switch(i){case this._modes.units:r=this.nextUnitsSlot(o,a,n);break;case this._modes.timeline:r=this.nextTimelineSlot(o,a,n);break;case this._modes.year:r=this.nextMonthSlot(o,a,n);break;case this._modes.month:r=this.nextMonthSlot(o,a,n);break;case this._modes.weekAgenda:r=this.nextWeekAgendaSlot(o,a,n);break;case this._modes.list:r=this.nextAgendaSlot(o,a,n);break;case this._modes.dayColumns:r=this.nextDaySlot(o,a,n);break}if(r.start_date.valueOf()>=r.end_date.valueOf()){r=this.nextSlot(r,a,i)}return e.$keyboardNavigation.TimeSlot.prototype.clone(r)},extendSlot:function(t,a){var i=this._getMode();var n;switch(i){case this._modes.units:if(a=="left"||a=="right"){n=this.nextUnitsSlot(t,a)}else{n=this.extendUnitsSlot(t,a)}break;case this._modes.timeline:if(a=="down"||a=="up"){n=this.nextTimelineSlot(t,a)}else{n=this.extendTimelineSlot(t,a)}break;case this._modes.year:n=this.extendMonthSlot(t,a);break;case this._modes.month:n=this.extendMonthSlot(t,a);break;case this._modes.dayColumns:n=this.extendDaySlot(t,a);break;case this._modes.weekAgenda:n=this.extendWeekAgendaSlot(t,a);break;default:n=t;break}var r=e.getState();if(n.start_date.valueOf()<r.min_date.valueOf()){n.start_date=this.findVisibleColumn(r.min_date);n.start_date.setHours(e.config.first_hour)}if(n.end_date.valueOf()>r.max_date.valueOf()){n.end_date=this.findVisibleColumn(r.max_date,-1)}return e.$keyboardNavigation.TimeSlot.prototype.clone(n)},extendTimelineSlot:function(e,t){return this.extendGenericSlot({left:"start_date",right:"end_date"},e,t,"timeline")},extendWeekAgendaSlot:function(e,t){return this.extendGenericSlot({left:"start_date",right:"end_date"},e,t,"weekAgenda")},extendGenericSlot:function(t,a,i,n){var r;var o=a.movingDate;if(!o){o=t[i]}if(!o||!t[i]){return a}if(i){r=this.nextSlot({start_date:a[o],section:a.section},i,n,true);if(r.start_date.valueOf()==a.start_date.valueOf()){r=this.nextSlot({start_date:r.start_date,section:r.section},i,n,true)}r.movingDate=o}else{return e.$keyboardNavigation.TimeSlot.prototype.clone(a)}var d=this.extendSlotDates(a,r,r.movingDate);if(d.end_date.valueOf()<=d.start_date.valueOf()){r.movingDate=r.movingDate=="end_date"?"start_date":"end_date"}d=this.extendSlotDates(a,r,r.movingDate);r.start_date=d.start_date;r.end_date=d.end_date;return r},extendSlotDates:function(e,t,a){var i={start_date:null,end_date:null};if(a=="start_date"){i.start_date=t.start_date;i.end_date=e.end_date}else{i.start_date=e.start_date;i.end_date=t.start_date}return i},extendMonthSlot:function(t,a){var t=this.extendGenericSlot({up:"start_date",down:"end_date",left:"start_date",right:"end_date"},t,a,"month");t.start_date.setHours(e.config.first_hour);t.end_date=e.date.add(t.end_date,-1,"day");t.end_date.setHours(e.config.last_hour);return t},extendUnitsSlot:function(e,t){var a;switch(t){case"down":case"up":a=this.extendDaySlot(e,t);break;default:a=e;break}a.section=e.section;return a},extendDaySlot:function(e,t){return this.extendGenericSlot({up:"start_date",down:"end_date",left:"start_date",right:"end_date"},e,t,"dayColumns")},scrollSlot:function(t){var a=e.getState();var i=this.nextSlot(this,t);if(i.start_date.valueOf()<a.min_date.valueOf()||i.start_date.valueOf()>=a.max_date.valueOf()){e.setCurrentView(new Date(i.start_date))}this.moveTo(i)},keys:{left:function(){this.scrollSlot("left")},right:function(){this.scrollSlot("right")},down:function(){var t=this._getMode();if(t==this._modes.list){e.$keyboardNavigation.SchedulerNode.prototype.nextEventHandler()}else{this.scrollSlot("down")}},up:function(){var t=this._getMode();if(t==this._modes.list){e.$keyboardNavigation.SchedulerNode.prototype.prevEventHandler()}else{this.scrollSlot("up")}},"shift+down":function(){this.moveTo(this.extendSlot(this,"down"))},"shift+up":function(){this.moveTo(this.extendSlot(this,"up"))},"shift+right":function(){this.moveTo(this.extendSlot(this,"right"))},"shift+left":function(){this.moveTo(this.extendSlot(this,"left"))},enter:function(){var t={start_date:new Date(this.start_date),end_date:new Date(this.end_date)};var a=e.getState().mode;if(e.matrix&&e.matrix[a]){var i=e.matrix[e.getState().mode];t[i.y_property]=this.section}else if(e._props&&e._props[a]){var n=e._props[a];t[n.map_to]=this.section}e.addEventNow(t)}}});e.$keyboardNavigation.TimeSlot.prototype.bindAll(e.$keyboardNavigation.TimeSlot.prototype.keys);e.$keyboardNavigation.MinicalButton=function(e,t){this.container=e;this.index=t||0};e.$keyboardNavigation.MinicalButton.prototype=e._compose(e.$keyboardNavigation.KeyNavNode,{isValid:function(){var e=this.container;return!!e.offsetWidth},fallback:function(){var t=new e.$keyboardNavigation.TimeSlot;if(t.isValid()){return t}else{return new e.$keyboardNavigation.DataArea}},focus:function(){e.$keyboardNavigation.dispatcher.globalNode.disable();this.container.removeAttribute("tabindex");e.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)},blur:function(){this.container.setAttribute("tabindex","0");e.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this)},getNode:function(){if(!this.index){return this.container.querySelector(".dhx_cal_prev_button")}else{return this.container.querySelector(".dhx_cal_next_button")}},keys:{right:function(t){this.moveTo(new e.$keyboardNavigation.MinicalButton(this.container,this.index?0:1))},left:function(t){this.moveTo(new e.$keyboardNavigation.MinicalButton(this.container,this.index?0:1))},down:function(){var t=new e.$keyboardNavigation.MinicalCell(this.container,0,0);if(t&&!t.isValid()){t=t.fallback()}this.moveTo(t)},enter:function(e){this.getNode().click()}}});e.$keyboardNavigation.MinicalButton.prototype.bindAll(e.$keyboardNavigation.MinicalButton.prototype.keys);e.$keyboardNavigation.MinicalCell=function(e,t,a){this.container=e;this.row=t||0;this.col=a||0};e.$keyboardNavigation.MinicalCell.prototype=e._compose(e.$keyboardNavigation.KeyNavNode,{isValid:function(){var e=this._getGrid();return!!(e[this.row]&&e[this.row][this.col])},fallback:function(){var t=this.row;var a=this.col;var i=this._getGrid();if(!i[t]){t=0}var n=true;if(t>i.length/2){n=false}if(!i[t]){var r=new e.$keyboardNavigation.TimeSlot;if(r.isValid()){return r}else{return new e.$keyboardNavigation.DataArea}}if(n){for(var o=a;i[t]&&o<i[t].length;o++){if(!i[t][o]&&o==i[t].length-1){t++;a=0}if(i[t][o]){return new e.$keyboardNavigation.MinicalCell(this.container,t,o)}}}else{for(var o=a;i[t]&&o<i[t].length;o--){if(!i[t][o]&&!o){t--;a=i[t].length-1}if(i[t][o]){return new e.$keyboardNavigation.MinicalCell(this.container,t,o)}}}return new e.$keyboardNavigation.MinicalButton(this.container,0)},focus:function(){e.$keyboardNavigation.dispatcher.globalNode.disable();this.container.removeAttribute("tabindex");e.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)},blur:function(){this.container.setAttribute("tabindex","0");e.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this)},_getNode:function(e,t){return this.container.querySelector(".dhx_year_body tr:nth-child("+(e+1)+") td:nth-child("+(t+1)+")")},getNode:function(){return this._getNode(this.row,this.col)},_getGrid:function(){var t=this.container.querySelectorAll(".dhx_year_body tr");var a=[];for(var i=0;i<t.length;i++){a[i]=[];var n=t[i];var r=n.querySelectorAll("td");for(var o=0;o<r.length;o++){var d=r[o];var s=true;var l=e._getClassName(d);if(l.indexOf("dhx_after")>-1||l.indexOf("dhx_before")>-1||l.indexOf("dhx_scale_ignore")>-1){s=false}a[i][o]=s}}return a},keys:{right:function(t){var a=this._getGrid();var i=this.row;var n=this.col+1;if(!a[i]||!a[i][n]){if(a[i+1]){i=i+1;n=0}else{n=this.col}}var r=new e.$keyboardNavigation.MinicalCell(this.container,i,n);if(!r.isValid()){r=r.fallback()}this.moveTo(r)},left:function(t){var a=this._getGrid();var i=this.row;var n=this.col-1;if(!a[i]||!a[i][n]){if(a[i-1]){i=i-1;n=a[i].length-1}else{n=this.col}}var r=new e.$keyboardNavigation.MinicalCell(this.container,i,n);if(!r.isValid()){r=r.fallback()}this.moveTo(r)},down:function(){var t=this._getGrid();var a=this.row+1;var i=this.col;if(!t[a]||!t[a][i]){a=this.row}var n=new e.$keyboardNavigation.MinicalCell(this.container,a,i);if(!n.isValid()){n=n.fallback()}this.moveTo(n)},up:function(){var t=this._getGrid();var a=this.row-1;var i=this.col;if(!t[a]||!t[a][i]){var n=0;if(this.col>t[this.row].length/2){n=1}this.moveTo(new e.$keyboardNavigation.MinicalButton(this.container,n))}else{var r=new e.$keyboardNavigation.MinicalCell(this.container,a,i);if(!r.isValid()){r=r.fallback()}this.moveTo(r)}},enter:function(e){this.getNode().querySelector(".dhx_month_head").click()}}});e.$keyboardNavigation.MinicalCell.prototype.bindAll(e.$keyboardNavigation.MinicalCell.prototype.keys);e.$keyboardNavigation.DataArea=function(e){this.index=e||0};e.$keyboardNavigation.DataArea.prototype=e._compose(e.$keyboardNavigation.KeyNavNode,{getNode:function(t){return e.$container.querySelector(".dhx_cal_data")},_handlers:null,isValid:function(){return true},fallback:function(){return this},keys:{"up,down,right,left":function(){this.moveTo(new e.$keyboardNavigation.TimeSlot)}}});e.$keyboardNavigation.DataArea.prototype.bindAll(e.$keyboardNavigation.DataArea.prototype.keys);if(!dhtmlx._modalsStack){dhtmlx._modalsStack=[]}(function(){var t=[];function a(){return!!(t.length||dhtmlx._modalsStack.length)}function i(e,t){while(e&&e!=t){e=e.parentNode}return!!(e==t)}function n(t){setTimeout(function(){if(!a()&&!i(document.activeElement,e.$container)){e.focus()}},1)}function r(a){e.eventRemove(a,"keydown",s);e.event(a,"keydown",s);t.push(a)}function o(){var a=t.pop();if(a){e.eventRemove(a,"keydown",s)}n(a)}function d(e){if(dhtmlx._modalsStack.length){return e==dhtmlx._modalsStack[dhtmlx._modalsStack.length-1]}else{return e==t[t.length-1]}}function s(t){var t=t||window.event;var a=t.currentTarget;if(!d(a))return;e.$keyboardNavigation.trapFocus(a,t)}function l(){r(e.getLightbox())}e.attachEvent("onLightbox",l);e.attachEvent("onAfterLightbox",o);e.attachEvent("onAfterQuickInfo",function(){n()});if(!dhtmlx._keyNavMessagePopup){dhtmlx._keyNavMessagePopup=true;var u=null;var c=null;dhtmlx.attachEvent("onMessagePopup",function(t){u=document.activeElement;c=u;while(c&&e._getClassName(c).indexOf("dhx_cal_data")<0){c=c.parentNode}if(c){c=c.parentNode}e.eventRemove(t,"keydown",s);e.event(t,"keydown",s);dhtmlx._modalsStack.push(t)});dhtmlx.attachEvent("onAfterMessagePopup",function(){var t=dhtmlx._modalsStack.pop();if(t){e.eventRemove(t,"keydown",s)}setTimeout(function(){var t=document.activeElement;while(t&&e._getClassName(t).indexOf("dhx_cal_light")<0){t=t.parentNode}if(t)return;if(u&&u.parentNode){u.focus()}else if(c&&c.parentNode){c.focus()}u=null;c=null},1)})}e.$keyboardNavigation.isModal=a})();e.$keyboardNavigation.dispatcher={isActive:false,activeNode:null,globalNode:new e.$keyboardNavigation.SchedulerNode,keepScrollPosition:function(t){var a,i;var n=e.$container.querySelector(".dhx_timeline_scrollable_data");if(!n){n=e.$container.querySelector(".dhx_cal_data")}if(n){a=n.scrollTop;i=n.scrollLeft}t();if(n){n.scrollTop=a;n.scrollLeft=i}},enable:function(){if(!e.$container){return}this.isActive=true;var t=this;this.keepScrollPosition(function(){t.globalNode.enable();t.setActiveNode(t.getActiveNode())})},disable:function(){this.isActive=false;this.globalNode.disable()},isEnabled:function(){return!!this.isActive},getDefaultNode:function(){return this.globalNode.getDefaultNode()},setDefaultNode:function(){this.setActiveNode(this.getDefaultNode())},getActiveNode:function(){var e=this.activeNode;if(e&&!e.isValid()){e=e.fallback()}return e},focusGlobalNode:function(){this.blurNode(this.globalNode);this.focusNode(this.globalNode)},setActiveNode:function(e){if(!e||!e.isValid())return;if(this.activeNode){if(this.activeNode.compareTo(e)){return}}if(this.isEnabled()){this.blurNode(this.activeNode);this.activeNode=e;this.focusNode(this.activeNode)}},focusNode:function(t){if(t&&t.focus){t.focus();if(t.getNode&&document.activeElement!=t.getNode()){this.setActiveNode(new e.$keyboardNavigation.DataArea)}}},blurNode:function(e){if(e&&e.blur){e.blur()}},getInlineEditor:function(t){var a=e.$container.querySelector(".dhx_cal_editor[event_id='"+t+"'] textarea");if(a&&a.offsetWidth){return a}return null},keyDownHandler:function(t){if(t.defaultPrevented){return}var a=this.getActiveNode();if(e.$keyboardNavigation.isModal()&&!(a&&a.container&&e._locate_css({target:a.container},"dhx_minical_popup",false)))return;if(e.getState().editor_id&&this.getInlineEditor(e.getState().editor_id))return;if(!this.isEnabled())return;t=t||window.event;var i=this.globalNode;var n=e.$keyboardNavigation.shortcuts.getCommandFromEvent(t);if(!a){this.setDefaultNode()}else if(a.findHandler(n)){a.doAction(n,t)}else if(i.findHandler(n)){i.doAction(n,t)}},_timeout:null,delay:function(e,t){clearTimeout(this._timeout);this._timeout=setTimeout(e,t||1)}};e._temp_key_scope=function(){e.config.key_nav=true;e.$keyboardNavigation._pasteDate=null;e.$keyboardNavigation._pasteSection=null;var t=null;var a={};if(!document.body){e.event(window,"load",function(){e.event(document.body,"mousemove",i)})}else{e.event(document.body,"mousemove",i)}function i(e){e=e||window.event;a.x=e.clientX;a.y=e.clientY}function n(){var t=false;var i=false;var n=document.elementFromPoint(a.x,a.y);while(n&&n!=e._obj){n=n.parentNode}t=!!(n==e._obj);i=e.$keyboardNavigation.dispatcher.isEnabled();return t||i}e.attachEvent("onMouseMove",function(t,a){var i=e.getState();if(!(i.mode&&i.min_date)){return}var n=e.getActionData(a);e.$keyboardNavigation._pasteDate=n.date;e.$keyboardNavigation._pasteSection=n.section});function r(e){delete e.rec_type;delete e.rec_pattern;delete e.event_pid;delete e.event_length}function o(t){return e._lame_copy({},t)}e._make_pasted_event=function(t){var a=e.$keyboardNavigation._pasteDate;var i=e.$keyboardNavigation._pasteSection;var n=t.end_date-t.start_date;var d=o(t);r(d);d.start_date=new Date(a);d.end_date=new Date(d.start_date.valueOf()+n);if(i){var s=e._get_section_property();if(e.config.multisection)d[s]=t[s];else d[s]=i}return d};e._do_paste=function(t,a,i){e.addEvent(a);e.callEvent("onEventPasted",[t,a,i])};e._is_key_nav_active=function(){if(this._is_initialized()&&!this._is_lightbox_open()&&this.config.key_nav){return true}return false};function d(){var t=e.$keyboardNavigation.dispatcher.getActiveNode();if(t&&t.eventId)return t.eventId;return e._select_id}e.event(document,"keydown",function(t){if((t.ctrlKey||t.metaKey)&&t.keyCode==86&&e._buffer_event&&!e.$keyboardNavigation.dispatcher.isEnabled()){e.$keyboardNavigation.dispatcher.isActive=n()}});e._key_nav_copy_paste=function(a){if(!e._is_key_nav_active())return true;a=a||event;if(a.keyCode==37||a.keyCode==39){a.cancelBubble=true;var i=e.date.add(e._date,a.keyCode==37?-1:1,e._mode);e.setCurrentView(i);return true}var r=d();if((a.ctrlKey||a.metaKey)&&a.keyCode==67){if(r){e._buffer_event=o(e.getEvent(r));t=true;e.callEvent("onEventCopied",[e.getEvent(r)])}return true}if((a.ctrlKey||a.metaKey)&&a.keyCode==88){if(r){t=false;var s=e._buffer_event=o(e.getEvent(r));e.updateEvent(s.id);e.callEvent("onEventCut",[s])}}if((a.ctrlKey||a.metaKey)&&a.keyCode==86&&n(a)){var s=e._buffer_event?e.getEvent(e._buffer_event.id):e._buffer_event;s=s||e._buffer_event;if(s){var l=e._make_pasted_event(s);if(t){l.id=e.uid();e._do_paste(t,l,s)}else{var u=e.callEvent("onBeforeEventChanged",[l,a,false,s]);if(u){e._do_paste(t,l,s);t=true}}}return true}}};e._temp_key_scope();(function(){e.$keyboardNavigation.attachSchedulerHandlers=function(){var t=e.$keyboardNavigation.dispatcher;var a=function(a){if(!e.config.key_nav)return;return t.keyDownHandler(a)};var i=function(){t.keepScrollPosition(function(){t.focusGlobalNode()})};var n;e.attachEvent("onDataRender",function(){if(!e.config.key_nav)return;if(!(t.isEnabled()&&!e.getState().editor_id))return;clearTimeout(n);n=setTimeout(function(){if(!t.isEnabled())t.enable();r()})});var r=function(){if(!t.isEnabled())return;var a=t.getActiveNode();if(!a)return;if(!a.isValid()){a=a.fallback()}if(!a||a instanceof e.$keyboardNavigation.MinicalButton||a instanceof e.$keyboardNavigation.MinicalCell)return;t.keepScrollPosition(function(){a.focus(true)})};e.attachEvent("onSchedulerReady",function(){var t=e.$container;e.eventRemove(document,"keydown",a);e.eventRemove(t,"mousedown",o);e.eventRemove(t,"focus",i);if(e.config.key_nav){e.event(document,"keydown",a);e.event(t,"mousedown",o);e.event(t,"focus",i);t.setAttribute("tabindex","0")}else{t.removeAttribute("tabindex")}});function o(a){if(!e.config.key_nav)return true;var i=e.$keyboardNavigation.isChildOf(a.target||a.srcElement,e.$container.querySelector(".dhx_cal_data"));var n=e.getActionData(a);var r;if(e._locate_event(a.target||a.srcElement)){r=new e.$keyboardNavigation.Event(e._locate_event(a.target||a.srcElement))}else if(i){r=new e.$keyboardNavigation.TimeSlot;if(n.date&&i){r=r.nextSlot(new e.$keyboardNavigation.TimeSlot(n.date,null,n.section))}}if(r){if(!t.isEnabled()){t.activeNode=r}else{if(n.date&&i){t.delay(function(){t.setActiveNode(r)})}}}}function d(a){if(!e.config.key_nav)return;if(!t.isEnabled())return;var i=a;var n=new e.$keyboardNavigation.Event(i.eventId);if(!n.isValid()){var r=n.start||i.start;var o=n.end||i.end;var d=n.section||i.section;n=new e.$keyboardNavigation.TimeSlot(r,o,d);if(!n.isValid()){n=new e.$keyboardNavigation.TimeSlot}}t.setActiveNode(n);var s=t.getActiveNode();if(s&&s.getNode&&document.activeElement!=s.getNode()){t.focusNode(t.getActiveNode())}}var s=e.updateEvent;e.updateEvent=function(a){var i=s.apply(this,arguments);if(e.config.key_nav&&t.isEnabled()){if(e.getState().select_id==a){var n=new e.$keyboardNavigation.Event(a);if(!e.getState().lightbox_id){d(n)}}}return i};e.attachEvent("onEventDeleted",function(a){if(!e.config.key_nav)return true;if(t.isEnabled()){var i=t.getActiveNode();if(i.eventId==a){t.setActiveNode(new e.$keyboardNavigation.TimeSlot)}}return true});e.attachEvent("onClearAll",function(){if(!e.config.key_nav)return true;if(t.isEnabled()){if(t.getActiveNode()instanceof e.$keyboardNavigation.Event){t.setActiveNode(new e.$keyboardNavigation.TimeSlot)}}})};e.$keyboardNavigation._minicalendars=[];e.$keyboardNavigation.isMinical=function(t){var a=e.$keyboardNavigation._minicalendars;for(var i=0;i<a.length;i++){if(this.isChildOf(t,a[i]))return true}return false};e.$keyboardNavigation.isChildOf=function(e,t){while(e&&e!==t){e=e.parentNode}return!!(e===t)};e.$keyboardNavigation.patchMinicalendar=function(){var t=e.$keyboardNavigation.dispatcher;function a(a){var i=a.target;t.enable();t.setActiveNode(new e.$keyboardNavigation.MinicalButton(i,0))}function i(a){var i=a.target||a.srcElement;var n=e._locate_css(a,"dhx_cal_prev_button",false);var r=e._locate_css(a,"dhx_cal_next_button",false);var o=e._locate_css(a,"dhx_year_body",false);var d=0;var s=0;if(o){var l;var u;var c=i;while(c&&c.tagName.toLowerCase()!="td"){c=c.parentNode}if(c){u=c;l=u.parentNode}if(l&&u){var f=l.parentNode.querySelectorAll("tr");for(var v=0;v<f.length;v++){if(f[v]==l){d=v;break}}var h=l.querySelectorAll("td");for(var v=0;v<h.length;v++){if(h[v]==u){s=v;break}}}}var _=a.currentTarget;t.delay(function(){if(n||r||o){var a;if(n){a=new e.$keyboardNavigation.MinicalButton(_,0);t.setActiveNode(new e.$keyboardNavigation.MinicalButton(_,0))}else if(r){a=new e.$keyboardNavigation.MinicalButton(_,1)}else if(o){a=new e.$keyboardNavigation.MinicalCell(_,d,s)}if(a){t.enable();if(a.isValid()){t.activeNode=null;t.setActiveNode(a)}}}})}if(e.renderCalendar){var n=e.renderCalendar;e.renderCalendar=function(){var r=n.apply(this,arguments);var o=e.$keyboardNavigation._minicalendars;e.eventRemove(r,"click",i);e.event(r,"click",i);e.eventRemove(r,"focus",a);e.event(r,"focus",a);var d=false;for(var s=0;s<o.length;s++){if(o[s]==r){d=true;break}}if(!d)o.push(r);if(t.isEnabled()){var l=t.getActiveNode();if(l&&l.container==r){t.focusNode(l)}else{r.setAttribute("tabindex","0")}}else{r.setAttribute("tabindex","0")}return r}}if(e.destroyCalendar){var r=e.destroyCalendar;e.destroyCalendar=function(t,i){t=t||(e._def_count?e._def_count.firstChild:null);var n=r.apply(this,arguments);if(!t||!t.parentNode){var o=e.$keyboardNavigation._minicalendars;for(var d=0;d<o.length;d++){if(o[d]==t){e.eventRemove(o[d],"focus",a);o.splice(d,1);d--}}}return n}}};var t=e.$keyboardNavigation.dispatcher;e.$keyboardNavigation.attachSchedulerHandlers();if(e.renderCalendar){e.$keyboardNavigation.patchMinicalendar()}else{var a=e.attachEvent("onSchedulerReady",function(){e.detachEvent(a);e.$keyboardNavigation.patchMinicalendar()})}function i(){if(!e.config.key_nav)return;var t;var a=document.activeElement;if(!a||e._locate_css(a,"dhx_cal_quick_info",false)){t=false}else{t=e.$keyboardNavigation.isChildOf(a,e.$container)||e.$keyboardNavigation.isMinical(a)}return t}function n(e){if(e&&!t.isEnabled()){t.enable()}else if(!e&&t.isEnabled()){t.disable()}}setInterval(function(){if(!e.$container||!e.$keyboardNavigation.isChildOf(e.$container,document.body)){return}var a=i();if(a){n(a)}else if(!a&&t.isEnabled()){setTimeout(function(){if(e.config.key_nav){n(i())}else{e.$container.removeAttribute("tabindex")}},100)}},500)})()}if(window.Scheduler){window.Scheduler.plugin(e)}else{e(window.scheduler)}})();
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_layer.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e.attachEvent("onTemplatesReady",function(){this.layers.sort(function(e,t){return e.zIndex-t.zIndex});e._dp_init=function(t){t._methods=["_set_event_text_style","","changeEventId","deleteEvent"];this.attachEvent("onEventAdded",function(e){if(!this._loading&&this.validId(e)&&this.getEvent(e)&&this.getEvent(e).layer==t.layer)t.setUpdated(e,true,"inserted")});this.attachEvent("onBeforeEventDelete",function(e){if(this.getEvent(e)&&this.getEvent(e).layer==t.layer){if(!this.validId(e))return;var a=t.getState(e);if(a=="inserted"||this._new_event){t.setUpdated(e,false);return true}if(a=="deleted")return false;if(a=="true_deleted")return true;t.setUpdated(e,true,"deleted");return false}else return true});this.attachEvent("onEventChanged",function(e){if(!this._loading&&this.validId(e)&&this.getEvent(e)&&this.getEvent(e).layer==t.layer)t.setUpdated(e,true,"updated")});t._getRowData=function(e,t){var a=this.obj.getEvent(e);var i={};for(var s in a){if(s.indexOf("_")===0)continue;if(a[s]&&a[s].getUTCFullYear)i[s]=this.obj._helpers.formatDate(a[s]);else i[s]=a[s]}return i};t._clearUpdateFlag=function(){};t.attachEvent("insertCallback",e._update_callback);t.attachEvent("updateCallback",e._update_callback);t.attachEvent("deleteCallback",function(e,t){this.obj.setUserData(t,this.action_param,"true_deleted");this.obj.deleteEvent(t)})};(function(){var t=function(e){if(e===null||typeof e!="object")return e;var a=new e.constructor;for(var i in e)a[i]=t(e[i]);return a};e._dataprocessors=[];e._layers_zindex={};for(var a=0;a<e.layers.length;a++){e.config["lightbox_"+e.layers[a].name]={};e.config["lightbox_"+e.layers[a].name].sections=t(e.config.lightbox.sections);e._layers_zindex[e.layers[a].name]=e.config.inital_layer_zindex||5+a*3;if(e.layers[a].url){var i=new dataProcessor(e.layers[a].url);i.layer=e.layers[a].name;e._dataprocessors.push(i);e._dataprocessors[a].init(e)}if(e.layers[a].isDefault)e.defaultLayer=e.layers[a].name}})();e.showLayer=function(e){this.toggleLayer(e,true)};e.hideLayer=function(e){this.toggleLayer(e,false)};e.toggleLayer=function(e,t){var a=this.getLayer(e);if(typeof t!="undefined")a.visible=!!t;else a.visible=!a.visible;this.setCurrentView(this._date,this._mode)};e.getLayer=function(t){var a,i;if(typeof t=="string")i=t;if(typeof t=="object")i=t.layer;for(var s=0;s<e.layers.length;s++){if(e.layers[s].name==i)a=e.layers[s]}return a};e.attachEvent("onBeforeLightbox",function(t){var a=this.getEvent(t);this.config.lightbox.sections=this.config["lightbox_"+a.layer].sections;e.resetLightbox();return true});e.attachEvent("onClick",function(t,a){var i=e.getEvent(t);return!e.getLayer(i.layer).noMenu});e.attachEvent("onEventCollision",function(t,a){var i=this.getLayer(t);if(!i.checkCollision)return false;var s=0;for(var r=0;r<a.length;r++){if(a[r].layer==i.name&&a[r].id!=t.id)s++}return s>=e.config.collision_limit});e.addEvent=function(t,a,i,s,r){var n=t;if(arguments.length!=1){n=r||{};n.start_date=t;n.end_date=a;n.text=i;n.id=s;n.layer=this.defaultLayer}n.id=n.id||e.uid();n.text=n.text||"";if(typeof n.start_date=="string")n.start_date=this.templates.api_date(n.start_date);if(typeof n.end_date=="string")n.end_date=this.templates.api_date(n.end_date);n._timed=this.isOneDayEvent(n);var d=!this._events[n.id];this._events[n.id]=n;this.event_updated(n);if(!this._loading)this.callEvent(d?"onEventAdded":"onEventChanged",[n.id,n])};this._evs_layer={};for(var t=0;t<this.layers.length;t++){this._evs_layer[this.layers[t].name]=[]}e.addEventNow=function(t,a,i){var s={};if(typeof t=="object"){s=t;t=null}var r=(this.config.event_duration||this.config.time_step)*6e4;if(!t)t=Math.round(e._currentDate().valueOf()/r)*r;var n=new Date(t);if(!a){var d=this.config.first_hour;if(d>n.getHours()){n.setHours(d);t=n.valueOf()}a=t+r}s.start_date=s.start_date||n;s.end_date=s.end_date||new Date(a);s.text=s.text||this.locale.labels.new_event;s.id=this._drag_id=this.uid();s.layer=this.defaultLayer;this._drag_mode="new-size";this._loading=true;this.addEvent(s);this.callEvent("onEventCreated",[this._drag_id,i]);this._loading=false;this._drag_event={};this._on_mouse_up(i)};e._t_render_view_data=function(e){if(this.config.multi_day&&!this._table_view){var t=[];var a=[];for(var i=0;i<e.length;i++){if(e[i]._timed)t.push(e[i]);else a.push(e[i])}this._table_view=true;this.render_data(a);this._table_view=false;this.render_data(t)}else this.render_data(e)};e.render_view_data=function(){if(this._not_render){this._render_wait=true;return}this._render_wait=false;this.clear_view();this._evs_layer={};for(var e=0;e<this.layers.length;e++){this._evs_layer[this.layers[e].name]=[]}var t=this.get_visible_events();for(var e=0;e<t.length;e++){if(this._evs_layer[t[e].layer])this._evs_layer[t[e].layer].push(t[e])}if(this._mode=="month"){var a=[];for(var e=0;e<this.layers.length;e++){if(this.layers[e].visible)a=a.concat(this._evs_layer[this.layers[e].name])}this._t_render_view_data(a)}else{for(var e=0;e<this.layers.length;e++){if(this.layers[e].visible){var i=this._evs_layer[this.layers[e].name];this._t_render_view_data(i)}}}};e._render_v_bar=function(t,a,i,s,r,n,d,_,l){var h=t.id;if(d.indexOf("<div class=")==-1)d=e.templates["event_header_"+t.layer]?e.templates["event_header_"+t.layer](t.start_date,t.end_date,t):d;if(_.indexOf("<div class=")==-1)_=e.templates["event_text_"+t.layer]?e.templates["event_text_"+t.layer](t.start_date,t.end_date,t):_;var o=document.createElement("div");var v="dhx_cal_event";var f=e.templates["event_class_"+t.layer]?e.templates["event_class_"+t.layer](t.start_date,t.end_date,t):e.templates.event_class(t.start_date,t.end_date,t);if(f)v=v+" "+f;var c=e._border_box_events();var u=s-2;var y=c?u:s-4,p=c?u:s-6,g=c?u:s-(this._quirks?4:14),x=c?u-2:s-8;var m=c?r-this.xy.event_header_height:r-(this._quirks?20:30)+1;var b='<div event_id="'+h+'" class="'+v+'" style="position:absolute; top:'+i+"px; left:"+a+"px; width:"+y+"px; height:"+r+"px;"+(n||"")+'">';b+='<div class="dhx_header" style=" width:'+p+'px;" >&nbsp;</div>';b+='<div class="dhx_title">'+d+"</div>";b+='<div class="dhx_body" style=" width:'+g+"px; height:"+m+'px;">'+_+"</div>";b+='<div class="dhx_footer" style=" width:'+x+"px;"+(l?" margin-top:-1px;":"")+'" ></div></div>';o.innerHTML=b;o.style.zIndex=100;return o.firstChild};e.render_event_bar=function(t){var a=this._els["dhx_cal_data"][0];var i=this._colsS[t._sday];var s=this._colsS[t._eday];if(s==i)s=this._colsS[t._eday+1];var r=this.xy.bar_height;var n=this._colsS.heights[t._sweek]+(this._colsS.height?this.xy.month_scale_height+2:2)+t._sorder*r;var d=document.createElement("div");var _=t._timed?"dhx_cal_event_clear":"dhx_cal_event_line";var l=e.templates["event_class_"+t.layer]?e.templates["event_class_"+t.layer](t.start_date,t.end_date,t):e.templates.event_class(t.start_date,t.end_date,t);if(l)_=_+" "+l;var h='<div event_id="'+t.id+'" class="'+_+'" style="position:absolute; top:'+n+"px; left:"+i+"px; width:"+(s-i-15)+"px;"+(t._text_style||"")+'">';if(t._timed)h+=e.templates["event_bar_date_"+t.layer]?e.templates["event_bar_date_"+t.layer](t.start_date,t.end_date,t):e.templates.event_bar_date(t.start_date,t.end_date,t);h+=e.templates["event_bar_text_"+t.layer]?e.templates["event_bar_text_"+t.layer](t.start_date,t.end_date,t):e.templates.event_bar_text(t.start_date,t.end_date,t)+"</div>)";h+="</div>";d.innerHTML=h;this._rendered.push(d.firstChild);a.appendChild(d.firstChild)};e.render_event=function(t){var a=e.xy.menu_width;if(e.getLayer(t.layer).noMenu)a=0;if(t._sday<0)return;var i=e.locate_holder(t._sday);if(!i)return;var s=t.start_date.getHours()*60+t.start_date.getMinutes();var r=t.end_date.getHours()*60+t.end_date.getMinutes()||e.config.last_hour*60;var n=Math.round((s*60*1e3-this.config.first_hour*60*60*1e3)*this.config.hour_size_px/(60*60*1e3))%(this.config.hour_size_px*24)+1;var d=Math.max(e.xy.min_event_height,(r-s)*this.config.hour_size_px/60)+1;var _=Math.floor((i.clientWidth-a)/t._count);var l=t._sorder*_+1;if(!t._inner)_=_*(t._count-t._sorder);var h=this._render_v_bar(t.id,a+l,n,_,d,t._text_style,e.templates.event_header(t.start_date,t.end_date,t),e.templates.event_text(t.start_date,t.end_date,t));this._rendered.push(h);i.appendChild(h);l=l+parseInt(i.style.left,10)+a;n+=this._dy_shift;h.style.zIndex=this._layers_zindex[t.layer];if(this._edit_id==t.id){h.style.zIndex=parseInt(h.style.zIndex)+1;var o=h.style.zIndex;_=Math.max(_-4,e.xy.editor_width);var h=document.createElement("div");h.setAttribute("event_id",t.id);this.set_xy(h,_,d-20,l,n+14);h.className="dhx_cal_editor";h.style.zIndex=o;var v=document.createElement("div");this.set_xy(v,_-6,d-26);v.style.cssText+=";margin:2px 2px 2px 2px;overflow:hidden;";v.style.zIndex=o;h.appendChild(v);this._els["dhx_cal_data"][0].appendChild(h);this._rendered.push(h);v.innerHTML="<textarea class='dhx_cal_editor'>"+t.text+"</textarea>";if(this._quirks7)v.firstChild.style.height=d-12+"px";this._editor=v.firstChild;this._editor.onkeypress=function(t){if((t||event).shiftKey)return true;var a=(t||event).keyCode;if(a==e.keys.edit_save)e.editStop(true);if(a==e.keys.edit_cancel)e.editStop(false)};this._editor.onselectstart=function(e){(e||event).cancelBubble=true;return true};v.firstChild.focus();this._els["dhx_cal_data"][0].scrollLeft=0;v.firstChild.select()}if(this._select_id==t.id){h.style.zIndex=parseInt(h.style.zIndex)+1;var f=this.config["icons_"+(this._edit_id==t.id?"edit":"select")];var c="";for(var u=0;u<f.length;u++)c+="<div class='dhx_menu_icon "+f[u]+"' title='"+this.locale.labels[f[u]]+"'></div>";var y=this._render_v_bar(t.id,l-a+1,n,a,f.length*20+26,"","<div class='dhx_menu_head'></div>",c,true);y.style.left=l-a+1;y.style.zIndex=h.style.zIndex;this._els["dhx_cal_data"][0].appendChild(y);this._rendered.push(y)}};e.filter_agenda=function(t,a){var i=e.getLayer(a.layer);return i&&i.visible}})});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_limit.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e.config.limit_start=null;e.config.limit_end=null;e.config.limit_view=false;e.config.check_limits=true;e.config.mark_now=true;e.config.display_marked_timespans=true;e._temp_limit_scope=function(){var t=null;var a="dhx_time_block";var r="default";var n=function(e,t,a){if(t instanceof Date&&a instanceof Date){e.start_date=t;e.end_date=a}else{e.days=t;e.zones=a}return e};var i=function(e,t,r){var i=typeof e=="object"?e:{days:e};i.type=a;i.css="";if(t){if(r)i.sections=r;i=n(i,e,t)}return i};e.blockTime=function(t,a,r){var n=i(t,a,r);return e.addMarkedTimespan(n)};e.unblockTime=function(t,a,r){a=a||"fullday";var n=i(t,a,r);return e.deleteMarkedTimespan(n)};e.attachEvent("onBeforeViewChange",function(t,a,r,n){function i(t,a){var r=e.config.limit_start,n=e.config.limit_end,i=e.date.add(t,1,a);return t.valueOf()>n.valueOf()||i<=r.valueOf()}if(e.config.limit_view){n=n||a;r=r||t;if(i(n,r)&&!(a.valueOf()==n.valueOf())){setTimeout(function(){var t=!i(a,r)?a:e.config.limit_start;e.setCurrentView(!i(t,r)?t:null,r)},1);return false}}return true});e.checkInMarkedTimespan=function(t,a,n){a=a||r;var i=true;var s=new Date(t.start_date.valueOf());var d=e.date.add(s,1,"day");var o=e._marked_timespans;for(;s<t.end_date;s=e.date.date_part(d),d=e.date.add(s,1,"day")){var f=+e.date.date_part(new Date(s));var l=s.getDay();var v=_(t,o,l,f,a);if(v){for(var u=0;u<v.length;u+=2){var c=e._get_zone_minutes(s);var m=t.end_date>d||t.end_date.getDate()!=s.getDate()?1440:e._get_zone_minutes(t.end_date);var p=v[u];var h=v[u+1];if(p<m&&h>c){if(typeof n=="function"){i=n(t,c,m,p,h)}else{i=false}if(!i)break}}}}return!i};var s=e.checkLimitViolation=function(t){if(!t)return true;if(!e.config.check_limits)return true;var r=e;var n=r.config;var i=[];if(t.rec_type){var s=e.getRecDates(t);for(var _=0;_<s.length;_++){var d=e._copy_event(t);e._lame_copy(d,s[_]);i.push(d)}}else{i=[t]}var o=true;for(var f=0;f<i.length;f++){var l=true;var d=i[f];d._timed=e.isOneDayEvent(d);l=n.limit_start&&n.limit_end?d.start_date.valueOf()>=n.limit_start.valueOf()&&d.end_date.valueOf()<=n.limit_end.valueOf():true;if(l){l=!e.checkInMarkedTimespan(d,a,function(e,t,a,n,i){var s=true;if(t<=i&&t>=n){if(i==24*60||a<i){s=false}if(e._timed&&r._drag_id&&r._drag_mode=="new-size"){e.start_date.setHours(0);e.start_date.setMinutes(i)}else{s=false}}if(a>=n&&a<i||t<n&&a>i){if(e._timed&&r._drag_id&&r._drag_mode=="new-size"){e.end_date.setHours(0);e.end_date.setMinutes(n)}else{s=false}}return s})}if(!l){l=r.checkEvent("onLimitViolation")?r.callEvent("onLimitViolation",[d.id,d]):l}o=o&&l}if(!o){r._drag_id=null;r._drag_mode=null}return o};e._get_blocked_zones=function(e,t,a,r,n){var i=[];if(e&&e[t]){var s=e[t];var _=this._get_relevant_blocked_zones(a,r,s,n);for(var d=0;d<_.length;d++){i=this._add_timespan_zones(i,_[d].zones)}}return i};e._get_relevant_blocked_zones=function(e,t,a,r){var n=a[t]&&a[t][r]?a[t][r]:a[e]&&a[e][r]?a[e][r]:[];return n};function _(t,a,r,n,i){var s=e;var _=[];var d={_props:"map_to",matrix:"y_property"};for(var o in d){var f=d[o];if(s[o]){for(var l in s[o]){var v=s[o][l];var u=v[f];if(!t[u])continue;_=s._add_timespan_zones(_,e._get_blocked_zones(a[l],t[u],r,n,i))}}}_=s._add_timespan_zones(_,e._get_blocked_zones(a,"global",r,n,i));return _}e.attachEvent("onMouseDown",function(e){return!(e==a)});e.attachEvent("onBeforeDrag",function(t){if(!t)return true;return s(e.getEvent(t))});e.attachEvent("onClick",function(t,a){return s(e.getEvent(t))});e.attachEvent("onBeforeLightbox",function(a){var r=e.getEvent(a);t=[r.start_date,r.end_date];return s(r)});e.attachEvent("onEventSave",function(t,a,r){if(!(a.start_date&&a.end_date)){var n=e.getEvent(t);a.start_date=new Date(n.start_date);a.end_date=new Date(n.end_date)}if(a.rec_type){var i=e._lame_clone(a);e._roll_back_dates(i);return s(i)}return s(a)});e.attachEvent("onEventAdded",function(t){if(!t)return true;var a=e.getEvent(t);if(!s(a)&&e.config.limit_start&&e.config.limit_end){if(a.start_date<e.config.limit_start){a.start_date=new Date(e.config.limit_start)}if(a.start_date.valueOf()>=e.config.limit_end.valueOf()){a.start_date=this.date.add(e.config.limit_end,-1,"day")}if(a.end_date<e.config.limit_start){a.end_date=new Date(e.config.limit_start)}if(a.end_date.valueOf()>=e.config.limit_end.valueOf()){a.end_date=this.date.add(e.config.limit_end,-1,"day")}if(a.start_date.valueOf()>=a.end_date.valueOf()){a.end_date=this.date.add(a.start_date,this.config.event_duration||this.config.time_step,"minute")}a._timed=this.isOneDayEvent(a)}return true});e.attachEvent("onEventChanged",function(a){if(!a)return true;var r=e.getEvent(a);if(!s(r)){if(!t)return false;r.start_date=t[0];r.end_date=t[1];r._timed=this.isOneDayEvent(r)}return true});e.attachEvent("onBeforeEventChanged",function(e,t,a){return s(e)});e.attachEvent("onBeforeEventCreated",function(t){var a=e.getActionData(t).date;var r={_timed:true,start_date:a,end_date:e.date.add(a,e.config.time_step,"minute")};return s(r)});e.attachEvent("onViewChange",function(){e._mark_now()});e.attachEvent("onAfterSchedulerResize",function(){window.setTimeout(function(){e._mark_now()},1);return true});e.attachEvent("onTemplatesReady",function(){e._mark_now_timer=window.setInterval(function(){if(!e._is_initialized())return;e._mark_now()},6e4)});e._mark_now=function(t){var a="dhx_now_time";if(!this._els[a]){this._els[a]=[]}var r=e._currentDate();var n=this.config;e._remove_mark_now();if(!t&&n.mark_now&&r<this._max_date&&r>this._min_date&&r.getHours()>=n.first_hour&&r.getHours()<n.last_hour){var i=this.locate_holder_day(r);this._els[a]=e._append_mark_now(i,r)}};e._append_mark_now=function(t,a){var r="dhx_now_time";var n=e._get_zone_minutes(a);var i={zones:[n,n+1],css:r,type:r};if(!this._table_view){if(this._props&&this._props[this._mode]){var s,_;var d=this._props[this._mode];var o=d.size||d.options.length;if(d.days>1){if(d.size&&d.options.length){t=(d.position+t)/d.options.length*d.size}s=t;_=t+o}else{s=0;_=s+o}var f=[];for(var l=s;l<_;l++){var v=l;i.days=v;var u=e._render_marked_timespan(i,null,v)[0];f.push(u)}return f}else{i.days=t;return e._render_marked_timespan(i,null,t)}}else{if(this._mode=="month"){i.days=+e.date.date_part(a);return e._render_marked_timespan(i,null,null)}}};e._remove_mark_now=function(){var e="dhx_now_time";var t=this._els[e];for(var a=0;a<t.length;a++){var r=t[a];var n=r.parentNode;if(n){n.removeChild(r)}}this._els[e]=[]};e._marked_timespans={global:{}};e._get_zone_minutes=function(e){return e.getHours()*60+e.getMinutes()};e._prepare_timespan_options=function(t){var a=[];var n=[];if(t.days=="fullweek")t.days=[0,1,2,3,4,5,6];if(t.days instanceof Array){var i=t.days.slice();for(var s=0;s<i.length;s++){var _=e._lame_clone(t);_.days=i[s];a.push.apply(a,e._prepare_timespan_options(_))}return a}if(!t||!(t.start_date&&t.end_date&&t.end_date>t.start_date||t.days!==undefined&&t.zones)&&!t.type)return a;var d=0;var o=24*60;if(t.zones=="fullday")t.zones=[d,o];if(t.zones&&t.invert_zones){t.zones=e.invertZones(t.zones)}t.id=e.uid();t.css=t.css||"";t.type=t.type||r;var f=t.sections;if(f){for(var l in f){if(f.hasOwnProperty(l)){var v=f[l];if(!(v instanceof Array))v=[v];for(var s=0;s<v.length;s++){var u=e._lame_copy({},t);u.sections={};u.sections[l]=v[s];n.push(u)}}}}else{n.push(t)}for(var c=0;c<n.length;c++){var m=n[c];var p=m.start_date;var h=m.end_date;if(p&&h){var g=e.date.date_part(new Date(p));var y=e.date.add(g,1,"day");while(g<h){var u=e._lame_copy({},m);delete u.start_date;delete u.end_date;u.days=g.valueOf();var k=p>g?e._get_zone_minutes(p):d;var w=h>y||h.getDate()!=g.getDate()?o:e._get_zone_minutes(h);u.zones=[k,w];a.push(u);g=y;y=e.date.add(y,1,"day")}}else{if(m.days instanceof Date)m.days=e.date.date_part(m.days).valueOf();m.zones=t.zones.slice();a.push(m)}}return a};e._get_dates_by_index=function(t,a,r){var n=[];a=e.date.date_part(new Date(a||e._min_date));r=new Date(r||e._max_date);var i=a.getDay();var s=t-i>=0?t-i:7-a.getDay()+t;var _=e.date.add(a,s,"day");for(;_<r;_=e.date.add(_,1,"week")){n.push(_)}return n};e._get_css_classes_by_config=function(e){var t=[];if(e.type==a){t.push(a);if(e.css)t.push(a+"_reset")}t.push("dhx_marked_timespan",e.css);return t.join(" ")};e._get_block_by_config=function(e){var t=document.createElement("div");if(e.html){if(typeof e.html=="string")t.innerHTML=e.html;else t.appendChild(e.html)}return t};e._render_marked_timespan=function(t,a,r){var n=[];var i=e.config;var s=this._min_date;var _=this._max_date;var d=false;if(!i.display_marked_timespans)return n;if(!r&&r!==0){if(t.days<7)r=t.days;else{var o=new Date(t.days);d=+o;if(!(+_>+o&&+s<=+o))return n;r=o.getDay()}var f=s.getDay();if(f>r){r=7-(f-r)}else{r=r-f}}var l=t.zones;var v=e._get_css_classes_by_config(t);if(e._table_view&&e._mode=="month"){var u=[];var c=[];if(!a){c=d?[d]:e._get_dates_by_index(r);for(var m=0;m<c.length;m++){u.push(this._scales[c[m]])}}else{u.push(a);c.push(r)}for(var m=0;m<u.length;m++){a=u[m];r=c[m];var p=Math.floor((this._correct_shift(r,1)-s.valueOf())/(60*60*1e3*24*this._cols.length)),h=this.locate_holder_day(r,false)%this._cols.length;if(this._ignores[h])continue;var g=this.config.rtl?this._colsS.col_length-1-h:h;var y=e._get_block_by_config(t),k=Math.max(a.offsetHeight-1,0),w=Math.max(a.offsetWidth-1,0),z=this._colsS[g],b=this._colsS.heights[p]+(this._colsS.height?this.xy.month_scale_height+2:2)-1;y.className=v;y.style.top=b+"px";y.style.lineHeight=y.style.height=k+"px";for(var D=0;D<l.length;D+=2){var x=l[m];var E=l[m+1];if(E<=x)return[];var M=y.cloneNode(true);M.style.left=z+Math.round(x/(24*60)*w)+"px";M.style.width=Math.round((E-x)/(24*60)*w)+"px";a.appendChild(M);n.push(M)}}}else{var O=r;if(this._ignores[this.locate_holder_day(r,false)])return n;if(this._props&&this._props[this._mode]&&t.sections&&t.sections[this._mode]){var C=this._props[this._mode];O=C.order[t.sections[this._mode]];var T=C.order[t.sections[this._mode]];if(!(C.days>1)){O=T;if(C.size&&O>C.position+C.size){O=0}}else{var N=C.size||C.options.length;O=O*N+T}}a=a?a:e.locate_holder(O);for(var m=0;m<l.length;m+=2){var x=Math.max(l[m],i.first_hour*60);var E=Math.min(l[m+1],i.last_hour*60);if(E<=x){if(m+2<l.length)continue;else return[]}var M=e._get_block_by_config(t);M.className=v;var H=this.config.hour_size_px*24+1;var S=60*60*1e3;M.style.top=Math.round((x*60*1e3-this.config.first_hour*S)*this.config.hour_size_px/S)%H+"px";M.style.lineHeight=M.style.height=Math.max(Math.round((E-x)*60*1e3*this.config.hour_size_px/S)%H,1)+"px";a.appendChild(M);n.push(M)}}return n};e._mark_timespans=function(){var t=this._els["dhx_cal_data"][0];var a=[];if(e._table_view&&e._mode=="month"){for(var r in this._scales){var n=new Date(+r);a.push.apply(a,e._on_scale_add_marker(this._scales[r],n))}}else{var n=new Date(e._min_date);for(var i=0,s=t.childNodes.length;i<s;i++){var _=t.childNodes[i];if(_.firstChild&&e._getClassName(_.firstChild).indexOf("dhx_scale_hour")>-1){continue}a.push.apply(a,e._on_scale_add_marker(_,n));n=e.date.add(n,1,"day")}}return a};e.markTimespan=function(t){var a=false;if(!this._els["dhx_cal_data"]){e.get_elements();a=true}var r=e._marked_timespans_ids,n=e._marked_timespans_types,i=e._marked_timespans;e.deleteMarkedTimespan();e.addMarkedTimespan(t);var s=e._mark_timespans();if(a)e._els=[];e._marked_timespans_ids=r;e._marked_timespans_types=n;e._marked_timespans=i;return s};e.unmarkTimespan=function(e){if(!e)return;for(var t=0;t<e.length;t++){var a=e[t];if(a.parentNode){a.parentNode.removeChild(a)}}};e._addMarkerTimespanConfig=function(t){var a="global";var r=e._marked_timespans;var n=t.id;var i=e._marked_timespans_ids;if(!i[n])i[n]=[];var s=t.days;var _=t.sections;var d=t.type;t.id=n;if(_){for(var o in _){if(_.hasOwnProperty(o)){if(!r[o])r[o]={};var f=_[o];var l=r[o];if(!l[f])l[f]={};if(!l[f][s])l[f][s]={};if(!l[f][s][d]){l[f][s][d]=[];if(!e._marked_timespans_types)e._marked_timespans_types={};if(!e._marked_timespans_types[d])e._marked_timespans_types[d]=true}var v=l[f][s][d];t._array=v;v.push(t);i[n].push(t)}}}else{if(!r[a][s])r[a][s]={};if(!r[a][s][d])r[a][s][d]=[];if(!e._marked_timespans_types)e._marked_timespans_types={};if(!e._marked_timespans_types[d])e._marked_timespans_types[d]=true;var v=r[a][s][d];t._array=v;v.push(t);i[n].push(t)}};e._marked_timespans_ids={};e.addMarkedTimespan=function(t){var a=e._prepare_timespan_options(t);if(!a.length)return;var r=a[0].id;for(var n=0;n<a.length;n++){e._addMarkerTimespanConfig(a[n])}return r};e._add_timespan_zones=function(e,t){var a=e.slice();t=t.slice();if(!a.length)return t;for(var r=0;r<a.length;r+=2){var n=a[r];var i=a[r+1];var s=r+2==a.length;for(var _=0;_<t.length;_+=2){var d=t[_];var o=t[_+1];if(o>i&&d<=i||d<n&&o>=n){a[r]=Math.min(n,d);a[r+1]=Math.max(i,o);r-=2}else{if(!s)continue;var f=n>d?0:2;a.splice(r+f,0,d,o)}t.splice(_--,2);break}}return a};e._subtract_timespan_zones=function(e,t){var a=e.slice();for(var r=0;r<a.length;r+=2){var n=a[r];var i=a[r+1];for(var s=0;s<t.length;s+=2){var _=t[s];var d=t[s+1];if(d>n&&_<i){var o=false;if(n>=_&&i<=d){a.splice(r,2)}if(n<_){a.splice(r,2,n,_);o=true}if(i>d){a.splice(o?r+2:r,o?0:2,d,i)}r-=2;break}else{continue}}}return a};e.invertZones=function(t){return e._subtract_timespan_zones([0,1440],t.slice())};e._delete_marked_timespan_by_id=function(t){var a=e._marked_timespans_ids[t];if(a){for(var r=0;r<a.length;r++){var n=a[r];var i=n._array;for(var s=0;s<i.length;s++){if(i[s]==n){i.splice(s,1);break}}}}};e._delete_marked_timespan_by_config=function(t){var a=e._marked_timespans;var n=t.sections;var i=t.days;var s=t.type||r;var _;if(n){for(var d in n){if(n.hasOwnProperty(d)&&a[d]){var o=n[d];if(a[d][o]){_=a[d][o]}}}}else{_=a.global}if(_){if(i!==undefined){if(_[i]&&_[i][s]){e._addMarkerTimespanConfig(t);e._delete_marked_timespans_list(_[i][s],t)}}else{for(var f in _){if(_[f][s]){var l=e._lame_clone(t);t.days=f;e._addMarkerTimespanConfig(l);e._delete_marked_timespans_list(_[f][s],t)}}}}};e._delete_marked_timespans_list=function(t,a){for(var r=0;r<t.length;r++){var n=t[r];var i=e._subtract_timespan_zones(n.zones,a.zones);if(i.length)n.zones=i;else{t.splice(r,1);r--;var s=e._marked_timespans_ids[n.id];for(var _=0;_<s.length;_++){if(s[_]==n){s.splice(_,1);break}}}}};e.deleteMarkedTimespan=function(t){if(!arguments.length){e._marked_timespans={global:{}};e._marked_timespans_ids={};e._marked_timespans_types={}}if(typeof t!="object"){e._delete_marked_timespan_by_id(t)}else{if(!(t.start_date&&t.end_date)){if(t.days===undefined&&!t.type)t.days="fullweek";if(!t.zones)t.zones="fullday"}var a=[];if(!t.type){for(var r in e._marked_timespans_types){a.push(r)}}else{a.push(t.type)}var n=e._prepare_timespan_options(t);for(var i=0;i<n.length;i++){var s=n[i];for(var _=0;_<a.length;_++){var d=e._lame_clone(s);d.type=a[_];e._delete_marked_timespan_by_config(d)}}}};e._get_types_to_render=function(t,a){var r=t?e._lame_copy({},t):{};for(var n in a||{}){if(a.hasOwnProperty(n)){r[n]=a[n]}}return r};e._get_configs_to_render=function(e){var t=[];for(var a in e){if(e.hasOwnProperty(a)){t.push.apply(t,e[a])}}return t};e._on_scale_add_marker=function(t,a){if(e._table_view&&e._mode!="month")return;var r=a.getDay();var n=a.valueOf();var i=this._mode;var s=e._marked_timespans;var _=[];var d=[];if(this._props&&this._props[i]){var o=this._props[i];var f=o.options;var l=e._get_unit_index(o,a);var v=f[l];if(!(o.days>1)){a=e.date.date_part(new Date(this._date))}else{var u=24*60*60*1e3;var c=Math.round((a-e._min_date)/u);var m=o.size||f.length;a=e.date.add(e._min_date,Math.floor(c/m),"day");a=e.date.date_part(a)}r=a.getDay();n=a.valueOf();if(s[i]&&s[i][v.key]){var p=s[i][v.key];var h=e._get_types_to_render(p[r],p[n]);_.push.apply(_,e._get_configs_to_render(h))}}var g=s["global"];var y=g[n]||g[r];_.push.apply(_,e._get_configs_to_render(y));for(var k=0;k<_.length;k++){d.push.apply(d,e._render_marked_timespan(_[k],t,a))}return d};e.attachEvent("onScaleAdd",function(){e._on_scale_add_marker.apply(e,arguments)});e.dblclick_dhx_marked_timespan=function(t,a){e.callEvent("onScaleDblClick",[e.getActionData(t).date,a,t]);if(e.config.dblclick_create){e.addEventNow(e.getActionData(t).date,null,t)}}};e._temp_limit_scope()});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_map_view.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e.xy.map_date_width=188;e.xy.map_icon_width=25;e.xy.map_description_width=400;e.config.map_resolve_event_location=true;e.config.map_resolve_user_location=true;e.config.map_initial_position=new google.maps.LatLng(48.724,8.215);e.config.map_error_position=new google.maps.LatLng(15,15);e.config.map_infowindow_max_width=300;e.config.map_type=google.maps.MapTypeId.ROADMAP;e.config.map_zoom_after_resolve=15;e.locale.labels.marker_geo_success="It seems you are here.";e.locale.labels.marker_geo_fail="Sorry, could not get your current position using geolocation.";e.templates.marker_date=e.date.date_to_str("%Y-%m-%d %H:%i");e.templates.marker_text=function(t,a,n){return"<div><b>"+n.text+"</b><br/><br/>"+(n.event_location||"")+"<br/><br/>"+e.templates.marker_date(t)+" - "+e.templates.marker_date(a)+"</div>"};e.dblclick_dhx_map_area=function(){if(!this.config.readonly&&this.config.dblclick_create)this.addEventNow({start_date:e._date,end_date:e.date.add(e._date,e.config.time_step,"minute")})};e.templates.map_time=function(t,a,n){if(e.config.rtl&&!n._timed){return e.templates.day_date(a)+" &ndash; "+e.templates.day_date(t)}else if(n._timed){return this.day_date(n.start_date,n.end_date,n)+" "+this.event_date(t)}else{return e.templates.day_date(t)+" &ndash; "+e.templates.day_date(a)}};e.templates.map_text=function(e,t,a){return a.text};e.date.map_start=function(e){return e};e.date.add_map=function(e,t,a){return new Date(e.valueOf())};e.templates.map_date=function(e,t,a){return""};e._latLngUpdate=false;e.attachEvent("onSchedulerReady",function(){e._isMapPositionSet=false;var t=document.createElement("div");t.className="dhx_map";t.id="dhx_gmap";t.style.dispay="none";var a=e._obj;a.appendChild(t);e._els.dhx_gmap=[];e._els.dhx_gmap.push(t);s("dhx_gmap");var n={zoom:e.config.map_inital_zoom||10,center:e.config.map_initial_position,mapTypeId:e.config.map_type||google.maps.MapTypeId.ROADMAP};var i=new google.maps.Map(document.getElementById("dhx_gmap"),n);i.disableDefaultUI=false;i.disableDoubleClickZoom=!e.config.readonly;google.maps.event.addListener(i,"dblclick",function(t){if(!e.config.readonly&&e.config.dblclick_create){var a=t.latLng;geocoder.geocode({latLng:a},function(t,n){if(n==google.maps.GeocoderStatus.OK){a=t[0].geometry.location;e.addEventNow({lat:a.lat(),lng:a.lng(),event_location:t[0].formatted_address,start_date:e._date,end_date:e.date.add(e._date,e.config.time_step,"minute")})}})}});var _={content:""};if(e.config.map_infowindow_max_width){_.maxWidth=e.config.map_infowindow_max_width}e.map={_points:[],_markers:[],_infowindow:new google.maps.InfoWindow(_),_infowindows_content:[],_initialization_count:-1,_obj:i};geocoder=new google.maps.Geocoder;if(e.config.map_resolve_user_location){if(navigator.geolocation){if(!e._isMapPositionSet){navigator.geolocation.getCurrentPosition(function(t){var a=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);i.setCenter(a);i.setZoom(e.config.map_zoom_after_resolve||10);e.map._infowindow.setContent(e.locale.labels.marker_geo_success);e.map._infowindow.position=i.getCenter();e.map._infowindow.open(i);e._isMapPositionSet=true},function(){e.map._infowindow.setContent(e.locale.labels.marker_geo_fail);e.map._infowindow.setPosition(i.getCenter());e.map._infowindow.open(i);e._isMapPositionSet=true})}}}google.maps.event.addListener(i,"resize",function(e){t.style.zIndex="5";i.setZoom(i.getZoom())});google.maps.event.addListener(i,"tilesloaded",function(e){t.style.zIndex="5"});t.style.display="none";var o=e.render_data;e.render_data=function(t,a){if(this._mode=="map"){l();var n=e.get_visible_events();for(var i=0;i<n.length;i++){if(!e.map._markers[n[i].id]){p(n[i],false,false)}}}else return o.apply(this,arguments)};function d(t){if(t){var a=e.locale.labels;e._els["dhx_cal_header"][0].innerHTML="<div class='dhx_map_line' style='width: "+(e.xy.map_date_width+e.xy.map_description_width+2)+"px;' ><div class='headline_date' style='width: "+e.xy.map_date_width+"px;'>"+a.date+"</div><div class='headline_description' style='width: "+e.xy.map_description_width+"px;'>"+a.description+"</div></div>";e._table_view=true;e.set_sizes()}}function r(){e._selected_event_id=null;e.map._infowindow.close();var t=e.map._markers;for(var a in t){if(t.hasOwnProperty(a)){t[a].setMap(null);delete e.map._markers[a];if(e.map._infowindows_content[a])delete e.map._infowindows_content[a]}}}function l(){var t=e.get_visible_events();t.sort(function(e,t){if(e.start_date.valueOf()==t.start_date.valueOf())return e.id>t.id?1:-1;return e.start_date>t.start_date?1:-1});var a=e._waiAria.mapAttrString();var n="<div "+a+" class='dhx_map_area'>";for(var i=0;i<t.length;i++){var _=t[i];var o=_.id==e._selected_event_id?"dhx_map_line highlight":"dhx_map_line";var d=_.color?"background:"+_.color+";":"";var r=_.textColor?"color:"+_.textColor+";":"";var a=e._waiAria.mapRowAttrString(_);var l=e._waiAria.mapDetailsBtnString();n+="<div "+a+" class='"+o+"' event_id='"+_.id+"' style='"+d+""+r+""+(_._text_style||"")+" width: "+(e.xy.map_date_width+e.xy.map_description_width+2)+"px;'><div class='dhx_map_event_time' style='width: "+e.xy.map_date_width+"px;' >"+e.templates.map_time(_.start_date,_.end_date,_)+"</div>";n+="<div "+l+" class='dhx_event_icon icon_details'>&nbsp;</div>";n+="<div class='line_description' style='width:"+(e.xy.map_description_width-e.xy.map_icon_width)+"px;'>"+e.templates.map_text(_.start_date,_.end_date,_)+"</div></div>"}n+="<div class='dhx_v_border' style="+(e.config.rtl?"'right: ":"'left: ")+(e.xy.map_date_width-2)+"px;'></div><div class='dhx_v_border_description'></div></div>";e._els["dhx_cal_data"][0].scrollTop=0;e._els["dhx_cal_data"][0].innerHTML=n;e._els["dhx_cal_data"][0].style.width=e.xy.map_date_width+e.xy.map_description_width+1+"px";var s=e._els["dhx_cal_data"][0].firstChild.childNodes;var m=e._getNavDateElement();if(m){m.innerHTML=e.templates[e._mode+"_date"](e._min_date,e._max_date,e._mode)}e._rendered=[];for(var i=0;i<s.length-2;i++){e._rendered[i]=s[i]}}function s(t){var a=document.getElementById(t);var n=e._y-e.xy.nav_height;if(n<0)n=0;var i=e._x-e.xy.map_date_width-e.xy.map_description_width-1;if(i<0)i=0;a.style.height=n+"px";a.style.width=i+"px";if(e.config.rtl){a.style.marginRight=e.xy.map_date_width+e.xy.map_description_width+1+"px"}else{a.style.marginLeft=e.xy.map_date_width+e.xy.map_description_width+1+"px"}a.style.marginTop=e.xy.nav_height+2+"px"}e.map_view=function(t){e.map._initialization_count++;var a=e._els.dhx_gmap[0];var n;e._els.dhx_cal_data[0].style.width=e.xy.map_date_width+e.xy.map_description_width+1+"px";e._min_date=e.config.map_start||e._currentDate();e._max_date=e.config.map_end||e.date.add(e._currentDate(),1,"year");e._table_view=true;d(t);if(t){r();l();a.style.display="block";s("dhx_gmap");n=e.map._obj.getCenter();var i=e.get_visible_events();for(var _=0;_<i.length;_++){if(!e.map._markers[i[_].id]){p(i[_])}}}else{a.style.display="none"}google.maps.event.trigger(e.map._obj,"resize");if(e.map._initialization_count===0&&n){e.map._obj.setCenter(n)}if(e._selected_event_id){m(e._selected_event_id)}};var m=function(t){e.map._obj.setCenter(e.map._points[t]);e.callEvent("onClick",[t])};var p=function(t,a,n){var i=e.config.map_error_position;if(t.lat&&t.lng){i=new google.maps.LatLng(t.lat,t.lng)}var _=e.templates.marker_text(t.start_date,t.end_date,t);if(!e._new_event){e.map._infowindows_content[t.id]=_;if(e.map._markers[t.id])e.map._markers[t.id].setMap(null);e.map._markers[t.id]=new google.maps.Marker({position:i,map:e.map._obj});google.maps.event.addListener(e.map._markers[t.id],"click",function(){e.map._infowindow.setContent(e.map._infowindows_content[t.id]);e.map._infowindow.open(e.map._obj,e.map._markers[t.id]);e._selected_event_id=t.id;e.render_data()});e.map._points[t.id]=i;if(a)e.map._obj.setCenter(e.map._points[t.id]);if(n)e.callEvent("onClick",[t.id])}};e.attachEvent("onClick",function(t,a){if(this._mode=="map"){e._selected_event_id=t;for(var n=0;n<e._rendered.length;n++){e._rendered[n].className="dhx_map_line";if(e._rendered[n].getAttribute("event_id")==t){e._rendered[n].className+=" highlight"}}if(e.map._points[t]&&e.map._markers[t]){e.map._obj.setCenter(e.map._points[t]);google.maps.event.trigger(e.map._markers[t],"click")}}return true});var c=function(t){if(t.event_location&&geocoder){geocoder.geocode({address:t.event_location,language:e.uid().toString()},function(a,n){var i={};if(n!=google.maps.GeocoderStatus.OK){i=e.callEvent("onLocationError",[t.id]);if(!i||i===true)i=e.config.map_error_position}else{i=a[0].geometry.location}t.lat=i.lat();t.lng=i.lng();e._selected_event_id=t.id;e._latLngUpdate=true;e.callEvent("onEventChanged",[t.id,t]);p(t,true,true)})}else{p(t,true,true)}};var f=function(t){if(t.event_location&&geocoder){geocoder.geocode({address:t.event_location,language:e.uid().toString()},function(a,n){var i={};if(n!=google.maps.GeocoderStatus.OK){i=e.callEvent("onLocationError",[t.id]);if(!i||i===true)i=e.config.map_error_position}else{i=a[0].geometry.location}t.lat=i.lat();t.lng=i.lng();e._latLngUpdate=true;e.callEvent("onEventChanged",[t.id,t])})}};var g=function(e,t,a,n){setTimeout(function(){var n=e.apply(t,a);e=t=a=null;return n},n||1)};e.attachEvent("onEventChanged",function(t,a){if(!this._latLngUpdate){var n=e.getEvent(t);if(n.start_date<e._min_date&&n.end_date>e._min_date||n.start_date<e._max_date&&n.end_date>e._max_date||n.start_date.valueOf()>=e._min_date&&n.end_date.valueOf()<=e._max_date){if(e.map._markers[t])e.map._markers[t].setMap(null);c(n)}else{e._selected_event_id=null;e.map._infowindow.close();if(e.map._markers[t])e.map._markers[t].setMap(null)}}else this._latLngUpdate=false;return true});e.attachEvent("onEventIdChange",function(t,a){var n=e.getEvent(a);if(n.start_date<e._min_date&&n.end_date>e._min_date||n.start_date<e._max_date&&n.end_date>e._max_date||n.start_date.valueOf()>=e._min_date&&n.end_date.valueOf()<=e._max_date){if(e.map._markers[t]){e.map._markers[t].setMap(null);delete e.map._markers[t]}if(e.map._infowindows_content[t])delete e.map._infowindows_content[t];c(n)}return true});e.attachEvent("onEventAdded",function(t,a){if(!e._dataprocessor){if(a.start_date<e._min_date&&a.end_date>e._min_date||a.start_date<e._max_date&&a.end_date>e._max_date||a.start_date.valueOf()>=e._min_date&&a.end_date.valueOf()<=e._max_date){if(e.map._markers[t])e.map._markers[t].setMap(null);c(a)}}return true});e.attachEvent("onBeforeEventDelete",function(t,a){if(e.map._markers[t]){e.map._markers[t].setMap(null)}e._selected_event_id=null;e.map._infowindow.close();return true});e._event_resolve_delay=1500;e.attachEvent("onEventLoading",function(t){if(e.config.map_resolve_event_location&&t.event_location&&!t.lat&&!t.lng){e._event_resolve_delay+=1500;g(f,this,[t],e._event_resolve_delay)}return true});e.attachEvent("onEventCancel",function(t,a){if(a){if(e.map._markers[t])e.map._markers[t].setMap(null);e.map._infowindow.close()}return true})})});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_minical.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e.templates.calendar_month=e.date.date_to_str("%F %Y");e.templates.calendar_scale_date=e.date.date_to_str("%D");e.templates.calendar_date=e.date.date_to_str("%d");e.config.minicalendar={mark_events:true};e._synced_minicalendars=[];e.renderCalendar=function(t,a,n){var r=null;var i=t.date||e._currentDate();if(typeof i=="string")i=this.templates.api_date(i);if(!a){var d=t.container;var _=t.position;if(typeof d=="string")d=document.getElementById(d);if(typeof _=="string")_=document.getElementById(_);if(_&&(typeof _.left=="undefined"&&typeof _.right=="undefined")){var l=e.$domHelpers.getOffset(_);_={top:l.top+_.offsetHeight,left:l.left}}if(!d)d=e._get_def_cont(_);r=this._render_calendar(d,i,t);r.onclick=function(t){t=t||event;var a=t.target||t.srcElement;var n=e.$domHelpers;if(n.closest(a,".dhx_month_head")){if(!n.closest(a,".dhx_after")&&!n.closest(a,".dhx_before")){var r=n.closest(a,"[data-cell-date]");var i=r.getAttribute("data-cell-date");var d=e.templates.parse_date(i);e.unmarkCalendar(this);e.markCalendar(this,d,"dhx_calendar_click");this._last_date=d;if(this.conf.handler)this.conf.handler.call(e,d,this)}}}}else{r=this._render_calendar(a.parentNode,i,t,a);e.unmarkCalendar(r)}if(e.config.minicalendar.mark_events){var s=e.date.month_start(i);var o=e.date.add(s,1,"month");var c=this.getEvents(s,o);var u=this["filter_"+this._mode];var f={};for(var h=0;h<c.length;h++){var v=c[h];if(u&&!u(v.id,v))continue;var m=v.start_date;if(m.valueOf()<s.valueOf())m=s;m=e.date.date_part(new Date(m.valueOf()));while(m<v.end_date){if(!f[+m]){f[+m]=true;this.markCalendar(r,m,"dhx_year_event")}m=this.date.add(m,1,"day");if(m.valueOf()>=o.valueOf())break}}}this._markCalendarCurrentDate(r);r.conf=t;if(t.sync&&!n)this._synced_minicalendars.push(r);if(!r.conf._on_xle_handler){r.conf._on_xle_handler=e.attachEvent("onXLE",function t(){e.updateCalendar(r,r.conf.date)})}if(this.config.wai_aria_attributes&&this.config.wai_aria_application_role){r.setAttribute("role","application")}return r};e._get_def_cont=function(e){if(!this._def_count){this._def_count=document.createElement("div");this._def_count.className="dhx_minical_popup";this._def_count.onclick=function(e){(e||event).cancelBubble=true};document.body.appendChild(this._def_count)}if(e.left){this._def_count.style.left=e.left+"px"}if(e.right){this._def_count.style.right=e.right+"px"}if(e.top){this._def_count.style.top=e.top+"px"}if(e.bottom){this._def_count.style.bottom=e.bottom+"px"}this._def_count._created=new Date;return this._def_count};e._locateCalendar=function(t,a){if(typeof a=="string")a=e.templates.api_date(a);if(+a>+t._max_date||+a<+t._min_date)return null;var n=t.querySelector(".dhx_year_body").childNodes[0];var r=0;var i=new Date(t._min_date);while(+this.date.add(i,1,"week")<=+a){i=this.date.add(i,1,"week");r++}var d=e.config.start_on_monday;var _=(a.getDay()||(d?7:0))-(d?1:0);return n.rows[r].cells[_].firstChild};e.markCalendar=function(e,t,a){var n=this._locateCalendar(e,t);if(!n)return;n.className+=" "+a};e.unmarkCalendar=function(e,t,a){t=t||e._last_date;a=a||"dhx_calendar_click";if(!t)return;var n=this._locateCalendar(e,t);if(!n)return;n.className=(n.className||"").replace(RegExp(a,"g"))};e._week_template=function(t){var a=t||250;var n=0;var r=document.createElement("div");var i=this.date.week_start(e._currentDate());for(var d=0;d<7;d++){this._cols[d]=Math.floor(a/(7-d));this._render_x_header(d,n,i,r);i=this.date.add(i,1,"day");a-=this._cols[d];n+=this._cols[d]}r.lastChild.className+=" dhx_scale_bar_last";return r};e.updateCalendar=function(e,t){e.conf.date=t;this.renderCalendar(e.conf,e,true)};e._mini_cal_arrows=["&nbsp;","&nbsp;"];e._render_calendar=function(t,a,n,r){var i=e.templates;var d=this._cols;this._cols=[];var _=this._mode;this._mode="calendar";var l=this._colsS;this._colsS={height:0};var s=new Date(this._min_date);var o=new Date(this._max_date);var c=new Date(e._date);var u=i.month_day;var f=this._ignores_detected;this._ignores_detected=0;i.month_day=i.calendar_date;a=this.date.month_start(a);var h=this._week_template(t.offsetWidth-1-this.config.minicalendar.padding);var v;if(r){v=r}else{v=document.createElement("div");v.className="dhx_cal_container dhx_mini_calendar"}v.setAttribute("date",this._helpers.formatDate(a));v.innerHTML="<div class='dhx_year_month'></div>"+"<div class='dhx_year_grid"+(e.config.rtl?" dhx_grid_rtl'>":"'>")+"<div class='dhx_year_week'>"+(h?h.innerHTML:"")+"</div>"+"<div class='dhx_year_body'></div>"+"</div>";var m=v.querySelector(".dhx_year_month");var p=v.querySelector(".dhx_year_week");var g=v.querySelector(".dhx_year_body");m.innerHTML=this.templates.calendar_month(a);if(n.navigation){var y=function(t,a){var n=e.date.add(t._date,a,"month");e.updateCalendar(t,n);if(e._date.getMonth()==t._date.getMonth()&&e._date.getFullYear()==t._date.getFullYear()){e._markCalendarCurrentDate(t)}};var x=["dhx_cal_prev_button","dhx_cal_next_button"];var w=["left:1px;top:2px;position:absolute;","left:auto; right:1px;top:2px;position:absolute;"];var b=[-1,1];var k=function(t){return function(){if(n.sync){var a=e._synced_minicalendars;for(var r=0;r<a.length;r++){y(a[r],t)}}else{if(e.config.rtl){t=-t}y(v,t)}}};var C=[e.locale.labels.prev,e.locale.labels.next];for(var D=0;D<2;D++){var E=document.createElement("div");E.className=x[D];e._waiAria.headerButtonsAttributes(E,C[D]);E.style.cssText=w[D];E.innerHTML=this._mini_cal_arrows[D];m.appendChild(E);E.onclick=k(b[D])}}v._date=new Date(a);v.week_start=(a.getDay()-(this.config.start_on_monday?1:0)+7)%7;var H=v._min_date=this.date.week_start(a);v._max_date=this.date.add(v._min_date,6,"week");this._reset_month_scale(g,a,H,6);if(!r)t.appendChild(v);p.style.height=p.childNodes[0].offsetHeight-1+"px";var N=e.uid();e._waiAria.minicalHeader(m,N);e._waiAria.minicalGrid(v.querySelector(".dhx_year_grid"),N);e._waiAria.minicalRow(p);var O=p.querySelectorAll(".dhx_scale_bar");for(var M=0;M<O.length;M++){e._waiAria.minicalHeadCell(O[M])}var S=g.querySelectorAll("td");var T=new Date(H);for(var M=0;M<S.length;M++){e._waiAria.minicalDayCell(S[M],new Date(T));T=e.date.add(T,1,"day")}e._waiAria.minicalHeader(m,N);this._cols=d;this._mode=_;this._colsS=l;this._min_date=s;this._max_date=o;e._date=c;i.month_day=u;this._ignores_detected=f;return v};e.destroyCalendar=function(t,a){if(!t&&this._def_count&&this._def_count.firstChild){if(a||(new Date).valueOf()-this._def_count._created.valueOf()>500)t=this._def_count.firstChild}if(!t)return;t.onclick=null;t.innerHTML="";if(t.parentNode)t.parentNode.removeChild(t);if(this._def_count)this._def_count.style.top="-1000px";if(t.conf&&t.conf._on_xle_handler)e.detachEvent(t.conf._on_xle_handler)};e.isCalendarVisible=function(){if(this._def_count&&parseInt(this._def_count.style.top,10)>0)return this._def_count;return false};e._attach_minical_events=function(){e.event(document.body,"click",function(){e.destroyCalendar()});e._attach_minical_events=function(){}};e.attachEvent("onTemplatesReady",function(){e._attach_minical_events()});e.templates.calendar_time=e.date.date_to_str("%d-%m-%Y");e.form_blocks.calendar_time={render:function(t){var a="<input class='dhx_readonly' type='text' readonly='true'>";var n=e.config;var r=this.date.date_part(e._currentDate());var i=24*60,d=0;if(n.limit_time_select){d=60*n.first_hour;i=60*n.last_hour+1}r.setHours(d/60);t._time_values=[];a+=" <select class='dhx_lightbox_time_select'>";for(var _=d;_<i;_+=this.config.time_step*1){var l=this.templates.time_picker(r);a+="<option value='"+_+"'>"+l+"</option>";t._time_values.push(_);r=this.date.add(r,this.config.time_step,"minute")}a+="</select>";var s=e.config.full_day;return"<div style='height:30px;padding-top:0; font-size:inherit;' class='dhx_section_time dhx_lightbox_minical'>"+a+"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>"+a+"</div>"},set_value:function(t,a,n,r){var i=t.getElementsByTagName("input");var d=t.getElementsByTagName("select");var _,l;var s=function(t,a,n){t.onclick=function(){e.destroyCalendar(null,true);e.renderCalendar({position:t,date:new Date(this._date),navigation:true,handler:function(a){t.value=e.templates.calendar_time(a);t._date=new Date(a);e.destroyCalendar();if(e.config.event_duration&&e.config.auto_end_date&&n===0){f()}}})}};if(e.config.full_day){if(!t._full_day){var o="<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> "+e.locale.labels.full_day+"&nbsp;</label></input>";if(!e.config.wide_form)o=t.previousSibling.innerHTML+o;t.previousSibling.innerHTML=o;t._full_day=true}var c=t.previousSibling.getElementsByTagName("input")[0];var u=e.date.time_part(n.start_date)===0&&e.date.time_part(n.end_date)===0;c.checked=u;d[0].disabled=c.checked;d[1].disabled=c.checked;c.onclick=function(){if(c.checked===true){var a={};e.form_blocks.calendar_time.get_value(t,a);_=e.date.date_part(a.start_date);l=e.date.date_part(a.end_date);if(+l==+_||+l>=+_&&(n.end_date.getHours()!==0||n.end_date.getMinutes()!==0))l=e.date.add(l,1,"day")}var r=_||n.start_date;var s=l||n.end_date;h(i[0],r);h(i[1],s);d[0].value=r.getHours()*60+r.getMinutes();d[1].value=s.getHours()*60+s.getMinutes();d[0].disabled=c.checked;d[1].disabled=c.checked}}if(e.config.event_duration&&e.config.auto_end_date){var f=function(){_=e.date.add(i[0]._date,d[0].value,"minute");l=new Date(_.getTime()+e.config.event_duration*60*1e3);i[1].value=e.templates.calendar_time(l);i[1]._date=e.date.date_part(new Date(l));d[1].value=l.getHours()*60+l.getMinutes()};d[0].onchange=f}function h(t,a,n){s(t,a,n);t.value=e.templates.calendar_time(a);t._date=e.date.date_part(new Date(a))}h(i[0],n.start_date,0);h(i[1],n.end_date,1);s=function(){};function v(e){var t=r._time_values;var a=e.getHours()*60+e.getMinutes();var n=a;var i=false;for(var d=0;d<t.length;d++){var _=t[d];if(_===a){i=true;break}if(_<a)n=_}if(!(i||n))return-1;return i?a:n}d[0].value=v(n.start_date);d[1].value=v(n.end_date)},get_value:function(t,a){var n=t.getElementsByTagName("input");var r=t.getElementsByTagName("select");a.start_date=e.date.add(n[0]._date,r[0].value,"minute");a.end_date=e.date.add(n[1]._date,r[1].value,"minute");if(a.end_date<=a.start_date)a.end_date=e.date.add(a.start_date,e.config.time_step,"minute");return{start_date:new Date(a.start_date),end_date:new Date(a.end_date)}},focus:function(e){}};e.linkCalendar=function(t,a){var n=function(){var n=e._date;var r=new Date(n.valueOf());if(a)r=a(r);r.setDate(1);e.updateCalendar(t,r);return true};e.attachEvent("onViewChange",n);e.attachEvent("onXLE",n);e.attachEvent("onEventAdded",n);e.attachEvent("onEventChanged",n);e.attachEvent("onEventDeleted",n);n()};e._markCalendarCurrentDate=function(t){var a=e.getState();var n=a.min_date;var r=a.max_date;var i=a.mode;var d=e.date.month_start(new Date(t._date));var _=e.date.add(d,1,"month");var l={month:true,year:true,agenda:true,grid:true};if(l[i]||n.valueOf()<=d.valueOf()&&r.valueOf()>=_.valueOf()){return}var s=n;while(s.valueOf()<r.valueOf()){if(d.valueOf()<=s.valueOf()&&_>s){e.markCalendar(t,s,"dhx_calendar_click")}s=e.date.add(s,1,"day")}};e.attachEvent("onEventCancel",function(){e.destroyCalendar(null,true)})});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_monthheight.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e.attachEvent("onTemplatesReady",function(){e.xy.scroll_width=0;var t=e.render_view_data;e.render_view_data=function(){var i=this._els["dhx_cal_data"][0];i.firstChild._h_fix=true;t.apply(e,arguments);var h=parseInt(i.style.height);i.style.height="1px";i.style.height=i.scrollHeight+"px";this._obj.style.height=this._obj.clientHeight+i.scrollHeight-h+"px"};var i=e._reset_month_scale;e._reset_month_scale=function(t,h,l,n){var a={clientHeight:100};i.apply(e,[a,h,l,n]);t.innerHTML=a.innerHTML}})});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_multisection.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e.config.multisection=true;e.config.multisection_shift_all=true;e.config.section_delimiter=",";e.attachEvent("onSchedulerReady",function(){if(!e._inited_multisection_copies){e.attachEvent("onEventIdChange",function(e,t){var i=this._multisection_copies;if(!i)return;if(i[e]&&!i[t]){var n=i[e];delete i[e];i[t]=n}});e._inited_multisection_copies=true}e._register_copies_array=function(e){for(var t=0;t<e.length;t++)this._register_copy(e[t])};e._register_copy=function(e){if(!this._multisection_copies){return}if(!this._multisection_copies[e.id]){this._multisection_copies[e.id]={}}var t=e[this._get_section_property()];var i=this._multisection_copies[e.id];i[t]=e};e._get_copied_event=function(t,i){if(!this._multisection_copies[t])return null;if(this._multisection_copies[t][i])return this._multisection_copies[t][i];var n=this._multisection_copies[t];if(e._drag_event&&e._drag_event._orig_section&&n[e._drag_event._orig_section]){return n[e._drag_event._orig_section]}else{var _=Infinity,s=null;for(var r in n){if(n[r]._sorder<_){s=n[r];_=n[r]._sorder}}return s}};e._clear_copied_events=function(){this._multisection_copies={}};e._restore_render_flags=function(t){var i=this._get_section_property();for(var n=0;n<t.length;n++){var _=t[n];var s=e._get_copied_event(_.id,_[i]);if(s){for(var r in s){if(r.indexOf("_")===0){_[r]=s[r]}}}}};var t=e._update_unit_section;e._update_unit_section=function(i){return e._update_sections(i,t)};var i=e._update_timeline_section;e._update_timeline_section=function(t){return e._update_sections(t,i)};e.isMultisectionEvent=function(e){if(e&&this._get_multisection_view()){var t=this._get_event_sections(e);return t.length>1}return false};e._get_event_sections=function(e){var t=this._get_section_property();var i=e[t]||"";return this._parse_event_sections(i)};e._parse_event_sections=function(t){if(t instanceof Array){return t}else{return t.toString().split(e.config.section_delimiter)}};e._clear_copied_events();e._split_events=function(t){var i=[];var n=this._get_multisection_view();var _=this._get_section_property();if(n){for(var s=0;s<t.length;s++){var r=this._get_event_sections(t[s]);if(r.length>1){for(var o=0;o<r.length;o++){if(typeof n.order[r[o]]==="undefined")continue;var c=e._copy_event(t[s]);c[_]=r[o];i.push(c)}}else{i.push(t[s])}}}else{i=t}return i};e._get_multisection_view=function(){if(!this.config.multisection){return false}else{return e._get_section_view()}};var n=e.get_visible_events;e.get_visible_events=function(e){this._clear_copied_events();var t=n.apply(this,arguments);if(this._get_multisection_view()){t=this._split_events(t);for(var i=0;i<t.length;i++){if(!this.is_visible_events(t[i])){t.splice(i,1);i--}}this._register_copies_array(t)}return t};e._rendered_events={};var _=e.render_view_data;e.render_view_data=function(e,t){if(this._get_multisection_view()&&e){e=this._split_events(e);this._restore_render_flags(e)}return _.apply(this,[e,t])};e._update_sections=function(t,i){var n=t.view,_=t.event,s=t.pos,r=true;if(!e.isMultisectionEvent(_)){i.apply(e,[t])}else{if(!e._drag_event._orig_section){e._drag_event._orig_section=s.section}if(e._drag_event._orig_section!=s.section){var o=n.order[s.section]-n.order[e._drag_event._orig_section];if(o){var c=this._get_event_sections(_);var a=[];var l=true;if(e.config.multisection_shift_all){for(var v=0;v<c.length;v++){var u=e._shift_sections(n,c[v],o);if(u!==null){a[v]=u}else{a=c;l=false;break}}}else{for(var v=0;v<c.length;v++){if(c[v]==s.section){a=c;l=false;break}if(c[v]==e._drag_event._orig_section){var u=e._shift_sections(n,c[v],o);if(u!==null){a[v]=u}else{a=c;l=false;break}}else{a[v]=c[v]}}}if(l)e._drag_event._orig_section=s.section;_[e._get_section_property()]=a.join(e.config.section_delimiter)}}}};e._shift_sections=function(e,t,i){var n=null;var _=e.y_unit||e.options;for(var s=0;s<_.length;s++){if(_[s].key==t){n=s;break}}var r=_[n+i];if(!r){return null}return r.key};var s=e._get_blocked_zones;e._get_blocked_zones=function(e,t,i,n,_){if(t&&this.config.multisection){t=this._parse_event_sections(t);var r=[];for(var o=0;o<t.length;o++){r=r.concat(s.apply(this,[e,t[o],i,n,_]))}return r}else{return s.apply(this,arguments)}};var r=e._check_sections_collision;e._check_sections_collision=function(e,t){if(this.config.multisection&&this._get_section_view()){e=this._split_events([e]);t=this._split_events([t]);var i=false;for(var n=0,_=e.length;n<_;n++){if(i){break}for(var s=0,o=t.length;s<o;s++){if(r.apply(this,[e[n],t[s]])){i=true;break}}}return i}else{return r.apply(this,arguments)}}})});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_multiselect.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){function t(t,r){var i=e.$ajax.xpath("//data/item",t.xmlDoc);var a={};for(var l=0;l<i.length;l++){a[i[l].getAttribute(r.map_to)]=true}return a}function r(e,t){try{var r=JSON.parse(e.xmlDoc.responseText);var i={};for(var a=0;a<r.length;a++){var l=r[a];i[l.value||l.key||l.id]=true}return i}catch(e){return null}}e.form_blocks["multiselect"]={render:function(e){var t="dhx_multi_select_control dhx_multi_select_"+e.name;if(!!e.vertical){t+=" dhx_multi_select_control_vertical"}var r="<div class='"+t+"' style='overflow: auto; height: "+e.height+"px; position: relative;' >";for(var i=0;i<e.options.length;i++){r+="<label><input type='checkbox' value='"+e.options[i].key+"'/>"+e.options[i].label+"</label>";if(!!e.vertical)r+="<br/>"}r+="</div>";return r},set_value:function(i,a,l,n){var o=i.getElementsByTagName("input");for(var c=0;c<o.length;c++){o[c].checked=false}function u(e){var t=i.getElementsByTagName("input");for(var r=0;r<t.length;r++){t[r].checked=!!e[t[r].value]}}var v={};if(l[n.map_to]){var s=(l[n.map_to]+"").split(n.delimiter||e.config.section_delimiter||",");for(var c=0;c<s.length;c++){v[s[c]]=true}u(v)}else{if(e._new_event||!n.script_url)return;var f=document.createElement("div");f.className="dhx_loading";f.style.cssText="position: absolute; top: 40%; left: 40%;";i.appendChild(f);var d=[n.script_url,n.script_url.indexOf("?")==-1?"?":"&","dhx_crosslink_"+n.map_to+"="+l.id+"&uid="+e.uid()].join("");e.$ajax.get(d,function(e){var a=r(e,n);if(!a){a=t(e,n)}u(a);i.removeChild(f)})}},get_value:function(t,r,i){var a=[];var l=t.getElementsByTagName("input");for(var n=0;n<l.length;n++){if(l[n].checked)a.push(l[n].value)}return a.join(i.delimiter||e.config.section_delimiter||",")},focus:function(e){}}});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_multisource.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(t){(function(){function o(t){var o=function(){};o.prototype=t;return o}var n=t._load;t._load=function(t,l){t=t||this._load_url;if(typeof t=="object"){var e=o(this._loaded);for(var i=0;i<t.length;i++){this._loaded=new e;n.call(this,t[i],l)}}else n.apply(this,arguments)}})()});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_mvc.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){(function(){var n={use_id:false};function t(e){var t={};for(var i in e)if(i.indexOf("_")!==0)t[i]=e[i];if(!n.use_id)delete t.id;return t}var i;function r(){clearTimeout(i);i=setTimeout(function(){e.updateView()},1)}function o(e){e._loading=true;e._not_render=true;e.callEvent("onXLS",[])}function a(e){e._not_render=false;if(e._render_wait)e.render_view_data();e._loading=false;e.callEvent("onXLE",[])}function c(e){return n.use_id?e.id:e.cid}e.backbone=function(i,u){if(u)n=u;i.bind("change",function(n,t){var i=c(n);var o=e._events[i]=n.toJSON();o.id=i;e._init_event(o);r()});i.bind("remove",function(n,t){var i=c(n);if(e._events[i])e.deleteEvent(i)});var d=[];function v(){if(d.length){e.parse(d,"json");d=[]}}i.bind("add",function(n,t){var i=c(n);if(!e._events[i]){var r=n.toJSON();r.id=i;e._init_event(r);d.push(r);if(d.length==1)setTimeout(v,1)}});i.bind("request",function(n){if(n instanceof Backbone.Collection)o(e)});i.bind("sync",function(n){if(n instanceof Backbone.Collection)a(e)});i.bind("error",function(n){if(n instanceof Backbone.Collection)a(e)});e.attachEvent("onEventCreated",function(n){var t=new i.model(e.getEvent(n));e._events[n]=t.toJSON();e._events[n].id=n;return true});e.attachEvent("onEventAdded",function(n){if(!i.get(n)){var r=t(e.getEvent(n));var o=new i.model(r);var a=c(o);if(a!=n)this.changeEventId(n,a);i.add(o);i.trigger("scheduler:add",o)}return true});e.attachEvent("onEventChanged",function(n){var r=i.get(n);var o=t(e.getEvent(n));r.set(o);i.trigger("scheduler:change",r);return true});e.attachEvent("onEventDeleted",function(e){var n=i.get(e);if(n){i.trigger("scheduler:remove",n);i.remove(e)}return true})}})()});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_outerdrag.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(t){t.attachEvent("onTemplatesReady",function(){var a=new dhtmlDragAndDropObject;var e=a.stopDrag;var n;a.stopDrag=function(t){n=t||event;return e.apply(this,arguments)};function r(a,e,r,o){if(t.checkEvent("onBeforeExternalDragIn")&&!t.callEvent("onBeforeExternalDragIn",[a,e,r,o,n]))return;var d=t.attachEvent("onEventCreated",function(e){if(!t.callEvent("onExternalDragIn",[e,a,n])){this._drag_mode=this._drag_id=null;this.deleteEvent(e)}});var _=t.getActionData(n);var i={start_date:new Date(_.date)};if(t.matrix&&t.matrix[t._mode]){var l=t.matrix[t._mode];i[l.y_property]=_.section;var c=t._locate_cell_timeline(n);i.start_date=l._trace_x[c.x];i.end_date=t.date.add(i.start_date,l.x_step,l.x_unit)}if(t._props&&t._props[t._mode]){i[t._props[t._mode].map_to]=_.section}t.addEventNow(i);t.detachEvent(d)}a.addDragLanding(t._els["dhx_cal_data"][0],{_drag:function(t,a,e,n){r(t,a,e,n)},_dragIn:function(t,a){return t},_dragOut:function(t){return this}});if(dhtmlx.DragControl){dhtmlx.DragControl.addDrop(t._els["dhx_cal_data"][0],{onDrop:function(t,a,e,o){var d=dhtmlx.DragControl.getMaster(t);n=o;r(t,d,a,o.target||o.srcElement)},onDragIn:function(t,a,e){return a}},true)}})});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_pdf.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){(function(){var t,r,a=new RegExp("<[^>]*>","g"),o=new RegExp("<br[^>]*>","g");function n(e){return e.replace(o,"\n").replace(a,"")}function l(e,r){e=parseFloat(e);r=parseFloat(r);if(!isNaN(r))e-=r;var a=i(e);e=e-a.width+a.cols*t;return isNaN(e)?"auto":100*e/t}function d(e,r,a){e=parseFloat(e);r=parseFloat(r);if(!isNaN(r)&&a)e-=r;var o=i(e);e=e-o.width+o.cols*t;return isNaN(e)?"auto":100*e/(t-(!isNaN(r)?r:0))}function i(t){var r=0;var a=e._els.dhx_cal_header[0].childNodes;var o=a[1]?a[1].childNodes:a[0].childNodes;for(var n=0;n<o.length;n++){var l=o[n].style?o[n]:o[n].parentNode;var d=parseFloat(l.style.width);if(t>d){t-=d+1;r+=d+1}else break}return{width:r,cols:n}}function s(e){e=parseFloat(e);if(isNaN(e))return"auto";return 100*e/r}function c(e,t){return(window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle?e.currentStyle[t]:null)||""}function f(t,r){var a=parseInt(t.style.left,10);for(var o=0;o<e._cols.length;o++){a-=e._cols[o];if(a<0)return o}return r}function h(t,r){var a=parseInt(t.style.top,10);for(var o=0;o<e._colsS.heights.length;o++)if(e._colsS.heights[o]>a)return o;return r}function _(e){return e?"<"+e+">":""}function u(e){return e?"</"+e+">":""}function v(e,t,r,a){var o="<"+e+" profile='"+t+"'";if(r)o+=" header='"+r+"'";if(a)o+=" footer='"+a+"'";o+=">";return o}function m(){var t="";var a=e._mode;if(e.matrix&&e.matrix[e._mode])a=e.matrix[e._mode].render=="cell"?"matrix":"timeline";t+="<scale mode='"+a+"' today='"+e._els.dhx_cal_date[0].innerHTML+"'>";if(e._mode=="week_agenda"){var o=e._els.dhx_cal_data[0].getElementsByTagName("DIV");for(var l=0;l<o.length;l++)if(o[l].className=="dhx_wa_scale_bar")t+="<column>"+n(o[l].innerHTML)+"</column>"}else if(e._mode=="agenda"||e._mode=="map"){var o=e._els.dhx_cal_header[0].childNodes[0].childNodes;t+="<column>"+n(o[0].innerHTML)+"</column><column>"+n(o[1].innerHTML)+"</column>"}else if(e._mode=="year"){var o=e._els.dhx_cal_data[0].childNodes;for(var l=0;l<o.length;l++){t+="<month label='"+n(o[l].querySelector(".dhx_year_month").innerHTML)+"'>";t+=y(o[l].querySelector(".dhx_year_week").childNodes);t+=g(o[l].querySelector(".dhx_year_body"));t+="</month>"}}else{t+="<x>";var o=e._els.dhx_cal_header[0].childNodes;t+=y(o);t+="</x>";var d=e._els.dhx_cal_data[0];if(e.matrix&&e.matrix[e._mode]){t+="<y>";for(var l=0;l<d.firstChild.rows.length;l++){var i=d.firstChild.rows[l];t+="<row><![CDATA["+n(i.cells[0].innerHTML)+"]]></row>"}t+="</y>";r=d.firstChild.rows[0].cells[0].offsetHeight}else if(d.firstChild.tagName=="TABLE"){t+=g(d)}else{d=d.childNodes[d.childNodes.length-1];while(d.className.indexOf("dhx_scale_holder")==-1)d=d.previousSibling;d=d.childNodes;t+="<y>";for(var l=0;l<d.length;l++)t+="\n<row><![CDATA["+n(d[l].innerHTML)+"]]></row>";t+="</y>";r=d[0].offsetHeight}}t+="</scale>";return t}function g(e){var t="";var a=e.querySelectorAll("tr");for(var o=0;o<a.length;o++){var l=[];var d=a[o].querySelectorAll("td");for(var i=0;i<d.length;i++)l.push(d[i].querySelector(".dhx_month_head").innerHTML);t+="\n<row height='"+d[0].offsetHeight+"'><![CDATA["+n(l.join("|"))+"]]></row>";r=d[0].offsetHeight}return t}function y(r){var a,o="";if(e.matrix&&e.matrix[e._mode]){if(e.matrix[e._mode].second_scale)a=r[1].childNodes;r=r[0].childNodes}for(var l=0;l<r.length;l++)o+="\n<column><![CDATA["+n(r[l].innerHTML)+"]]></column>";t=r[0].offsetWidth;if(a){var d=0;var i=r[0].offsetWidth;var s=1;for(var l=0;l<a.length;l++){o+="\n<column second_scale='"+s+"'><![CDATA["+n(a[l].innerHTML)+"]]></column>";d+=a[l].offsetWidth;if(d>=i){i+=r[s]?r[s].offsetWidth:0;s++}t=a[0].offsetWidth}}return o}function p(t){var a="";var o=e._rendered;var i=e.matrix&&e.matrix[e._mode];if(e._mode=="agenda"||e._mode=="map"){for(var _=0;_<o.length;_++)a+="<event><head><![CDATA["+n(o[_].childNodes[0].innerHTML)+"]]></head><body><![CDATA["+n(o[_].childNodes[2].innerHTML)+"]]></body></event>"}else if(e._mode=="week_agenda"){for(var _=0;_<o.length;_++)a+="<event day='"+o[_].parentNode.getAttribute("day")+"'><body>"+n(o[_].innerHTML)+"</body></event>"}else if(e._mode=="year"){var o=e.get_visible_events();for(var _=0;_<o.length;_++){var u=o[_].start_date;if(u.valueOf()<e._min_date.valueOf())u=e._min_date;while(u<o[_].end_date){var v=u.getMonth()+12*(u.getFullYear()-e._min_date.getFullYear())-e.week_starts._month;var m=e.week_starts[v]+u.getDate()-1;var g=t?c(e._get_year_cell(u),"color"):"";var y=t?c(e._get_year_cell(u),"backgroundColor"):"";a+="<event day='"+m%7+"' week='"+Math.floor(m/7)+"' month='"+v+"' backgroundColor='"+y+"' color='"+g+"'></event>";u=e.date.add(u,1,"day");if(u.valueOf()>=e._max_date.valueOf())break}}}else if(i&&i.render=="cell"){var o=e._els.dhx_cal_data[0].getElementsByTagName("TD");for(var _=0;_<o.length;_++){var g=t?c(o[_],"color"):"";var y=t?c(o[_],"backgroundColor"):"";a+="\n<event><body backgroundColor='"+y+"' color='"+g+"'><![CDATA["+n(o[_].innerHTML)+"]]></body></event>"}}else{for(var _=0;_<o.length;_++){var p,N;if(e.matrix&&e.matrix[e._mode]){p=l(o[_].style.left);N=l(o[_].offsetWidth)-1}else{var x=e.config.use_select_menu_space?0:26;p=d(o[_].style.left,x,true);N=d(o[_].style.width,x)-1}if(isNaN(N*1))continue;var w=s(o[_].style.top);var b=s(o[_].style.height);var T=o[_].className.split(" ")[0].replace("dhx_cal_","");if(T==="dhx_tooltip_line")continue;var C=e.getEvent(o[_].getAttribute("event_id"));if(!C)continue;var m=C._sday;var A=C._sweek;var H=C._length||0;if(e._mode=="month"){b=parseInt(o[_].offsetHeight,10);w=parseInt(o[_].style.top,10)-e.xy.month_head_height;m=f(o[_],m);A=h(o[_],A)}else if(e.matrix&&e.matrix[e._mode]){m=0;var D=o[_].parentNode.parentNode.parentNode;A=D.rowIndex;var M=r;r=o[_].parentNode.offsetHeight;w=s(o[_].style.top);w-=w*.2;r=M}else{if(o[_].parentNode==e._els.dhx_cal_data[0])continue;var k=e._els["dhx_cal_data"][0].childNodes[0];var L=parseFloat(k.className.indexOf("dhx_scale_holder")!=-1?k.style.left:0);p+=l(o[_].parentNode.style.left,L)}a+="\n<event week='"+A+"' day='"+m+"' type='"+T+"' x='"+p+"' y='"+w+"' width='"+N+"' height='"+b+"' len='"+H+"'>";if(T=="event"){a+="<header><![CDATA["+n(o[_].childNodes[1].innerHTML)+"]]></header>";var g=t?c(o[_].childNodes[2],"color"):"";var y=t?c(o[_].childNodes[2],"backgroundColor"):"";a+="<body backgroundColor='"+y+"' color='"+g+"'><![CDATA["+n(o[_].childNodes[2].innerHTML)+"]]></body>"}else{var g=t?c(o[_],"color"):"";var y=t?c(o[_],"backgroundColor"):"";a+="<body backgroundColor='"+y+"' color='"+g+"'><![CDATA["+n(o[_].innerHTML)+"]]></body>"}a+="</event>"}}return a}function N(t,r,a,o,n,l){var d=false;if(o=="fullcolor"){d=true;o="color"}o=o||"color";var i="";if(t){var s=e._date;var c=e._mode;r=e.date[a+"_start"](r);r=e.date["get_"+a+"_end"]?e.date["get_"+a+"_end"](r):e.date.add(r,1,a);i=v("pages",o,n,l);for(var f=new Date(t);+f<+r;f=this.date.add(f,1,a)){this.setCurrentView(f,a);i+=_("page")+m().replace("–","-")+p(d)+u("page")}i+=u("pages");this.setCurrentView(s,c)}else{i=v("data",o,n,l)+m().replace("–","-")+p(d)+u("data")}return i}e.getPDFData=N;function x(t,r){var a=e.uid();var o=document.createElement("div");o.style.display="none";document.body.appendChild(o);o.innerHTML='<form id="'+a+'" method="post" target="_blank" action="'+r+'" accept-charset="utf-8" enctype="application/x-www-form-urlencoded"><input type="hidden" name="mycoolxmlbody"/> </form>';document.getElementById(a).firstChild.value=encodeURIComponent(t);document.getElementById(a).submit();o.parentNode.removeChild(o)}function w(e,t,r,a,o,n,l){var d="";if(typeof o=="object"){d=b(o)}else{d=N.apply(this,[e,t,r,o,n,l])}x(d,a)}function b(e){var t="<data>";for(var r=0;r<e.length;r++){t+=e[r].source.getPDFData(e[r].start,e[r].end,e[r].view,e[r].mode,e[r].header,e[r].footer)}t+="</data>";return t}e.toPDF=function(e,t,r,a){return w.apply(this,[null,null,null,e,t,r,a])};e.toPDFRange=function(t,r,a,o,n,l,d){if(typeof t=="string"){t=e.templates.api_date(t);r=e.templates.api_date(r)}return w.apply(this,arguments)}})()});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_quick_info.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(t){t.config.icons_select=["icon_details","icon_delete"];t.config.details_on_create=true;t.config.show_quick_info=true;t.xy.menu_width=0;t.attachEvent("onClick",function(e){t.showQuickInfo(e);return true});(function(){var e=["onEmptyClick","onViewChange","onLightbox","onBeforeEventDelete","onBeforeDrag"];var i=function(){t.hideQuickInfo(true);return true};for(var n=0;n<e.length;n++){t.attachEvent(e[n],i)}})();t.templates.quick_info_title=function(t,e,i){return i.text.substr(0,50)};t.templates.quick_info_content=function(t,e,i){return i.details||i.text};t.templates.quick_info_date=function(e,i,n){if(t.isOneDayEvent(n)&&t.config.rtl){return t.templates.day_date(e,i,n)+" "+t.templates.event_header(i,e,n)}else if(t.isOneDayEvent(n)){return t.templates.day_date(e,i,n)+" "+t.templates.event_header(e,i,n)}else if(t.config.rtl){return t.templates.week_date(i,e,n)}else{return t.templates.week_date(e,i,n)}};t.showQuickInfo=function(t){if(t==this._quick_info_box_id||!this.config.show_quick_info)return;this.hideQuickInfo(true);var e=this._get_event_counter_part(t);if(e){this._quick_info_box=this._init_quick_info(e);this._fill_quick_data(t);this._show_quick_info(e);this.callEvent("onQuickInfo",[t])}};(function(){function e(t){t=t||"";var e=parseFloat(t),i=t.match(/m?s/),n;if(i){i=i[0]}switch(i){case"s":n=e*1e3;break;case"ms":n=e;break;default:n=0;break}return n}t.hideQuickInfo=function(i){var n=this._quick_info_box;var o=this._quick_info_box_id;this._quick_info_box_id=0;if(n&&n.parentNode){var _=n.offsetWidth;if(t.config.quick_info_detached){this.callEvent("onAfterQuickInfo",[o]);return n.parentNode.removeChild(n)}if(n.style.right=="auto")n.style.left=-_+"px";else n.style.right=-_+"px";if(i){n.parentNode.removeChild(n)}else{var a;if(window.getComputedStyle){a=window.getComputedStyle(n,null)}else if(n.currentStyle){a=n.currentStyle}var c=e(a["transition-delay"])+e(a["transition-duration"]);setTimeout(function(){if(n.parentNode){n.parentNode.removeChild(n)}},c)}this.callEvent("onAfterQuickInfo",[o])}}})();t.event(window,"keydown",function(e){if(e.keyCode==27)t.hideQuickInfo()});t._show_quick_info=function(e){var i=t._quick_info_box;t._obj.appendChild(i);var n=i.offsetWidth;var o=i.offsetHeight;if(t.config.quick_info_detached){var _=e.left-e.dx*(n-e.width);var a=_+n;if(a>window.innerWidth){_=window.innerWidth-n}_=Math.max(0,_);i.style.left=_+"px";i.style.top=e.top-(e.dy?o:-e.height)+"px"}else{i.style.top=this.xy.scale_height+this.xy.nav_height+20+"px";if(e.dx==1){i.style.right="auto";i.style.left=-n+"px";setTimeout(function(){i.style.left="-10px"},1)}else{i.style.left="auto";i.style.right=-n+"px";setTimeout(function(){i.style.right="-10px"},1)}i.className=i.className.replace(" dhx_qi_left","").replace(" dhx_qi_right","")+" dhx_qi_"+(e.dx==1?"left":"right")}};t.attachEvent("onTemplatesReady",function(){t.hideQuickInfo();if(this._quick_info_box){var e=this._quick_info_box;if(e.parentNode){e.parentNode.removeChild(e)}this._quick_info_box=null}});t._quick_info_onscroll_handler=function(e){t.hideQuickInfo()};t._init_quick_info=function(){if(!this._quick_info_box){var e=t.xy;var i=this._quick_info_box=document.createElement("div");this._waiAria.quickInfoAttr(i);i.className="dhx_cal_quick_info";if(t.$testmode)i.className+=" dhx_no_animate";if(t.config.rtl)i.className+=" dhx_quick_info_rtl";var n=this._waiAria.quickInfoHeaderAttrString();var o='<div class="dhx_cal_qi_title" style="height:'+e.quick_info_title+'px" '+n+">"+'<div class="dhx_cal_qi_tcontent"></div><div  class="dhx_cal_qi_tdate"></div>'+"</div>"+'<div class="dhx_cal_qi_content"></div>';o+='<div class="dhx_cal_qi_controls" style="height:'+e.quick_info_buttons+'px">';var _=t.config.icons_select;for(var a=0;a<_.length;a++){var n=this._waiAria.quickInfoButtonAttrString(this.locale.labels[_[a]]);o+="<div "+n+' class="dhx_qi_big_icon '+_[a]+'" title="'+t.locale.labels[_[a]]+"\"><div class='dhx_menu_icon "+_[a]+"'></div><div>"+t.locale.labels[_[a]]+"</div></div>"}o+="</div>";i.innerHTML=o;t.event(i,"click",function(e){e=e||event;t._qi_button_click(e.target||e.srcElement)});if(t.config.quick_info_detached){t._detachDomEvent(t._els["dhx_cal_data"][0],"scroll",t._quick_info_onscroll_handler);t.event(t._els["dhx_cal_data"][0],"scroll",t._quick_info_onscroll_handler)}}return this._quick_info_box};t._qi_button_click=function(e){var i=t._quick_info_box;if(!e||e==i)return;var n=t._getClassName(e);if(n.indexOf("_icon")!=-1){var o=t._quick_info_box_id;t._click.buttons[n.split(" ")[1].replace("icon_","")](o)}else t._qi_button_click(e.parentNode)};t._get_event_counter_part=function(e){var i=t.getRenderedEvent(e);var n=0;var o=0;var _=i;while(_&&_!=t._obj){n+=_.offsetLeft;o+=_.offsetTop-_.scrollTop;_=_.offsetParent}if(_){var a=n+i.offsetWidth/2>t._x/2?1:0;var c=o+i.offsetHeight/2>t._y/2?1:0;return{left:n,top:o,dx:a,dy:c,width:i.offsetWidth,height:i.offsetHeight}}return 0};t._fill_quick_data=function(e){var i=t.getEvent(e);var n=t._quick_info_box;t._quick_info_box_id=e;var o={content:t.templates.quick_info_title(i.start_date,i.end_date,i),date:t.templates.quick_info_date(i.start_date,i.end_date,i)};var _=n.firstChild.firstChild;_.innerHTML=o.content;var a=_.nextSibling;a.innerHTML=o.date;t._waiAria.quickInfoHeader(n,[o.content,o.date].join(" "));var c=n.firstChild.nextSibling;c.innerHTML=t.templates.quick_info_content(i.start_date,i.end_date,i)}});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_readonly.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e.attachEvent("onTemplatesReady",function(){var t;if(e.form_blocks.recurring){t=e.form_blocks.recurring.set_value}var i=e.config.buttons_left.slice();var r=e.config.buttons_right.slice();e.attachEvent("onBeforeLightbox",function(o){if(this.config.readonly_form||this.getEvent(o).readonly){this.config.readonly_active=true}else{this.config.readonly_active=false;e.config.buttons_left=i.slice();e.config.buttons_right=r.slice();if(e.form_blocks.recurring){e.form_blocks.recurring.set_value=t}}var n=this.config.lightbox.sections;if(this.config.readonly_active){for(var l=0;l<n.length;l++){if(n[l].type=="recurring"){if(this.config.readonly_active&&e.form_blocks.recurring){e.form_blocks.recurring.set_value=function(t,i,r){var o=e.$domHelpers.closest(t,".dhx_wrap_section");var n="none";o.querySelector(".dhx_cal_lsection").display=n;o.querySelector(".dhx_form_repeat").display=n;o.style.display=n;e.setLightboxSize()}}}}var a=["dhx_delete_btn","dhx_save_btn"];var s=[e.config.buttons_left,e.config.buttons_right];for(var l=0;l<a.length;l++){var c=a[l];for(var h=0;h<s.length;h++){var f=s[h];var _=-1;for(var d=0;d<f.length;d++){if(f[d]==c){_=d;break}}if(_!=-1){f.splice(_,1)}}}}this.resetLightbox();return true});function o(e,t,i,r){var o=t.getElementsByTagName(e);var n=i.getElementsByTagName(e);for(var l=n.length-1;l>=0;l--){var i=n[l];if(!r){i.disabled=true;if(t.checked)i.checked=true}else{var a=document.createElement("span");a.className="dhx_text_disabled";a.innerHTML=r(o[l]);i.parentNode.insertBefore(a,i);i.parentNode.removeChild(i)}}}var n=e._fill_lightbox;e._fill_lightbox=function(){var t=this.getLightbox();if(this.config.readonly_active){t.style.visibility="hidden";t.style.display="block"}var i=n.apply(this,arguments);if(this.config.readonly_active){t.style.visibility="";t.style.display="none"}if(this.config.readonly_active){var r=this.getLightbox();var a=this._lightbox_r=r.cloneNode(true);a.id=e.uid();a.className+=" dhx_cal_light_readonly";o("textarea",r,a,function(e){return e.value});o("input",r,a,false);o("select",r,a,function(e){if(!e.options.length)return"";return e.options[Math.max(e.selectedIndex||0,0)].text});r.parentNode.insertBefore(a,r);l.call(this,a);if(e._lightbox)e._lightbox.parentNode.removeChild(e._lightbox);this._lightbox=a;if(e.config.drag_lightbox)a.firstChild.onmousedown=e._ready_to_dnd;this.setLightboxSize();a.onclick=function(t){var i=t?t.target:event.srcElement;var r=e.$domHelpers.closest(i,".dhx_btn_set");if(r){if(r.querySelector(".dhx_cancel_btn")){e.cancel_lightbox()}}};a.onkeydown=function(t){var i=t||window.event;var r=t.target||t.srcElement;var o=r.querySelector("[dhx_button]");if(!o){o=r.parentNode.querySelector(".dhx_custom_button, .dhx_readonly")}switch((t||i).keyCode){case 32:{if((t||i).shiftKey)return;if(o&&o.click){o.click()}break}case e.keys.edit_cancel:e.cancel_lightbox();break;default:break}}}return i};var l=e.showCover;e.showCover=function(){if(!this.config.readonly_active)l.apply(this,arguments)};var a=e.hide_lightbox;e.hide_lightbox=function(){if(this._lightbox_r){this._lightbox_r.parentNode.removeChild(this._lightbox_r);this._lightbox_r=this._lightbox=null}return a.apply(this,arguments)}})});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_recurring.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e.config.occurrence_timestamp_in_utc=false;e.config.recurring_workdays=[1,2,3,4,5];e.form_blocks["recurring"]={_get_node:function(e){if(typeof e=="string")e=document.getElementById(e);if(e.style.display=="none")e.style.display="";return e},_outer_html:function(e){return e.outerHTML||t(e);function t(e){var t=document.createElement("div"),r;t.appendChild(e.cloneNode(true));r=t.innerHTML;t=null;return r}},render:function(t){if(t.form){var r=e.form_blocks["recurring"];var a=r._get_node(t.form);var n=r._outer_html(a);a.style.display="none";return n}var _=e.locale.labels;return'<div class="dhx_form_repeat"> '+"<form> "+'<div class="dhx_repeat_left"> '+'<label><input class="dhx_repeat_radio" type="radio" name="repeat" value="day" />'+_.repeat_radio_day+"</label><br /> "+'<label><input class="dhx_repeat_radio" type="radio" name="repeat" value="week"/>'+_.repeat_radio_week+"</label><br /> "+'<label><input class="dhx_repeat_radio" type="radio" name="repeat" value="month" checked />'+_.repeat_radio_month+"</label><br /> "+'<label><input class="dhx_repeat_radio" type="radio" name="repeat" value="year" />'+_.repeat_radio_year+"</label> "+"</div> "+'<div class="dhx_repeat_divider">'+"</div> "+'<div class="dhx_repeat_center"> '+'<div style="display:none;" id="dhx_repeat_day"> '+'<label><input class="dhx_repeat_radio" type="radio" name="day_type" value="d"/>'+_.repeat_radio_day_type+"</label>"+'<label><input class="dhx_repeat_text" type="text" name="day_count" value="1" />'+_.repeat_text_day_count+"</label><br /> "+'<label><input class="dhx_repeat_radio" type="radio" name="day_type" checked value="w"/>'+_.repeat_radio_day_type2+"</label> "+"</div> "+'<div style="display:none;" id="dhx_repeat_week">'+"<label>"+_.repeat_week+'<input class="dhx_repeat_text" type="text" name="week_count" value="1" /></label>'+"<span>"+_.repeat_text_week_count+"</span><br /> "+'<table class="dhx_repeat_days"> '+"<tr> "+'<td> <label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="1" />'+_.day_for_recurring[1]+"</label><br /> "+'<label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="4" />'+_.day_for_recurring[4]+"</label> </td> "+'<td> <label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="2" />'+_.day_for_recurring[2]+"</label><br /> "+'<label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="5" />'+_.day_for_recurring[5]+"</label> </td> "+'<td> <label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="3" />'+_.day_for_recurring[3]+"</label><br /> "+'<label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="6" />'+_.day_for_recurring[6]+"</label> </td> "+'<td> <label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="0" />'+_.day_for_recurring[0]+"</label><br /><br /> </td> "+"</tr> "+"</table> "+"</div> "+'<div id="dhx_repeat_month"> '+'<label class = "dhx_repeat_month_label"><input class="dhx_repeat_radio" type="radio" name="month_type" value="d"/>'+_.repeat_radio_month_type+"</label>"+'<label><input class="dhx_repeat_text" type="text" name="month_day" value="1" />'+_.repeat_text_month_day+"</label>"+'<label><input class="dhx_repeat_text" type="text" name="month_count" value="1" />'+_.repeat_text_month_count+"</label><br /> "+'<label class = "dhx_repeat_month_label"><input class="dhx_repeat_radio" type="radio" name="month_type" checked value="w"/>'+_.repeat_radio_month_start+"</label>"+'<input class="dhx_repeat_text" type="text" name="month_week2" value="1" />'+"<label>"+'<select name="month_day2">'+'\t<option value="1" selected >'+e.locale.date.day_full[1]+'<option value="2">'+e.locale.date.day_full[2]+'<option value="3">'+e.locale.date.day_full[3]+'<option value="4">'+e.locale.date.day_full[4]+'<option value="5">'+e.locale.date.day_full[5]+'<option value="6">'+e.locale.date.day_full[6]+'<option value="0">'+e.locale.date.day_full[0]+"</select>"+_.repeat_text_month_count2_before+"</label>"+'<label><input class="dhx_repeat_text" type="text" name="month_count2" value="1" />'+_.repeat_text_month_count2_after+"</label><br /> "+"</div> "+'<div style="display:none;" id="dhx_repeat_year"> '+'<label class = "dhx_repeat_year_label"><input class="dhx_repeat_radio" type="radio" name="year_type" value="d"/>'+_.repeat_radio_day_type+"</label>"+'<label><input class="dhx_repeat_text" type="text" name="year_day" value="1" />'+_.repeat_text_year_day+"</label>"+"<label>"+'<select name="year_month">'+'<option value="0" selected >'+_.month_for_recurring[0]+'<option value="1">'+_.month_for_recurring[1]+'<option value="2">'+_.month_for_recurring[2]+'<option value="3">'+_.month_for_recurring[3]+'<option value="4">'+_.month_for_recurring[4]+'<option value="5">'+_.month_for_recurring[5]+'<option value="6">'+_.month_for_recurring[6]+'<option value="7">'+_.month_for_recurring[7]+'<option value="8">'+_.month_for_recurring[8]+'<option value="9">'+_.month_for_recurring[9]+'<option value="10">'+_.month_for_recurring[10]+'<option value="11">'+_.month_for_recurring[11]+"</select>"+_.select_year_month+"</label><br /> "+'<label class = "dhx_repeat_year_label"><input class="dhx_repeat_radio" type="radio" name="year_type" checked value="w"/>'+_.repeat_year_label+"</label>"+'<input class="dhx_repeat_text" type="text" name="year_week2" value="1" />'+'<select name="year_day2">'+'<option value="1" selected >'+e.locale.date.day_full[1]+'<option value="2">'+e.locale.date.day_full[2]+'<option value="3">'+e.locale.date.day_full[3]+'<option value="4">'+e.locale.date.day_full[4]+'<option value="5">'+e.locale.date.day_full[5]+'<option value="6">'+e.locale.date.day_full[6]+'<option value="7">'+e.locale.date.day_full[0]+"</select>"+_.select_year_day2+'<select name="year_month2">'+'<option value="0" selected >'+_.month_for_recurring[0]+'<option value="1">'+_.month_for_recurring[1]+'<option value="2">'+_.month_for_recurring[2]+'<option value="3">'+_.month_for_recurring[3]+'<option value="4">'+_.month_for_recurring[4]+'<option value="5">'+_.month_for_recurring[5]+'<option value="6">'+_.month_for_recurring[6]+'<option value="7">'+_.month_for_recurring[7]+'<option value="8">'+_.month_for_recurring[8]+'<option value="9">'+_.month_for_recurring[9]+'<option value="10">'+_.month_for_recurring[10]+'<option value="11">'+_.month_for_recurring[11]+"</select><br /> "+"</div> "+"</div> "+'<div class="dhx_repeat_divider">'+"</div> "+'<div class="dhx_repeat_right"> '+'<label><input class="dhx_repeat_radio" type="radio" name="end" checked/>'+_.repeat_radio_end+"</label><br /> "+'<label><input class="dhx_repeat_radio" type="radio" name="end" />'+_.repeat_radio_end2+"</label>"+'<input class="dhx_repeat_text" type="text" name="occurences_count" value="1" />'+_.repeat_text_occurences_count+"<br /> "+'<label><input class="dhx_repeat_radio" type="radio" name="end" />'+_.repeat_radio_end3+"</label>"+'<input class="dhx_repeat_date" type="text" name="date_of_end" value="'+e.config.repeat_date_of_end+'" /><br /> '+"</div> "+"</form> "+"</div> "+'<div style="clear:both"> '+"</div>"},_ds:{},_get_form_node:function(e,t,r){var a=e[t];if(!a)return null;if(a.nodeName)return a;if(a.length){for(var n=0;n<a.length;n++){if(a[n].value==r)return a[n]}}},_get_node_value:function(e,t,r){var a=e[t];if(!a)return"";if(a.length){if(r){var n=[];for(var _=0;_<a.length;_++)if(a[_].checked)n.push(a[_].value);return n}else{for(var _=0;_<a.length;_++)if(a[_].checked)return a[_].value}}if(a.value)return!r?a.value:[a.value]},_get_node_numeric_value:function(t,r){var a=e.form_blocks["recurring"]._get_node_value(t,r);return a*1||0},_set_node_value:function(e,t,r){var a=e[t];if(!a)return;if(a.name==t){a.value=r}else if(a.length){var n=typeof r=="object";for(var _=0;_<a.length;_++)if(n||a[_].value==r){a[_].checked=n?!!r[a[_].value]:!!r}}},_init_set_value:function(t,r,a){var n=e.form_blocks["recurring"];var _=n._get_node_value;var i=n._set_node_value;e.form_blocks["recurring"]._ds={start:a.start_date,end:a._end_date};var o=e.date.str_to_date(e.config.repeat_date);var l=function(t){var r=o(t);if(e.config.include_end_by)r=e.date.add(r,1,"day");return r};var s=e.date.date_to_str(e.config.repeat_date);var d=t.getElementsByTagName("FORM")[0];var c={};function u(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.name){if(!c[r.name]){c[r.name]=r}else if(c[r.name].nodeType){var a=c[r.name];c[r.name]=[a,r]}else{c[r.name].push(r)}}}}u(d.getElementsByTagName("INPUT"));u(d.getElementsByTagName("SELECT"));if(!e.config.repeat_date_of_end){var v=e.date.date_to_str(e.config.repeat_date);e.config.repeat_date_of_end=v(e.date.add(e._currentDate(),30,"day"))}i(c,"date_of_end",e.config.repeat_date_of_end);var p=function(e){return document.getElementById(e)||{style:{}}};function h(){p("dhx_repeat_day").style.display="none";p("dhx_repeat_week").style.display="none";p("dhx_repeat_month").style.display="none";p("dhx_repeat_year").style.display="none";p("dhx_repeat_"+this.value).style.display="block";e.setLightboxSize()}function f(t){var r=[_(c,"repeat")];y[r[0]](r,t);while(r.length<5)r.push("");var a="";var n=g(c);if(n=="no"){t.end=new Date(9999,1,1);a="no"}else if(n=="date_of_end"){t.end=l(_(c,"date_of_end"))}else{e.transpose_type(r.join("_"));a=Math.max(1,_(c,"occurences_count"));var i=0;t.end=e.date.add(new Date(t.start),a+i,r.join("_"))}return r.join("_")+"#"+a}function g(e){var t=e["end"];if(t.length){for(var r=0;r<t.length;r++){if(t[r].checked){if(t[r].value&&t[r].value!="on"){return t[r].value}else{if(!r){return"no"}else if(r==2){return"date_of_end"}else{return"occurences_count"}}}}}else{if(t.value)return t.value}return"no"}function m(e,t){var r=e["end"];if(r.length){var a=!!r[0].value&&r[0].value!="on";if(a){for(var n=0;n<r.length;n++){if(r[n].value==t)r[n].checked=true}}else{var _=0;switch(t){case"no":_=0;break;case"date_of_end":_=2;break;default:_=1;break}r[_].checked=true}}else{r.value=t}}e.form_blocks["recurring"]._get_repeat_code=f;var y={month:function(t,r){var a=e.form_blocks["recurring"]._get_node_value;var n=e.form_blocks["recurring"]._get_node_numeric_value;if(a(c,"month_type")=="d"){t.push(Math.max(1,n(c,"month_count")));r.start.setDate(a(c,"month_day"))}else{t.push(Math.max(1,n(c,"month_count2")));t.push(a(c,"month_day2"));t.push(Math.max(1,n(c,"month_week2")));if(!e.config.repeat_precise){r.start.setDate(1)}}r._start=true},week:function(t,r){var a=e.form_blocks["recurring"]._get_node_value;var n=e.form_blocks["recurring"]._get_node_numeric_value;t.push(Math.max(1,n(c,"week_count")));t.push("");t.push("");var _=[];var i=a(c,"week_day",true);var o=r.start.getDay();var l=false;for(var s=0;s<i.length;s++){_.push(i[s]);l=l||i[s]==o}if(!_.length){_.push(o);l=true}_.sort();if(!e.config.repeat_precise){r.start=e.date.week_start(r.start);r._start=true}else if(!l){e.transpose_day_week(r.start,_,1,7);r._start=true}t.push(_.join(","))},day:function(t){var r=e.form_blocks["recurring"]._get_node_value;var a=e.form_blocks["recurring"]._get_node_numeric_value;if(r(c,"day_type")=="d"){t.push(Math.max(1,a(c,"day_count")))}else{t.push("week");t.push(1);t.push("");t.push("");t.push(e.config.recurring_workdays.join(","));t.splice(0,1)}},year:function(t,r){var a=e.form_blocks["recurring"]._get_node_value;if(a(c,"year_type")=="d"){t.push("1");r.start.setMonth(0);r.start.setDate(a(c,"year_day"));r.start.setMonth(a(c,"year_month"))}else{t.push("1");t.push(a(c,"year_day2"));t.push(a(c,"year_week2"));r.start.setDate(1);r.start.setMonth(a(c,"year_month2"))}r._start=true}};var b={week:function(t,r){var a=e.form_blocks["recurring"]._set_node_value;a(c,"week_count",t[1]);var n=t[4].split(",");var _={};for(var i=0;i<n.length;i++)_[n[i]]=true;a(c,"week_day",_)},month:function(t,r){var a=e.form_blocks["recurring"]._set_node_value;if(t[2]===""){a(c,"month_type","d");a(c,"month_count",t[1]);a(c,"month_day",r.start.getDate())}else{a(c,"month_type","w");a(c,"month_count2",t[1]);a(c,"month_week2",t[3]);a(c,"month_day2",t[2])}},day:function(t,r){var a=e.form_blocks["recurring"]._set_node_value;a(c,"day_type","d");a(c,"day_count",t[1])},year:function(t,r){var a=e.form_blocks["recurring"]._set_node_value;if(t[2]===""){a(c,"year_type","d");a(c,"year_day",r.start.getDate());a(c,"year_month",r.start.getMonth())}else{a(c,"year_type","w");a(c,"year_week2",t[3]);a(c,"year_day2",t[2]);a(c,"year_month2",r.start.getMonth())}}};function k(t,r){var a=e.form_blocks["recurring"]._set_node_value;var n=t.split("#");t=n[0].split("_");b[t[0]](t,r);switch(n[1]){case"no":m(c,"no");break;case"":m(c,"date_of_end");var _=r.end;if(e.config.include_end_by){_=e.date.add(_,-1,"day")}a(c,"date_of_end",s(_));break;default:m(c,"occurences_count");a(c,"occurences_count",n[1]);break}a(c,"repeat",t[0]);var i=e.form_blocks["recurring"]._get_form_node(c,"repeat",t[0]);if(i.nodeName=="SELECT"&&i.onchange){i.onchange()}else if(i.onclick){i.onclick()}}function x(e,t){}e.form_blocks["recurring"]._set_repeat_code=k;for(var w=0;w<d.elements.length;w++){var E=d.elements[w];switch(E.name){case"repeat":if(E.nodeName=="SELECT"){E.onchange=h}else{E.onclick=h}break}}e._lightbox._rec_init_done=true},set_value:function(t,r,a){var n=e.form_blocks["recurring"];if(!e._lightbox._rec_init_done)n._init_set_value(t,r,a);t.open=!a.rec_type;t.blocked=this._is_modified_occurence(a);var _=n._ds;_.start=a.start_date;_.end=a._end_date;n._toggle_block();if(r)n._set_repeat_code(r,_)},get_value:function(t,r){if(t.open){var a=e.form_blocks["recurring"]._ds;var n={};this.formSection("time").getValue(n);a.start=n.start_date;r.rec_type=e.form_blocks["recurring"]._get_repeat_code(a);if(a._start){r.start_date=new Date(a.start);r._start_date=new Date(a.start);a._start=false}else r._start_date=null;r._end_date=a.end;r.rec_pattern=r.rec_type.split("#")[0]}else{r.rec_type=r.rec_pattern="";r._end_date=r.end_date}return r.rec_type},_get_button:function(){var t=e.formSection("recurring").header;return t.firstChild.firstChild},_get_form:function(){return e.formSection("recurring").node},open:function(){var t=e.form_blocks.recurring;var r=t._get_form();if(!r.open)t._toggle_block()},close:function(){var t=e.form_blocks.recurring;var r=t._get_form();if(r.open)t._toggle_block()},_toggle_block:function(){var t=e.form_blocks.recurring;var r=t._get_form(),a=t._get_button();if(!r.open&&!r.blocked){r.style.height="auto";if(a){a.style.backgroundPosition="-5px 0px";a.nextSibling.innerHTML=e.locale.labels.button_recurring_open}}else{r.style.height="0px";if(a){a.style.backgroundPosition="-5px 20px";a.nextSibling.innerHTML=e.locale.labels.button_recurring}}r.open=!r.open;e.setLightboxSize()},focus:function(e){},button_click:function(t,r,a,n){var _=e.form_blocks.recurring;var n=_._get_form();if(!n.blocked)e.form_blocks.recurring._toggle_block()}};e._rec_markers={};e._rec_markers_pull={};e._add_rec_marker=function(e,t){e._pid_time=t;this._rec_markers[e.id]=e;if(!this._rec_markers_pull[e.event_pid])this._rec_markers_pull[e.event_pid]={};this._rec_markers_pull[e.event_pid][t]=e};e._get_rec_marker=function(e,t){var r=this._rec_markers_pull[t];if(r)return r[e];return null};e._get_rec_markers=function(e){return this._rec_markers_pull[e]||[]};e._rec_temp=[];(function(){var t=e.addEvent;e.addEvent=function(r,a,n,_,i){var o=t.apply(this,arguments);if(o&&e.getEvent(o)){var l=e.getEvent(o);if(this._is_modified_occurence(l))e._add_rec_marker(l,l.event_length*1e3);if(l.rec_type)l.rec_pattern=l.rec_type.split("#")[0]}return o}})();e.attachEvent("onEventIdChange",function(t,r){if(this._ignore_call)return;this._ignore_call=true;if(e._rec_markers[t]){e._rec_markers[r]=e._rec_markers[t];delete e._rec_markers[t]}if(e._rec_markers_pull[t]){e._rec_markers_pull[r]=e._rec_markers_pull[t];delete e._rec_markers_pull[t]}for(var a=0;a<this._rec_temp.length;a++){var n=this._rec_temp[a];if(n.event_pid==t){n.event_pid=r;this.changeEventId(n.id,r+"#"+n.id.split("#")[1])}}for(var a in this._rec_markers){var n=this._rec_markers[a];if(n.event_pid==t){n.event_pid=r;n._pid_changed=true}}var _=e._rec_markers[r];if(_&&_._pid_changed){delete _._pid_changed;setTimeout(function(){e.callEvent("onEventChanged",[r,e.getEvent(r)])},1)}delete this._ignore_call});e.attachEvent("onConfirmedBeforeEventDelete",function(e){var t=this.getEvent(e);if(this._is_virtual_event(e)||this._is_modified_occurence(t)&&t.rec_type&&t.rec_type!="none"){e=e.split("#");var r=this.uid();var a=e[1]?e[1]:t._pid_time/1e3;var n=this._copy_event(t);n.id=r;n.event_pid=t.event_pid||e[0];var _=a;n.event_length=_;n.rec_type=n.rec_pattern="none";this.addEvent(n);this._add_rec_marker(n,_*1e3)}else{if(t.rec_type&&this._lightbox_id)this._roll_back_dates(t);var i=this._get_rec_markers(e);for(var o in i){if(i.hasOwnProperty(o)){e=i[o].id;if(this.getEvent(e))this.deleteEvent(e,true)}}}return true});e.attachEvent("onEventDeleted",function(t,r){if(!this._is_virtual_event(t)&&this._is_modified_occurence(r)){if(!e._events[t]){r.rec_type=r.rec_pattern="none";this.setEvent(t,r)}}});e.attachEvent("onEventChanged",function(e,t){if(this._loading)return true;var r=this.getEvent(e);if(this._is_virtual_event(e)){var e=e.split("#");var a=this.uid();this._not_render=true;var n=this._copy_event(t);n.id=a;n.event_pid=e[0];var _=e[1];n.event_length=_;n.rec_type=n.rec_pattern="";this._add_rec_marker(n,_*1e3);this.addEvent(n);this._not_render=false}else{if(r.rec_type&&this._lightbox_id)this._roll_back_dates(r);var i=this._get_rec_markers(e);for(var o in i){if(i.hasOwnProperty(o)){delete this._rec_markers[i[o].id];this.deleteEvent(i[o].id,true)}}delete this._rec_markers_pull[e];var l=false;for(var s=0;s<this._rendered.length;s++){if(this._rendered[s].getAttribute("event_id")==e)l=true}if(!l)this._select_id=null}return true});e.attachEvent("onEventAdded",function(e){if(!this._loading){var t=this.getEvent(e);if(t.rec_type&&!t.event_length)this._roll_back_dates(t)}return true});e.attachEvent("onEventSave",function(e,t,r){var a=this.getEvent(e);if(!a.rec_type&&t.rec_type&&!this._is_virtual_event(e))this._select_id=null;return true});e.attachEvent("onEventCreated",function(e){var t=this.getEvent(e);if(!t.rec_type)t.rec_type=t.rec_pattern=t.event_length=t.event_pid="";return true});e.attachEvent("onEventCancel",function(e){var t=this.getEvent(e);if(t.rec_type){this._roll_back_dates(t);this.render_view_data()}});e._roll_back_dates=function(e){e.event_length=(e.end_date.valueOf()-e.start_date.valueOf())/1e3;e.end_date=e._end_date;if(e._start_date){e.start_date.setMonth(0);e.start_date.setDate(e._start_date.getDate());e.start_date.setMonth(e._start_date.getMonth());e.start_date.setFullYear(e._start_date.getFullYear())}};e._is_virtual_event=function(e){return e.toString().indexOf("#")!=-1};e._is_modified_occurence=function(e){return e.event_pid&&e.event_pid!="0"};e._validId=function(e){return!this._is_virtual_event(e)};e.showLightbox_rec=e.showLightbox;e.showLightbox=function(t){var r=this.locale;var a=e.config.lightbox_recurring;var n=this.getEvent(t);var _=n.event_pid;var i=this._is_virtual_event(t);if(i)_=t.split("#")[0];var o=function(t){var r=e.getEvent(t);r._end_date=r.end_date;r.end_date=new Date(r.start_date.valueOf()+r.event_length*1e3);return e.showLightbox_rec(t)};if((_||_*1===0)&&n.rec_type){return o(t)}if(!_||_==="0"||(!r.labels.confirm_recurring||a=="instance"||a=="series"&&!i)){return this.showLightbox_rec(t)}if(a=="ask"){var l=this;dhtmlx.modalbox({text:r.labels.confirm_recurring,title:r.labels.title_confirm_recurring,width:"500px",position:"middle",buttons:[r.labels.button_edit_series,r.labels.button_edit_occurrence,r.labels.icon_cancel],callback:function(e){switch(+e){case 0:return o(_);case 1:return l.showLightbox_rec(t);case 2:return}}})}else{o(_)}};e.get_visible_events_rec=e.get_visible_events;e.get_visible_events=function(e){for(var t=0;t<this._rec_temp.length;t++)delete this._events[this._rec_temp[t].id];this._rec_temp=[];var r=this.get_visible_events_rec(e);var a=[];for(var t=0;t<r.length;t++){if(r[t].rec_type){if(r[t].rec_pattern!="none")this.repeat_date(r[t],a)}else a.push(r[t])}return a};(function(){var t=e.isOneDayEvent;e.isOneDayEvent=function(e){if(e.rec_type)return true;return t.call(this,e)};var r=e.updateEvent;e.updateEvent=function(t){var a=e.getEvent(t);if(a&&a.rec_type){a.rec_pattern=(a.rec_type||"").split("#")[0]}if(a&&a.rec_type&&!this._is_virtual_event(t)){e.update_view()}else{r.call(this,t)}}})();e.transponse_size={day:1,week:7,month:1,year:12};e.date.day_week=function(e,t,r){e.setDate(1);r=(r-1)*7;var a=e.getDay();var n=t*1+r-a+1;e.setDate(n<=r?n+7:n)};e.transpose_day_week=function(t,r,a,n,_){var i=(t.getDay()||(e.config.start_on_monday?7:0))-a;for(var o=0;o<r.length;o++){if(r[o]>i)return t.setDate(t.getDate()+r[o]*1-i-(n?a:_))}this.transpose_day_week(t,r,a+n,null,a)};e.transpose_type=function(t){var r="transpose_"+t;if(!this.date[r]){var a=t.split("_");var n=60*60*24*1e3;var _="add_"+t;var i=this.transponse_size[a[0]]*a[1];if(a[0]=="day"||a[0]=="week"){var o=null;if(a[4]){o=a[4].split(",");if(e.config.start_on_monday){for(var l=0;l<o.length;l++)o[l]=o[l]*1||7;o.sort()}}this.date[r]=function(t,r){var a=Math.floor((r.valueOf()-t.valueOf())/(n*i));if(a>0)t.setDate(t.getDate()+a*i);if(o)e.transpose_day_week(t,o,1,i)};this.date[_]=function(t,r){var a=new Date(t.valueOf());if(o){for(var n=0;n<r;n++)e.transpose_day_week(a,o,0,i)}else a.setDate(a.getDate()+r*i);return a}}else if(a[0]=="month"||a[0]=="year"){this.date[r]=function(t,r){var n=Math.ceil((r.getFullYear()*12+r.getMonth()*1+1-(t.getFullYear()*12+t.getMonth()*1+1))/i-1);if(n>=0)t.setMonth(t.getMonth()+n*i);if(a[3])e.date.day_week(t,a[2],a[3])};this.date[_]=function(t,r){var n=new Date(t.valueOf());n.setMonth(n.getMonth()+r*i);if(a[3])e.date.day_week(n,a[2],a[3]);return n}}}};e.repeat_date=function(t,r,a,n,_,i){n=n||this._min_date;_=_||this._max_date;var o=i||-1;var l=new Date(t.start_date.valueOf());var s=l.getHours();var d=0;if(!t.rec_pattern&&t.rec_type)t.rec_pattern=t.rec_type.split("#")[0];this.transpose_type(t.rec_pattern);e.date["transpose_"+t.rec_pattern](l,n);while(l<t.start_date||e._fix_daylight_saving_date(l,n,t,l,new Date(l.valueOf()+t.event_length*1e3)).valueOf()<=n.valueOf()||l.valueOf()+t.event_length*1e3<=n.valueOf())l=this.date.add(l,1,t.rec_pattern);while(l<_&&l<t.end_date&&(o<0||d<o)){l.setHours(s);var c=e.config.occurrence_timestamp_in_utc?Date.UTC(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds()):l.valueOf();var u=this._get_rec_marker(c,t.id);if(!u){var v=new Date(l.valueOf()+t.event_length*1e3);var p=this._copy_event(t);p.text=t.text;p.start_date=l;p.event_pid=t.id;p.id=t.id+"#"+Math.ceil(c/1e3);p.end_date=v;p.end_date=e._fix_daylight_saving_date(p.start_date,p.end_date,t,l,p.end_date);p._timed=this.isOneDayEvent(p);if(!p._timed&&!this._table_view&&!this.config.multi_day)return;r.push(p);if(!a){this._events[p.id]=p;this._rec_temp.push(p)}d++}else if(a){if(u.rec_type!="none"){d++}r.push(u)}l=this.date.add(l,1,t.rec_pattern)}};e._fix_daylight_saving_date=function(e,t,r,a,n){var _=e.getTimezoneOffset()-t.getTimezoneOffset();if(_){if(_>0){return new Date(a.valueOf()+r.event_length*1e3-_*60*1e3)}else{return new Date(t.valueOf()-_*60*1e3)}}return new Date(n.valueOf())};e.getRecDates=function(t,r){var a=typeof t=="object"?t:e.getEvent(t);var n=[];r=r||100;if(!a.rec_type){return[{start_date:a.start_date,end_date:a.end_date}]}if(a.rec_type=="none"){return[]}e.repeat_date(a,n,true,a.start_date,a.end_date,r);var _=[];for(var i=0;i<n.length;i++){if(n[i].rec_type!="none"){_.push({start_date:n[i].start_date,end_date:n[i].end_date})}}return _};e.getEvents=function(e,t){var r=[];for(var a in this._events){var n=this._events[a];if(n&&n.start_date<t&&n.end_date>e){if(n.rec_pattern){if(n.rec_pattern=="none")continue;var _=[];this.repeat_date(n,_,true,e,t);for(var i=0;i<_.length;i++){if(!_[i].rec_pattern&&_[i].start_date<t&&_[i].end_date>e&&!this._rec_markers[_[i].id]){r.push(_[i])}}}else if(!this._is_virtual_event(n.id)){r.push(n)}}}return r};e.config.repeat_date="%m.%d.%Y";e.config.lightbox.sections=[{name:"description",map_to:"text",type:"textarea",focus:true},{name:"recurring",type:"recurring",map_to:"rec_type",button:"recurring"},{name:"time",height:72,type:"time",map_to:"auto"}];e._copy_dummy=function(e){var t=new Date(this.start_date);var r=new Date(this.end_date);this.start_date=t;this.end_date=r;this.event_length=this.event_pid=this.rec_pattern=this.rec_type=null};e.config.include_end_by=false;e.config.lightbox_recurring="ask";e.attachEvent("onClearAll",function(){e._rec_markers={};e._rec_markers_pull={};e._rec_temp=[]})});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_serialize.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(t){t._get_serializable_data=function(){var t={};for(var a in this._events){var e=this._events[a];if(e.id.toString().indexOf("#")==-1){t[e.id]=e}}return t};t.data_attributes=function(){var a=[];var e=t._helpers.formatDate;var r=this._get_serializable_data();for(var n in r){var i=r[n];for(var s in i)if(s.substr(0,1)!="_")a.push([s,s=="start_date"||s=="end_date"?e:null]);break}return a};t.toXML=function(t){var a=[];var e=this.data_attributes();var r=this._get_serializable_data();for(var n in r){var i=r[n];a.push("<event>");for(var s=0;s<e.length;s++)a.push("<"+e[s][0]+"><![CDATA["+(e[s][1]?e[s][1](i[e[s][0]]):i[e[s][0]])+"]]></"+e[s][0]+">");a.push("</event>")}return(t||"")+"<data>"+a.join("\n")+"</data>"};t._serialize_json_value=function(t){if(t===null||typeof t==="boolean"){t=""+t}else{if(!t&&t!==0){t=""}t='"'+t.toString().replace(/\n/g,"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"'}return t};t.toJSON=function(){var t=[],a="";var e=this.data_attributes();var r=this._get_serializable_data();for(var n in r){var i=r[n];var s=[];for(var _=0;_<e.length;_++){a=e[_][1]?e[_][1](i[e[_][0]]):i[e[_][0]];s.push(' "'+e[_][0]+'": '+this._serialize_json_value(a))}t.push("{"+s.join(",")+"}")}return"["+t.join(",\n")+"]"};t.toICal=function(a){var e="BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//dhtmlXScheduler//NONSGML v2.2//EN\nDESCRIPTION:";var r="END:VCALENDAR";var n=t.date.date_to_str("%Y%m%dT%H%i%s");var i=t.date.date_to_str("%Y%m%d");var s=[];var _=this._get_serializable_data();for(var u in _){var d=_[u];s.push("BEGIN:VEVENT");if(!d._timed||!d.start_date.getHours()&&!d.start_date.getMinutes())s.push("DTSTART:"+i(d.start_date));else s.push("DTSTART:"+n(d.start_date));if(!d._timed||!d.end_date.getHours()&&!d.end_date.getMinutes())s.push("DTEND:"+i(d.end_date));else s.push("DTEND:"+n(d.end_date));s.push("SUMMARY:"+d.text);s.push("END:VEVENT")}return e+(a||"")+"\n"+s.join("\n")+"\n"+r}});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_timeline.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e._temp_matrix_scope=function(){var t=function(){return function e(){var t={minMax:"[0;max]",maxMin:"[max;0]",nMaxMin:"[-max;0]"};function r(){var e=document.createElement("div");e.style.cssText="direction: rtl;"+"overflow: auto;"+"width:100px;"+"height: 100px;"+"position:absolute;"+"top: -100500px;"+"left: -100500px;";var t=document.createElement("div");t.style.cssText="width: 100500px;height: 1px;";e.appendChild(t);return e}function i(){var e=t.minMax;var i=r();document.body.appendChild(i);var a=i.scrollLeft;if(a>0){e=t.minMax}else{i.scrollLeft=-50;if(i.scrollLeft===-50){e=t.nMaxMin}else{e=t.maxMin}}document.body.removeChild(i);return e}function a(e,r){var i=s();if(i===t.nMaxMin){if(e){return-e}else{return 0}}else if(i===t.minMax){return r-e}else{return e}}function _(e){var t=getComputedStyle(e).direction;if(!t||t==="ltr"){return e.scrollLeft}else{var r=e.scrollWidth-e.offsetWidth;return a(e.scrollLeft,r)}}function l(e,t){var r=getComputedStyle(e).direction;if(!r||r==="ltr"){e.scrollLeft=t}else{var i=e.scrollWidth-e.offsetWidth;var _=a(t,i);e.scrollLeft=_}}var n;function s(){if(!n){n=i()}return n}return{modes:t,getMode:s,normalizeValue:a,getScrollValue:_,setScrollValue:l}}}();e.matrix={};e._merge=function(e,t){for(var r in t)if(typeof e[r]=="undefined")e[r]=t[r]};e.createTimelineView=function(i){e._skin_init();e._merge(i,{scrollHelper:t(),column_width:100,autoscroll:{range_x:200,range_y:100,speed_x:20,speed_y:10},_is_new_view:true,_section_autowidth:true,_x_scroll:0,_y_scroll:0,_h_cols:{},_label_rows:[],section_autoheight:true,name:"matrix",x:"time",y:"time",x_step:1,x_unit:"hour",y_unit:"day",y_step:1,x_start:0,x_size:24,y_start:0,y_size:7,render:"cell",dx:200,dy:50,event_dy:e.xy.bar_height-5,event_min_dy:e.xy.bar_height-5,resize_events:true,fit_events:true,show_unassigned:false,second_scale:false,round_position:false,_logic:function(t,r,i){var a={};if(e.checkEvent("onBeforeSectionRender")){a=e.callEvent("onBeforeSectionRender",[t,r,i])}return a}});i._original_x_start=i.x_start;if(i.x_unit!="day")i.first_hour=i.last_hour=0;i._start_correction=i.first_hour?i.first_hour*60*60*1e3:0;i._end_correction=i.last_hour?(24-i.last_hour)*60*60*1e3:0;if(e.checkEvent("onTimelineCreated")){e.callEvent("onTimelineCreated",[i])}dhtmlxEventable(i);var a=e.render_data;e.render_data=function(t,r){if(this._mode==i.name){if(r&&!i.show_unassigned&&i.render!="cell"){for(var _=0;_<t.length;_++){this.clear_event(t[_]);this.render_timeline_event.call(this.matrix[this._mode],t[_],true)}}else{e._renderMatrix.call(i,true,true)}}else return a.apply(this,arguments)};e.matrix[i.name]=i;e.templates[i.name+"_cell_value"]=function(e){return e?e.length:""};e.templates[i.name+"_cell_class"]=function(e){return""};e.templates[i.name+"_scalex_class"]=function(e){return""};e.templates[i.name+"_second_scalex_class"]=function(e){return""};e.templates[i.name+"_row_class"]=function(e,t){if(t.folder_events_available&&e.children){return"folder"}return""};e.templates[i.name+"_scaley_class"]=function(e,t,r){return""};e.templates[i.name+"_scale_label"]=function(e,t,r){return t};e.templates[i.name+"_tooltip"]=function(e,t,r){return r.text};e.templates[i.name+"_date"]=function(t,r){if(t.getDay()==r.getDay()&&r-t<24*60*60*1e3||+t==+e.date.date_part(new Date(r))||+e.date.add(t,1,"day")==+r&&r.getHours()===0&&r.getMinutes()===0)return e.templates.day_date(t);if(t.getDay()!=r.getDay()&&r-t<24*60*60*1e3){return e.templates.day_date(t)+" &ndash; "+e.templates.day_date(r)}return e.templates.week_date(t,r)};e.templates[i.name+"_scale_date"]=e.date.date_to_str(i.x_date||e.config.hour_date);e.templates[i.name+"_second_scale_date"]=e.date.date_to_str(i.second_scale&&i.second_scale.x_date?i.second_scale.x_date:e.config.hour_date);e.date["add_"+i.name+"_private"]=function(t,r){var a=r;var _=i.x_unit;if(i.x_unit=="minute"||i.x_unit=="hour"){var l=a;if(i.x_unit=="hour")l*=60;if(!(l%(24*60))){a=l/(24*60);_="day"}}return e.date.add(t,a,_)};e.date["add_"+i.name]=function(t,r,a){var _=e.date["add_"+i.name+"_private"](t,(i.x_length||i.x_size)*i.x_step*r);if(i.x_unit=="minute"||i.x_unit=="hour"){var l=i.x_length||i.x_size;var n=i.x_unit=="hour"?i.x_step*60:i.x_step;if(n*l%(24*60)){if(+e.date.date_part(new Date(t))==+e.date.date_part(new Date(_))){i.x_start+=r*l}else{var s=24*60/(l*n)-1;var o=Math.round(s*l);if(r>0){i.x_start=i.x_start-o}else{i.x_start=o+i.x_start}}}}return _};e.date[i.name+"_start"]=function(t){var r=e.date[i.x_unit+"_start"]||e.date.day_start;var a=r.call(e.date,t);var _=a.getTimezoneOffset();a=e.date.add(a,i.x_step*i.x_start,i.x_unit);var l=a.getTimezoneOffset();if(_!=l){a.setTime(a.getTime()+(l-_)*6e4)}return a};i.scrollTo=e.bind(function(t){if(!t){return}var r;if(t.date){r=t.date}else if(t.left){r=t.left}else{r=t}var i=-1;if(t.section){i=this.posFromSection(t.section)}else if(t.top){i=t.top}var a;if(typeof r=="number"){a=r}else{a=this.posFromDate(r)}if(e.config.rtl){var _=+e.$container.querySelector(".dhx_timeline_label_wrapper").style.height.replace("px","");var l=this._section_height[this.y_unit.length]+this._label_rows[this._label_rows.length-1].top;if(this.scrollHelper.getMode()==this.scrollHelper.modes.minMax&&(l>_||this.render=="tree")){a-=o()}}var n=e.$container.querySelector(".dhx_timeline_data_wrapper");if(!this.scrollable){n=e.$container.querySelector(".dhx_cal_data")}if(this.scrollable){this.scrollHelper.setScrollValue(n,a)}if(i>0){n.scrollTop=i}},i);i.getScrollPosition=e.bind(function(){return{left:this._x_scroll||0,top:this._y_scroll||0}},i);i.posFromDate=e.bind(function(t){return e._timeline_getX({start_date:t},false,this)-1},i);i.posFromSection=e.bind(function(e){var t=this.order[e];if(t===undefined){return-1}var r=0;for(var i in this.order){if(this.order[i]<t){r+=this._section_height[i]}}return r},i);i.selectEvents=e.bind(function(e){var t=e.section,r=e.date,i=e.selectNested;if(r){return l(t,r,i,this)}else if(t){return _(t,i,this)}},i);function _(t,i,a){var _=e._timeline_smart_render.getPreparedEvents(a);var l=a.order[t];var n=a.y_unit[l];if(!n){return[]}var s=[t];if(i){r(n,s)}var o=[];for(var d=0;d<s.length;d++){var l=a.order[s[d]];if(l!==undefined&&_[l]){o=o.concat(_[l])}else if(_.undefined){for(var c=0;c<_.undefined.length;c++){var h=_.undefined[c];if(h[a.y_property]==s[d]){o.push(h)}}}}return o}function l(t,r,i,a){var _=e._timeline_smart_render.getPreparedEvents(a);var l=[];var n=[];var s=a.order[t];var o=a.y_unit[s];if(!o){return[]}var d=e._get_date_index(a,r);if(_.$matrix){l=_.$matrix[s][d]||[];if(i&&_.$matrix.$tree&&_.$matrix.$tree[o.key]){n=_.$matrix.$tree[o.key][d]||[]}return l.concat(n)}else{return _[s]||[]}}function n(t,r,i){var a=e.date[i.name+"_start"](new Date(t));var _=0;var l=a;var n=i.x_step;var s=i.x_unit;while(l<r){_++;l=e.date.add(l,n,s)}return _}i.setRange=e.bind(function(t,r){var i=e.date[this.name+"_start"](new Date(t));var a=n(t,r,this);this.x_size=a;e.setCurrentView(i,this.name)},i);e.callEvent("onOptionsLoad",[i]);e[i.name+"_view"]=function(t){if(t){e._set_timeline_dates(i)}else{e._renderMatrix.apply(i,arguments)}};var s=new Date;var d=e.date.add(s,i.x_step,i.x_unit).valueOf()-s.valueOf();e["mouse_"+i.name]=function(t){var r=this._drag_event;if(this._drag_id){r=this.getEvent(this._drag_id)}if(i.scrollable&&!t.converted){t.converted=1;t.x+=-i.dx+i._x_scroll;if(e.config.rtl){var a=+e.$container.querySelector(".dhx_timeline_label_wrapper").style.height.replace("px","");var _=i._section_height[i.y_unit.length]+i._label_rows[i._label_rows.length-1].top;t.x+=e.xy.scale_width;if(i.scrollHelper.getMode()==i.scrollHelper.modes.minMax&&(_>a||i.render=="tree"))t.x+=o()}t.y+=i._y_scroll}else if(!e.config.rtl){t.x-=i.dx}else{t.x-=i.dx-e.xy.scale_width}var l=e._timeline_drag_date(i,t.x);t.x=0;t.force_redraw=true;t.custom=true;if(this._drag_mode=="move"&&this._drag_id&&this._drag_event){var r=this.getEvent(this._drag_id);var n=this._drag_event;t._ignores=this._ignores_detected||i._start_correction||i._end_correction;if(n._move_delta===undefined){n._move_delta=(r.start_date-l)/6e4;if(this.config.preserve_length&&t._ignores){n._move_delta=this._get_real_event_length(r.start_date,l,i);n._event_length=this._get_real_event_length(r.start_date,r.end_date,i)}}if(this.config.preserve_length&&t._ignores){var s=n._event_length;var d=this._get_fictional_event_length(l,n._move_delta,i,true);l=new Date(l-d)}else{l=e.date.add(l,n._move_delta,"minute")}}if(this._drag_mode=="resize"&&r){if(this.config.timeline_swap_resize&&this._drag_id){if(this._drag_from_start&&+l>+r.end_date){this._drag_from_start=false}else if(!this._drag_from_start&&+l<+r.start_date){this._drag_from_start=true}}t.resize_from_start=this._drag_from_start;if(!this.config.timeline_swap_resize&&this._drag_id){if(this._drag_from_start&&+l>=+e.date.add(r.end_date,-e.config.time_step,"minute")){l=e.date.add(r.end_date,-e.config.time_step,"minute")}}}if(i.round_position){switch(this._drag_mode){case"move":if(!this.config.preserve_length){l=e._timeline_get_rounded_date.call(i,l,false);if(i.x_unit=="day")t.custom=false}break;case"resize":if(this._drag_event){if(this._drag_event._resize_from_start===null||this._drag_event._resize_from_start===undefined){this._drag_event._resize_from_start=t.resize_from_start}t.resize_from_start=this._drag_event._resize_from_start;l=e._timeline_get_rounded_date.call(i,l,!this._drag_event._resize_from_start)}break}}this._resolve_timeline_section(i,t);if(t.section){this._update_timeline_section({pos:t,event:this.getEvent(this._drag_id),view:i})}t.y=Math.round((this._correct_shift(l,1)-this._min_date)/(1e3*60*this.config.time_step));t.shift=this.config.time_step;if(i.round_position&&this._drag_mode=="new-size"){if(l<=this._drag_start){t.shift=e.date.add(this._drag_start,i.x_step,i.x_unit)-this._drag_start}}var c=this._is_pos_changed(this._drag_pos,t);if(this._drag_pos&&c){this._drag_event._dhx_changed=true}if(!c&&!this._drag_pos.has_moved)t.force_redraw=false;return t}};e._prepare_timeline_events=function(t){var r=[];if(t.render=="cell"){r=e._timeline_trace_events.call(t)}else{var i=e.get_visible_events();var a=t.order;for(var _=0;_<i.length;_++){var l=i[_];var n=l[t.y_property];var s=t.order[n];var o=t.y_unit[s];if(t.show_unassigned&&!n){for(var d in a){if(a.hasOwnProperty(d)){s=a[d];if(!r[s])r[s]=[];var c=e._lame_copy({},l);c[t.y_property]=d;r[s].push(c);break}}}else{if(!r[s])r[s]=[];r[s].push(l)}}r.$matrix=e._timeline_trace_events.call(t)}return r};e._populate_timeline_rendered=function(t){e._rendered=[];var r=t.querySelectorAll("div[event_id]");for(var i=0;i<r.length;i++){e._rendered.push(r[i])}};e._get_timeline_event_height=function(e,t){var r=e[t.y_property];var i=t.event_dy;if(t.event_dy=="full"){if(t.section_autoheight){i=t._section_height[r]-6}else{i=t.dy-3}}if(t.resize_events){i=Math.max(Math.floor(i/(e._count||1)),t.event_min_dy)}return i};e._get_timeline_event_y=function(t,r){var i=t||0;var a=2+i*r+(i?i*2:0);if(e.config.cascade_event_display){a=2+i*e.config.cascade_event_margin+(i?i*2:0)}return a};e.render_timeline_event=function(t,r){var i=t[this.y_property];if(!i)return"";var a=t._sorder;var _=e._timeline_getX(t,false,this);var l=e._timeline_getX(t,true,this);var n=e._get_timeline_event_height(t,this);var s=n-2;if(!t._inner&&this.event_dy=="full"){s=(s+2)*(t._count-a)-2}s+=3;var o=e._get_timeline_event_y(t._sorder,n);var d=n+o+2;if(!this._events_height[i]||this._events_height[i]<d){this._events_height[i]=d}var c=e.templates.event_class(t.start_date,t.end_date,t);c="dhx_cal_event_line "+(c||"");if(e.getState().select_id==t.id){c+=" dhx_cal_event_selected"}if(t._no_drag_move){c+=" no_drag_move"}var h=t.color?"background:"+t.color+";":"";var f=t.textColor?"color:"+t.textColor+";":"";var v=e.templates.event_bar_text(t.start_date,t.end_date,t);var u="<div "+e._waiAria.eventBarAttrString(t)+" event_id='"+t.id+"' class='"+c+"' style='"+h+f+"position:absolute; top:"+o+"px; height: "+s+"px; "+(e.config.rtl?"right:":"left:")+_+"px; width:"+Math.max(0,l-_)+"px;"+(t._text_style||"")+"'>";if(e.config.drag_resize&&!e.config.readonly){var m="dhx_event_resize";var g=s+1;var p="<div class='"+m+" "+m+"_start' style='height: "+g+"px;'></div>";var x="<div class='"+m+" "+m+"_end' style='height: "+g+"px;'></div>";u+=(!t._no_resize_start?p:"")+(!t._no_resize_end?x:"")}u+=v+"</div>";if(!r)return u;else{var y=document.createElement("div");y.innerHTML=u;var w=this._scales[i];if(w){e._rendered.push(y.firstChild);w.appendChild(y.firstChild)}}};function r(e,t){t=t||[];if(e.children){for(var i=0;i<e.children.length;i++){t.push(e.children[i].key);r(e.children[i],t)}}return t}function i(e,t){var r=t.order[e];if(r===undefined){r="$_"+e}return r}function a(e,t){t[e.key]=e;if(e.children){for(var r=0;r<e.children.length;r++){a(e.children[r],t)}}}function _(e){var t={};var r=e.y_unit_original||e.y_unit;for(var i=0;i<r.length;i++){a(r[i],t)}return t}function l(t,r){var a=[];for(var l=0;l<r.y_unit.length;l++){a[l]=[]}var n;if(!a[n]){a[n]=[]}var s=_(r);var o=r.render=="tree";if(o){a.$tree={}}function d(e,t,r,i){if(!e[t]){e[t]=[]}for(var a=r;a<=i;a++){if(!e[t][a])e[t][a]=[];e[t][a].push(h)}}var c=r.y_property;for(var l=0;l<t.length;l++){var h=t[l];var f=h[c];n=i(f,r);var v=e._get_date_index(r,h.start_date);var u=e._get_date_index(r,h.end_date);if(h.end_date.valueOf()==r._trace_x[u].valueOf()){u-=1}if(!a[n]){a[n]=[]}d(a,n,v,u);var m=s[f];if(o&&m&&m.$parent){while(m.$parent){var g=s[m.$parent];d(a.$tree,g.key,v,u);m=g}}}return a}var n=function(e){var t=String(e);return t.replace(/'/g,"&apos;").replace(/"/g,"&quot;")};var s=function(e){var t=String(e);return t.replace(/'/g,"\\'").replace(/"/g,'\\"')};e._timeline_trace_events=function t(){var r=e.get_visible_events();var i=l(r,this);return i};e._timeline_getX=function t(r,i,a){var _=0;var l=a._step;var n=a.round_position;var s=0;var o=i?r.end_date:r.start_date;if(o.valueOf()>e._max_date.valueOf())o=e._max_date;var d=o-e._min_date_timeline;if(d>0){var c=e._get_date_index(a,o);if(e._ignores[c])n=true;for(var h=0;h<c;h++){_+=e._cols[h]}var f=e._timeline_get_rounded_date.apply(a,[o,false]);if(!n){d=o-f;if(a.first_hour||a.last_hour){d=d-a._start_correction;if(d<0)d=0;s=Math.round(d/l);if(s>e._cols[c])s=e._cols[c]}else{s=Math.round(d/l)}}else{if(+o>+f&&i){s=e._cols[c]}}}var v=e._border_box_events();if(i){if(d!==0&&!n){_+=s}else{_+=s-2}}else{_+=s+1}return _};e._timeline_get_rounded_date=function t(r,i){var a=e._get_date_index(this,r);var _=this._trace_x[a];if(i&&+r!=+this._trace_x[a]){_=this._trace_x[a+1]?this._trace_x[a+1]:e.date.add(this._trace_x[a],this.x_step,this.x_unit)}return new Date(_)};e._timeline_skip_ignored=function t(r){if(e._ignores_detected){var i,a,_,l;for(var n=0;n<r.length;n++){l=r[n];_=false;i=e._get_date_index(this,l.start_date);a=e._get_date_index(this,l.end_date);while(i<a){if(!e._ignores[i]){_=true;break}i++}if(!_&&i==a&&!e._ignores[a]){if(+l.end_date>+this._trace_x[a]){_=true}}if(!_){r.splice(n,1);n--}}}};e._timeline_calculate_event_positions=function(t){if(t&&this.render!="cell"){e._timeline_skip_ignored.call(this,t);t.sort(this.sort||function(e,t){if(e.start_date.valueOf()==t.start_date.valueOf())return e.id>t.id?1:-1;return e.start_date>t.start_date?1:-1});var r=[];var i=t.length;var a=-1,_=null;for(var l=0;l<i;l++){var n=t[l];n._inner=false;var s=this.round_position?e._timeline_get_rounded_date.apply(this,[n.start_date,false]):n.start_date;var o=this.round_position?e._timeline_get_rounded_date.apply(this,[n.end_date,true]):n.end_date;while(r.length){var d=r[r.length-1];if(d.end_date.valueOf()<=s.valueOf()){r.splice(r.length-1,1)}else{break}}var c=false;for(var h=0;h<r.length;h++){var f=r[h];if(f.end_date.valueOf()<=s.valueOf()){c=true;n._sorder=f._sorder;r.splice(h,1);n._inner=true;break}}if(r.length)r[r.length-1]._inner=true;if(!c){if(r.length){if(r.length<=r[r.length-1]._sorder){if(!r[r.length-1]._sorder)n._sorder=0;else for(var v=0;v<r.length;v++){var u=false;for(var m=0;m<r.length;m++){if(r[m]._sorder==v){u=true;break}}if(!u){n._sorder=v;break}}n._inner=true}else{var g=r[0]._sorder;for(var p=1;p<r.length;p++)if(r[p]._sorder>g)g=r[p]._sorder;n._sorder=g+1;if(a<n._sorder){a=n._sorder;_=n}n._inner=false}}else n._sorder=0}r.push(n);if(r.length>(r.max_count||0)){r.max_count=r.length;n._count=r.length}else{n._count=n._count?n._count:1}}for(var x=0;x<t.length;x++){t[x]._count=r.max_count;if(e._register_copy){e._register_copy(t[x])}}if(_||t[0]){e.render_timeline_event.call(this,_||t[0],false)}}};e._timeline_get_events_html=function t(r){var i="";if(r&&this.render!="cell"){for(var a=0;a<r.length;a++){i+=e.render_timeline_event.call(this,r[a],false)}}return i};e._timeline_update_events_html=function t(r){var i="";if(r&&this.render!="cell"){var a=e.getView();var _={};var l=function(e,t){return e+"_"+t};r.forEach(function(e){_[l(e.id,e[a.y_property])]=true});e._rendered.forEach(function(e){if(e.parentNode){var t=e.parentNode.getAttribute("data-section-id");if(_[l(e.getAttribute("event_id"),t)]){e.parentNode.removeChild(e)}}});for(var n=0;n<r.length;n++){i+=e.render_timeline_event.call(this,r[n],false)}}return i};function o(){var e=document.createElement("p");e.style.width="100%";e.style.height="200px";var t=document.createElement("div");t.style.position="absolute";t.style.top="0px";t.style.left="0px";t.style.visibility="hidden";t.style.width="200px";t.style.height="150px";t.style.overflow="hidden";t.appendChild(e);document.body.appendChild(t);var r=e.offsetWidth;t.style.overflow="scroll";var i=e.offsetWidth;if(r==i){i=t.clientWidth}document.body.removeChild(t);return r-i}e._timeline_get_block_stats=function(t,r){var i={};r._sch_height=t.offsetHeight;i.style_data_wrapper=(e.config.rtl?"padding-right:":"padding-left:")+r.dx+"px;";i.style_label_wrapper="width: "+r.dx+"px;";if(r.scrollable){i.style_data_wrapper+="height:"+(r._sch_height-1)+"px;";if(r.html_scroll_width===undefined)r.html_scroll_width=o();if(r._section_autowidth){r.custom_scroll_width=0}else{r.custom_scroll_width=r.html_scroll_width}i.style_label_wrapper+="height:"+(r._sch_height-1-r.custom_scroll_width)+"px;"}else{i.style_data_wrapper+="height:"+(r._sch_height-1)+"px;";i.style_label_wrapper+="height:"+(r._sch_height-1)+"px;overflow:visible;"}return i};e._timeline_get_cur_row_stats=function(t,r){var i=t._logic(t.render,t.y_unit[r],t);e._merge(i,{height:t.dy});if(t.section_autoheight){var a=t.scrollable?t._sch_height-e.xy.scroll_width:t._sch_height;if(t.y_unit.length*i.height<a){i.height=Math.max(i.height,Math.floor((a-1)/t.y_unit.length))}}t._section_height[t.y_unit[r].key]=i.height;if(!i.td_className){i.td_className="dhx_matrix_scell"+(e.templates[t.name+"_scaley_class"](t.y_unit[r].key,t.y_unit[r].label,t.y_unit[r])?" "+e.templates[t.name+"_scaley_class"](t.y_unit[r].key,t.y_unit[r].label,t.y_unit[r]):"")}if(!i.td_content){i.td_content=e.templates[t.name+"_scale_label"](t.y_unit[r].key,t.y_unit[r].label,t.y_unit[r])}e._merge(i,{tr_className:"",style_height:"height:"+i.height+"px;",style_width:"width:"+t.dx+"px;",summ_width:"width:"+t._summ+"px;",table_className:""});return i};e._timeline_get_fit_events_stats=function(e,t,r){if(e.fit_events){var i=e._events_height[e.y_unit[t].key]||0;r.height=i>r.height?i:r.height;r.style_height="height:"+r.height+"px;";r.style_line_height="line-height:"+(r.height-1)+"px;";e._section_height[e.y_unit[t].key]=r.height}r.style_height="height:"+r.height+"px;";r.style_line_height="line-height:"+(r.height-1)+"px;";e._section_height[e.y_unit[t].key]=r.height;return r};e._timeline_set_scroll_pos=function(e,t){var r=e.querySelector(".dhx_timeline_data_wrapper");r.scrollTop=t._y_scroll||0;t.scrollHelper.setScrollValue(r,t._x_scroll||0);if(t.scrollHelper.getMode()!=t.scrollHelper.modes.maxMin&&r.scrollLeft==t._summ-r.offsetWidth+t.dx)r.scrollLeft+=o()};e._timeline_save_scroll_pos=function(e,t,r,i){e._y_scroll=t||0;e._x_scroll=r||0};e._timeline_get_html_for_cell_data_row=function(e,t,r,i,a){var _="";if(a.template){_+=" "+(a.template(a.section,a.view)||"")}return"<div class='dhx_timeline_data_row"+_+"' data-section-id='"+n(i)+"' data-section-index='"+e+"' style='"+t.summ_width+t.style_height+" position:absolute; top:"+r+"px;'>"};e._timeline_get_html_for_cell_ignores=function(e){return'<div class="dhx_matrix_cell dhx_timeline_data_cell" style="'+e.style_height+e.style_line_height+';display:none"></div>'};e._timeline_get_html_for_cell=function(t,r,i,a,_,l){var n=i._trace_x[t];var s=i.y_unit[r];var o=e._cols[t];var c=d(n);var h=e.templates[i.name+"_cell_value"](a,n,s);return"<div data-col-id='"+t+"' data-col-date='"+c+"' class='dhx_matrix_cell dhx_timeline_data_cell "+e.templates[i.name+"_cell_class"](a,n,s)+"' style='width:"+o+"px;"+_.style_height+_.style_line_height+(e.config.rtl?" right:":"  left:")+l+"px;'>"+"<div style='width:auto'>"+h+"</div></div>"};e._timeline_get_html_for_bar_matrix_line=function(e,t,r,i){return"<div style='"+t.summ_width+" "+t.style_height+" position:absolute; top:"+r+"px;' data-section-id='"+n(i)+"' data-section-index='"+e+"' class='dhx_matrix_line'>"};e._timeline_get_html_for_bar_data_row=function(e,t){var r=e.table_className;if(t.template){r+=" "+(t.template(t.section,t.view)||"")}return"<div class='dhx_timeline_data_row "+r+"' style='"+e.summ_width+" "+e.style_height+"' >"};e._timeline_get_html_for_bar_ignores=function(){return""};function d(t){return e._helpers.formatDate(t)}e._timeline_get_html_for_bar=function(t,r,i,a,_,l){var n=d(i._trace_x[t]);var s=i.y_unit[r];var o="";if(i.cell_template){o=e.templates[i.name+"_cell_value"](a,i._trace_x[t],s,l)}var c="line-height:"+i._section_height[s.key]+"px;";return"<div class='dhx_matrix_cell dhx_timeline_data_cell "+e.templates[i.name+"_cell_class"](a,i._trace_x[t],s,l)+"' style='width:"+e._cols[t]+"px; "+(e.config.rtl?"right:":"left:")+_+"px;'  data-col-id='"+t+"' data-col-date='"+n+"' >"+"<div style='width:auto; height:100%;position:relative;"+c+"'>"+o+"</div></div>"};e._timeline_render_scale_header=function(t,r){var i=e.$container.querySelector(".dhx_timeline_scale_header");if(i){i.parentNode.removeChild(i)}if(!r){return}i=document.createElement("div");var a="dhx_timeline_scale_header";if(t.second_scale){a+=" dhx_timeline_second_scale"}var _=e.xy.scale_height;i.className=a;i.style.cssText=["width:"+(t.dx-1)+"px","height:"+_+"px","line-height:"+_+"px","top:"+(e.xy.nav_height+2)+"px",e.config.rtl?"right:0":"left:0"].join(";");i.innerHTML=e.locale.labels[t.name+"_scale_header"]||"";e.$container.appendChild(i)};function c(t,r){var i=t.querySelector(".dhx_timeline_data_wrapper");if(!r.scrollable){i=e.$container.querySelector(".dhx_cal_data")}return i}function h(e){return e.querySelector(".dhx_timeline_label_wrapper")}function f(){return e.$container.querySelector(".dhx_cal_data .dhx_timeline_label_col")}function v(t,r,i,a){r._is_ev_creating=false;var _=c(t,r);var l=e._els["dhx_cal_header"][0];function n(e){e=e||window.event;if(e.shiftKey)return;var t=e.deltaY||e.detail||-e.wheelDelta;t=t<0?-100:100;_.scrollTop+=t;if(e.preventDefault){e.preventDefault()}}var s=h(t);if(s){if(s.addEventListener){if("onwheel"in document){s.addEventListener("wheel",n)}else if("onmousewheel"in document){s.addEventListener("mousewheel",n)}}else{s.attachEvent("onmousewheel",n)}if(!s.$eventsAttached){s.$eventsAttached=true;var d={pageX:0,pageY:0};s.addEventListener("touchstart",function(e){var t=e;if(e.touches){t=e.touches[0]}d={pageX:t.pageX,pageY:t.pageY}});s.addEventListener("touchmove",function(e){var t=e;if(e.touches){t=e.touches[0]}var r=d.pageY-t.pageY;d={pageX:t.pageX,pageY:t.pageY};if(r){_.scrollTop+=r}if(e&&e.preventDefault)e.preventDefault()})}}var v;_.onscroll=function(n){var s=c(t,r);var d=s.scrollTop;var h=r.scrollHelper.getScrollValue(s);var u=e._timeline_smart_render.getViewPort(r.scrollHelper,0,h,d);var m=f();if(r.scrollable){m.style.top=-d+"px"}if(r.smart_rendering===false){return}if(h!==r._x_scroll||r._is_ev_creating){if(r.second_scale)e._timeline_smart_render.updateHeader(r,u,l.children[1]);else e._timeline_smart_render.updateHeader(r,u,l.children[0])}if(e.config.rtl){var g=+e.$container.querySelector(".dhx_timeline_label_wrapper").style.height.replace("px","");var p=r._section_height[r.y_unit.length]+r._label_rows[r._label_rows.length-1].top;if(r.scrollHelper.getMode()==r.scrollHelper.modes.minMax&&(p>g||r.render=="tree")){l.style.right=-1-h-o()+"px"}else l.style.right=-1-h+"px";l.style.left="unset"}else{l.style.left=-1-h+"px"}if(r._options_changed||d!==r._y_scroll||r._is_ev_creating){e._timeline_smart_render.updateLabels(r,u,m)}r._is_ev_creating=false;e._timeline_smart_render.updateGridCols(r,u);e._timeline_smart_render.updateGridRows(r,u);var x=false;if(r.render!="cell"){if(window.requestAnimationFrame){x=true;if(v){cancelAnimationFrame(v)}v=requestAnimationFrame(function(){if(r.name!==e.getState().mode){return}e._timeline_smart_render.updateEvents(r,u);v=0;r.callEvent("onScroll",[r.scrollHelper.getScrollValue(_),_.scrollTop])})}else{e._timeline_smart_render.updateEvents(r,u)}}var y=0;r._scales={};var w;if(r.render==="cell")w=s.querySelectorAll(".dhx_timeline_data_col .dhx_timeline_data_row");else w=s.querySelectorAll(".dhx_timeline_data_col .dhx_matrix_line");for(var b=0,k=w.length;b<k;b++){var E=w[b].getAttribute("data-section-id");var S=r.order[E];i[S]=a[S].height;r._scales[E]=w[b]}for(var b=0,k=i.length;b<k;b++){y+=i[b]}var T=e.$container.querySelector(".dhx_timeline_data_col");T.style.height=y+"px";var C=s.scrollTop;var M=r.scrollHelper.getScrollValue(s);var H=r._summ-e.$container.querySelector(".dhx_cal_data").offsetWidth+r.dx+r.custom_scroll_width;e._timeline_save_scroll_pos(r,C,M,H);if(!x){r.callEvent("onScroll",[M,C])}r._is_new_view=false};if(!_.$eventsAttached){_.$eventsAttached=true;var u={pageX:0,pageY:0};_.addEventListener("touchstart",function(e){var t=e;if(e.touches){t=e.touches[0]}u={pageX:t.pageX,pageY:t.pageY}});_.addEventListener("touchmove",function(t){var i=t;if(t.touches){i=t.touches[0]}var a=f();var l=u.pageX-i.pageX;var n=u.pageY-i.pageY;u={pageX:i.pageX,pageY:i.pageY};if((l||n)&&!e.getState().drag_id){var s=Math.abs(l);var o=Math.abs(n);var d=Math.sqrt(l*l+n*n);var c=s/d;var h=o/d;if(c<.42){l=0}else if(h<.42){n=0}r.scrollHelper.setScrollValue(_,r.scrollHelper.getScrollValue(_)+l);_.scrollTop+=n;if(r.scrollable&&n){a.style.top=-_.scrollTop+"px"}}if(t&&t.preventDefault)t.preventDefault();return false})}if(r.scroll_position&&r._is_new_view){r.scrollTo(r.scroll_position)}else{e._timeline_set_scroll_pos(t,r)}r._is_ev_creating=true}e._timeline_y_scale=function t(r){var i=e._timeline_get_block_stats(r,this);var a=!this.scrollable?"":" dhx_timeline_scrollable_data";var _="<div class='dhx_timeline_table_wrapper'>";var l="<div class='dhx_timeline_label_wrapper' style='"+i.style_label_wrapper+"'>"+"<div class='dhx_timeline_label_col'>";var s="<div class='dhx_timeline_data_wrapper"+a+"' style='"+i.style_data_wrapper+"'>"+"<div class='dhx_timeline_data_col'>";if(e._load_mode)e._load();e._timeline_smart_render.clearPreparedEventsCache(o);var o=e._timeline_smart_render.getPreparedEvents(this);e._timeline_smart_render.cachePreparedEvents(o);var d=0;for(var c=0;c<e._cols.length;c++)d+=e._cols[c];var h=new Date;var f=e._cols.length-e._ignores_detected;h=(e.date.add(h,this.x_step*f,this.x_unit)-h-(this._start_correction+this._end_correction)*f)/d;this._step=h;this._summ=d;var u=e._colsS.heights=[];var m=[];this._events_height={};this._section_height={};this._label_rows=[];var g=false;var p=0;var x=null;if(this.scrollable||this.smart_rendering){x=e._timeline_smart_render.getViewPort(this.scrollHelper,this._sch_height)}e._timeline_smart_render._rendered_labels_cache=[];e._timeline_smart_render._rendered_events_cache=[];var y=!!x;var w;if(!this.scrollable){w=!!this.smart_rendering&&y}else{if(this.smart_rendering===false){w=false}else{w=!!y}}var b=[];var k=0;for(var E=0;E<this.y_unit.length;E++){e._timeline_calculate_event_positions.call(this,o[E]);var S=e._timeline_get_cur_row_stats(this,E);S=e._timeline_get_fit_events_stats(this,E,S);b.push(S);k+=S.height}if(x&&k<x.scrollTop){x.scrollTop=Math.max(0,k-x.height)}for(var E=0;E<this.y_unit.length;E++){var S=b[E];var T=this.y_unit[E];var C="<div class='dhx_timeline_label_row "+S.tr_className+"' style='top:"+p+"px;"+S.style_height+S.style_line_height+"'"+"data-row-index='"+E+"'"+" data-row-id='"+n(T.key)+"'>"+"<div class='"+S.td_className+"' style='"+S.style_width+" height:"+S.height+"px;' "+e._waiAria.label(S.td_content)+">"+S.td_content+"</div></div>";if(w)this._label_rows.push({div:C,top:p,section:T});if(w){if(!e._timeline_smart_render.isInYViewPort({top:p,bottom:p+S.height},x)){g=true}}p+=S.height;if(g){g=false}else{l+=C;if(w){e._timeline_smart_render._rendered_labels_cache.push(E)}var M=e.templates[this.name+"_row_class"];var H={view:this,section:T,template:M};var D=0;if(this.render=="cell"){s+=e._timeline_get_html_for_cell_data_row(E,S,p-S.height,T.key,H);for(var L=0;L<e._cols.length;L++){if(e._ignores[L]&&!w)s+=e._timeline_get_html_for_cell_ignores(S);else{if(w&&y){if(e._timeline_smart_render.isInXViewPort({left:D,right:D+e._cols[L]},x)){s+=e._timeline_get_html_for_cell(L,E,this,o[E][L],S,D)}}else{s+=e._timeline_get_html_for_cell(L,E,this,o[E][L],S,D)}}D+=e._cols[L]}s+="</div>"}else{s+=e._timeline_get_html_for_bar_matrix_line(E,S,p-S.height,T.key);var $=o[E];if(w&&y){$=e._timeline_smart_render.getVisibleEventsForRow(this,x,o,E)}var z=e._timeline_get_events_html.call(this,$);s+=z;s+=e._timeline_get_html_for_bar_data_row(S,H);for(var L=0;L<e._cols.length;L++){if(e._ignores[L])s+=e._timeline_get_html_for_bar_ignores();else{if(w&&y){if(e._timeline_smart_render.isInXViewPort({left:D,right:D+e._cols[L]},x)){s+=e._timeline_get_html_for_bar(L,E,this,o[E],D)}}else{s+=e._timeline_get_html_for_bar(L,E,this,o[E],D)}}D+=e._cols[L]}s+="</div></div>"}}S.sectionKey=T.key;m.push(S)}_+=l+"</div></div>";_+=s+"</div></div>";_+="</div>";this._matrix=o;r.innerHTML=_;if(w){var q=e.$container.querySelector(".dhx_timeline_data_col");q.style.height=p+"px"}e._populate_timeline_rendered(r);this._scales={};var V=null;for(var c=0,O=m.length;c<O;c++){u.push(m[c].height);var N=m[c].sectionKey;e._timeline_finalize_section_add(this,N,r)}if(w){if(e._timeline_smart_render){e._timeline_smart_render._rendered_events_cache=[]}}if(w||this.scrollable){v(r,this,u,m)}};e._timeline_finalize_section_add=function(t,r,i){var a=t._scales[r]=i.querySelector(".dhx_timeline_data_col [data-section-id='"+s(r)+"']");if(a){e.callEvent("onScaleAdd",[a,r])}};e.attachEvent("onBeforeViewChange",function(t,r,i,a){if(e.matrix[i]){var _=e.matrix[i];if(_.scrollable){if(_.render=="tree"){if(t===i&&r===a){return true}}_._x_scroll=_._y_scroll=0;if(e.$container.querySelector(".dhx_timeline_scrollable_data")){e._timeline_set_scroll_pos(e._els["dhx_cal_data"][0],_)}}}return true});e._timeline_x_dates=function t(r){var i=e._min_date;var a=e._max_date;e._process_ignores(i,this.x_size,this.x_unit,this.x_step,r);var _=this.x_size+(r?e._ignores_detected:0);var l=0,n=0;while(+i<+a){this._trace_x[n]=new Date(i);if(this.x_unit=="month"&&e.date[this.x_unit+"_start"]){i=e.date[this.x_unit+"_start"](new Date(i))}i=e.date.add(i,this.x_step,this.x_unit);if(e.date[this.x_unit+"_start"]){i=e.date[this.x_unit+"_start"](i)}if(!e._ignores[n])l++;n++;if(r){if(l<this.x_size&&!(+i<+a)){a=e.date["add_"+this.name+"_private"](a,(this.x_length||this.x_size)*this.x_step)}else if(l>=this.x_size){e._max_date=i;break}}}return{total:n,displayed:l}};e._timeline_x_scale=function t(r){var i=e.xy.scale_height;var a=this._header_resized||e.xy.scale_height;e._cols=[];e._colsS={height:0};this._trace_x=[];var _=e.config.preserve_scale_length;var l=e._timeline_x_dates.call(this,_);var n=e._x-this.dx-e.xy.scroll_width;if(this.scrollable&&this.column_width>0){var s=this.column_width*l.displayed;if(s>n){n=s;this._section_autowidth=false}}var o=[this.dx];var c=e._els["dhx_cal_header"][0];c.style.width=o[0]+n+"px";var h=e._min_date_timeline=e._min_date;var f=l.displayed;var v=l.total;for(var u=0;u<v;u++){if(e._ignores[u]){e._cols[u]=0;f++}else{e._cols[u]=Math.floor(n/(f-u))}n-=e._cols[u];o[u+1]=o[u]+e._cols[u]}r.innerHTML="<div></div>";if(this.second_scale){var m=this.second_scale.x_unit;var g=[this._trace_x[0]];var p=[];var x=[this.dx,this.dx];var y=0;for(var w=0;w<this._trace_x.length;w++){var b=this._trace_x[w];var k=e._timeline_is_new_interval(m,b,g[y]);if(k){++y;g[y]=b;x[y+1]=x[y]}var E=y+1;p[y]=e._cols[w]+(p[y]||0);x[E]+=e._cols[w]}r.innerHTML="<div></div><div></div>";var S=r.firstChild;S.style.height=a+"px";var T=r.lastChild;T.style.position="relative";T.className="dhx_bottom_scale_container";for(var C=0;C<g.length;C++){var M=g[C];var H=e.templates[this.name+"_second_scalex_class"](M);var D=document.createElement("div");D.className="dhx_scale_bar dhx_second_scale_bar"+(H?" "+H:"");e.set_xy(D,p[C]-1,a-3,x[C],0);D.innerHTML=e.templates[this.name+"_second_scale_date"](M);S.appendChild(D)}}e.xy.scale_height=a;r=r.lastChild;this._h_cols={};for(var L=0;L<this._trace_x.length;L++){if(e._ignores[L])continue;h=this._trace_x[L];e._render_x_header(L,o[L],h,r);var $=e.templates[this.name+"_scalex_class"](h);if($)r.lastChild.className+=" "+$;r.lastChild.setAttribute("data-col-id",L);r.lastChild.setAttribute("data-col-date",d(h));var z=r.lastChild.cloneNode(true);this._h_cols[L]={div:z,left:o[L]}}e.xy.scale_height=i;var q=this._trace_x;r.onclick=function(t){var r=e._timeline_locate_hcell(t);if(r)e.callEvent("onXScaleClick",[r.x,q[r.x],t||event])};r.ondblclick=function(t){var r=e._timeline_locate_hcell(t);if(r)e.callEvent("onXScaleDblClick",[r.x,q[r.x],t||event])}};e._timeline_is_new_interval=function t(r,i,a){switch(r){case"hour":return i.getHours()!=a.getHours()||e._timeline_is_new_interval("day",i,a);case"day":return!(i.getDate()==a.getDate()&&i.getMonth()==a.getMonth()&&i.getFullYear()==a.getFullYear());case"week":return!(e.date.week_start(new Date(i)).valueOf()==e.date.week_start(new Date(a)).valueOf());case"month":return!(i.getMonth()==a.getMonth()&&i.getFullYear()==a.getFullYear());case"year":return!(i.getFullYear()==a.getFullYear());default:return false}};e._timeline_reset_scale_height=function t(r){if(this._header_resized&&(!r||!this.second_scale)){e.xy.scale_height/=2;this._header_resized=false;var i=e._els["dhx_cal_header"][0];i.className=i.className.replace(/ dhx_second_cal_header/gi,"")}};e._timeline_set_full_view=function t(r){e._timeline_reset_scale_height.call(this,r);if(r){if(this.second_scale&&!this._header_resized){this._header_resized=e.xy.scale_height;e.xy.scale_height*=2;e._els["dhx_cal_header"][0].className+=" dhx_second_cal_header"}e.set_sizes();e._init_matrix_tooltip();var i=e._min_date;e._timeline_x_scale.call(this,e._els["dhx_cal_header"][0]);if(e.$container.querySelector(".dhx_timeline_scrollable_data")){var a=e._timeline_smart_render.getViewPort(this.scrollHelper);var _=e._timeline_smart_render.getVisibleHeader(this,a);if(_){if(this.second_scale)e._els.dhx_cal_header[0].children[1].innerHTML=_;else e._els.dhx_cal_header[0].children[0].innerHTML=_}}e._timeline_y_scale.call(this,e._els["dhx_cal_data"][0]);e._min_date=i;var l=e._getNavDateElement();if(l){l.innerHTML=e.templates[this.name+"_date"](e._min_date,e._max_date)}if(e._mark_now){e._mark_now()}e._timeline_reset_scale_height.call(this,r)}e._timeline_render_scale_header(this,r);e._timeline_hideToolTip()};e._timeline_hideToolTip=function t(){if(e._tooltip){e._tooltip.style.display="none";e._tooltip.date=""}};e._timeline_showToolTip=function t(r,i,a){if(r.render!="cell")return;var _=i.x+"_"+i.y;var l=r._matrix[i.y][i.x];if(!l)return e._timeline_hideToolTip();l.sort(function(e,t){return e.start_date>t.start_date?1:-1});if(e._tooltip){if(e._tooltip.date==_)return;e._tooltip.innerHTML=""}else{var n=e._tooltip=document.createElement("div");n.className="dhx_year_tooltip";if(e.config.rtl)n.className+=" dhx_tooltip_rtl";document.body.appendChild(n);n.onclick=e._click.dhx_cal_data}var s="";for(var o=0;o<l.length;o++){var d=l[o].color?"background-color:"+l[o].color+";":"";var c=l[o].textColor?"color:"+l[o].textColor+";":"";s+="<div class='dhx_tooltip_line' event_id='"+l[o].id+"' style='"+d+""+c+"'>";s+="<div class='dhx_tooltip_date'>"+(l[o]._timed?e.templates.event_date(l[o].start_date):"")+"</div>";s+="<div class='dhx_event_icon icon_details'>&nbsp;</div>";s+=e.templates[r.name+"_tooltip"](l[o].start_date,l[o].end_date,l[o])+"</div>"}e._tooltip.style.display="";e._tooltip.style.top="0px";if(e.config.rtl&&a.left-e._tooltip.offsetWidth>=0||document.body.offsetWidth-i.src.offsetWidth-a.left-e._tooltip.offsetWidth<0){e._tooltip.style.left=a.left-e._tooltip.offsetWidth+"px"}else{e._tooltip.style.left=a.left+i.src.offsetWidth+"px"}e._tooltip.date=_;e._tooltip.innerHTML=s;if(document.body.offsetHeight-a.top-e._tooltip.offsetHeight<0)e._tooltip.style.top=a.top-e._tooltip.offsetHeight+i.src.offsetHeight+"px";else e._tooltip.style.top=a.top+"px"};e._matrix_tooltip_handler=function(t){var r=e.matrix[e._mode];if(!r||r.render!="cell")return;if(r){var i=e._locate_cell_timeline(t);var t=t||event;var a=t.target||t.srcElement;if(i)return e._timeline_showToolTip(r,i,e.$domHelpers.getOffset(i.src))}e._timeline_hideToolTip()};e._init_matrix_tooltip=function(){e._detachDomEvent(e._els["dhx_cal_data"][0],"mouseover",e._matrix_tooltip_handler);e.event(e._els["dhx_cal_data"][0],"mouseover",e._matrix_tooltip_handler)};e._set_timeline_dates=function(t){e._min_date=e.date[t.name+"_start"](new Date(e._date));e._max_date=e.date["add_"+t.name+"_private"](e._min_date,t.x_size*t.x_step);if(e.date[t.x_unit+"_start"]){e._max_date=e.date[t.x_unit+"_start"](e._max_date)}e._table_view=true};e._renderMatrix=function(t,r){if(!r)e._els["dhx_cal_data"][0].scrollTop=0;e._set_timeline_dates(this);e._timeline_set_full_view.call(this,t)};e._timeline_html_index=function t(r){var i=r.parentNode.childNodes;var a=-1;for(var _=0;_<i.length;_++){if(i[_]==r){a=_;break}}var l=a;if(e._ignores_detected){for(var n in e._ignores){if(e._ignores[n]&&n*1<=l)l++}}return l};e._timeline_locate_hcell=function t(r){r=r||event;var i=r.target?r.target:r.srcElement;while(i&&i.tagName!="DIV")i=i.parentNode;if(i&&i.tagName=="DIV"){var a=e._getClassName(i).split(" ")[0];if(a=="dhx_scale_bar")return{x:e._timeline_html_index(i),y:-1,src:i,scale:true}}};function u(e,t){if(e.closest){return e.closest(t)}else if(e.matches||e.msMatchesSelector||e.webkitMatchesSelector){var r=e;if(!document.documentElement.contains(r))return null;do{var i=r.matches||r.msMatchesSelector||r.webkitMatchesSelector;if(i.call(r,t))return r;r=r.parentElement||r.parentNode}while(r!==null&&r.nodeType===1);return null}else{window.console.error("Your browser is not supported");return null}}e._locate_cell_timeline=function(t){t=t||event;var r=t.target?t.target:t.srcElement;var i={};var a=e.matrix[e._mode];var _=e.getActionData(t);var l=e._ignores;var n=0;for(var s=0;s<a._trace_x.length-1;s++){if(+_.date<a._trace_x[s+1])break;if(!l[s]){n++}}i.x=n===0?0:s;i.y=a.order[_.section];var o=e._isRender("cell")?1:0;var d=0;if(a.scrollable&&a.render==="cell"){if(!a._scales[_.section]||!a._scales[_.section].querySelector(".dhx_matrix_cell"))return;var c=a._scales[_.section].querySelector(".dhx_matrix_cell");if(!c)return;var h=c.offsetLeft;if(h>0){var f=e._timeline_drag_date(a,h);for(var v=0;v<a._trace_x.length-1;v++){if(+f<a._trace_x[v+1])break}d=v}}i.src=a._scales[_.section]?a._scales[_.section].querySelectorAll(".dhx_matrix_cell")[s-d]:null;var m=false;var g=u(r,".dhx_matrix_scell");if(g){r=g;m=true}if(m){i.x=-1;i.src=r;i.scale=true}else{i.x=s}return i};var m=e._click.dhx_cal_data;e._click.dhx_marked_timespan=e._click.dhx_cal_data=function(t){var r=m.apply(this,arguments);var i=e.matrix[e._mode];if(i){var a=e._locate_cell_timeline(t);if(a){if(a.scale)e.callEvent("onYScaleClick",[a.y,i.y_unit[a.y],t||event]);else{e.callEvent("onCellClick",[a.x,a.y,i._trace_x[a.x],(i._matrix[a.y]||{})[a.x]||[],t||event]);e._timeline_set_scroll_pos(e._els["dhx_cal_data"][0],i)}}}return r};e.dblclick_dhx_matrix_cell=function(t){var r=e.matrix[e._mode];if(r){var i=e._locate_cell_timeline(t);if(i){if(i.scale)e.callEvent("onYScaleDblClick",[i.y,r.y_unit[i.y],t||event]);else e.callEvent("onCellDblClick",[i.x,i.y,r._trace_x[i.x],(r._matrix[i.y]||{})[i.x]||[],t||event])}}};var g=e.dblclick_dhx_marked_timespan||function(){};e.dblclick_dhx_marked_timespan=function(t){var r=e.matrix[e._mode];if(r)return e.dblclick_dhx_matrix_cell(t);else return g.apply(this,arguments)};e.dblclick_dhx_matrix_scell=function(t){return e.dblclick_dhx_matrix_cell(t)};e._isRender=function(t){return e.matrix[e._mode]&&e.matrix[e._mode].render==t};e.attachEvent("onCellDblClick",function(t,r,i,a,_){if(this.config.readonly||_.type=="dblclick"&&!this.config.dblclick_create)return;var l=e.matrix[e._mode];var n={};n.start_date=l._trace_x[t];n.end_date=l._trace_x[t+1]?l._trace_x[t+1]:e.date.add(l._trace_x[t],l.x_step,l.x_unit);if(l._start_correction)n.start_date=new Date(n.start_date*1+l._start_correction);if(l._end_correction)n.end_date=new Date(n.end_date-l._end_correction);n[l.y_property]=l.y_unit[r].key;e.addEventNow(n,null,_)});e.attachEvent("onBeforeDrag",function(t,r,i){return!e._isRender("cell")});e.attachEvent("onEventChanged",function(e,t){t._timed=this.isOneDayEvent(t)});e.attachEvent("onBeforeEventChanged",function(e,t,r,i){if(e){e._move_delta=undefined}if(i){i._move_delta=undefined}return true});e._is_column_visible=function(t){var r=e.matrix[e._mode];var i=e._get_date_index(r,t);return!e._ignores[i]};var p=e._render_marked_timespan;e._render_marked_timespan=function(t,r,i,a,_){if(!e.config.display_marked_timespans)return[];if(e.matrix&&e.matrix[e._mode]){if(e._isRender("cell"))return;var l=e._lame_copy({},e.matrix[e._mode]);l.round_position=false;var n=[];var s=[];var o=[];var d=t.sections?t.sections.units||t.sections.timeline:null;if(!i){var c=l.order;if(d){if(c.hasOwnProperty(d)){s.push(d);o.push(l._scales[d])}}else{if(l._scales){for(var h in c){if(c.hasOwnProperty(h)&&l._scales[h]){s.push(h);o.push(l._scales[h])}}}}}else{o=[r];s=[i]}var a=a?new Date(a):e._min_date;var _=_?new Date(_):e._max_date;if(a.valueOf()<e._min_date.valueOf())a=new Date(e._min_date);if(_.valueOf()>e._max_date.valueOf())_=new Date(e._max_date);if(!l._trace_x)return;for(var f=0;f<l._trace_x.length;f++){if(e._is_column_visible(l._trace_x[f]))break}if(f==l._trace_x.length)return;var v=[];if(t.days>6){var u=new Date(t.days);if(e.date.date_part(new Date(a))<=+u&&+_>=+u)v.push(u)}else{v.push.apply(v,e._get_dates_by_index(t.days))}var m=t.zones;var g=e._get_css_classes_by_config(t);for(var x=0;x<s.length;x++){r=o[x];i=s[x];for(var f=0;f<v.length;f++){var y=v[f];for(var w=0;w<m.length;w+=2){var b=m[w];var k=m[w+1];var E=new Date(+y+b*60*1e3);var S=new Date(+y+k*60*1e3);E=new Date(E.valueOf()+(E.getTimezoneOffset()-y.getTimezoneOffset())*1e3*60);S=new Date(S.valueOf()+(S.getTimezoneOffset()-y.getTimezoneOffset())*1e3*60);if(!(a<S&&_>E))continue;var T=e._get_block_by_config(t);T.className=g;var C=e._timeline_getX({start_date:E},false,l)-1;var M=e._timeline_getX({start_date:S},false,l)-1;var H=Math.max(1,M-C-1);var D=l._section_height[i]-1||l.dy-1;T.style.cssText="height: "+D+"px; "+(e.config.rtl?"right: ":"left: ")+C+"px; width: "+H+"px; top: 0;";r.insertBefore(T,r.firstChild);n.push(T)}}}return n}else{return p.apply(e,[t,r,i])}};var x=e._append_mark_now;e._append_mark_now=function(t,r){if(e.matrix&&e.matrix[e._mode]){var i=e._currentDate();var a=e._get_zone_minutes(i);var _={days:+e.date.date_part(i),zones:[a,a+1],css:"dhx_matrix_now_time",type:"dhx_now_time"};return e._render_marked_timespan(_)}else{return x.apply(e,[t,r])}};var y=e._mark_timespans;e._mark_timespans=function(){if(e.matrix&&e.matrix[e.getState().mode]){var t=[];var r=e.matrix[e.getState().mode];var i=r.y_unit;for(var a=0;a<i.length;a++){var _=i[a].key;var l=r._scales[_];var n=e._on_scale_add_marker(l,_);t.push.apply(t,n)}return t}else{return y.apply(this,arguments)}};var w=e._on_scale_add_marker;e._on_scale_add_marker=function(t,r){if(e.matrix&&e.matrix[e._mode]){var i=[];var a=e._marked_timespans;if(a&&e.matrix&&e.matrix[e._mode]){var _=e._mode;var l=e._min_date;var n=e._max_date;var s=a["global"];for(var o=e.date.date_part(new Date(l));o<n;o=e.date.add(o,1,"day")){var d=+o;var c=o.getDay();var h=[];var f=s[d]||s[c];h.push.apply(h,e._get_configs_to_render(f));if(a[_]&&a[_][r]){var v=[];var u=e._get_types_to_render(a[_][r][c],a[_][r][d]);v.push.apply(v,e._get_configs_to_render(u));if(v.length)h=v}for(var m=0;m<h.length;m++){var g=h[m];var p=g.days;if(p<7){p=d;i.push.apply(i,e._render_marked_timespan(g,t,r,o,e.date.add(o,1,"day")));p=c}else{i.push.apply(i,e._render_marked_timespan(g,t,r,o,e.date.add(o,1,"day")))}}}}return i}else{return w.apply(this,arguments)}};e._resolve_timeline_section=function(e,t){var r=0;var i=0;for(r;r<this._colsS.heights.length;r++){i+=this._colsS.heights[r];if(i>t.y)break}if(!e.y_unit[r]){r=e.y_unit.length-1}if(this._drag_event&&!this._drag_event._orig_section){this._drag_event._orig_section=e.y_unit[r].key}t.fields={};if(r>=0&&e.y_unit[r]){t.section=t.fields[e.y_property]=e.y_unit[r].key}};e._update_timeline_section=function(e){var t=e.view,r=e.event,i=e.pos;if(r){if(r[t.y_property]!=i.section){var a=this._get_timeline_event_height(r,t);r._sorder=this._get_dnd_order(r._sorder,a,t._section_height[i.section])}r[t.y_property]=i.section}};e._get_date_index=function(e,t){var r=e._trace_x;var i=0,a=r.length-1;var _=t.valueOf();while(a-i>3){var l=i+Math.floor((a-i)/2);if(r[l].valueOf()>_){a=l}else{i=l}}var n=i;while(n<=a&&+t>=+r[n+1]){n++}return n};e._timeline_drag_date=function(t,r){var i=t,a={x:r};if(!i._trace_x.length){return new Date(e.getState().date)}var _=0,l=0;var n,s;for(l;l<=this._cols.length-1;l++){s=this._cols[l];_+=s;if(_>a.x){n=(a.x-(_-s))/s;n=n<0?0:n;break}}if(i.round_position){var o=1;var d=e.getState().drag_mode;if(d&&d!="move"&&d!="create"){o=.5}if(n>=o){l++}n=0}if(l===0&&this._ignores[0]){l=1;n=0;while(this._ignores[l])l++}else if(l==this._cols.length&&this._ignores[l-1]){l=this._cols.length-1;n=0;while(this._ignores[l])l--;l++}var c;if(l>=i._trace_x.length){c=e.date.add(i._trace_x[i._trace_x.length-1],i.x_step,i.x_unit);if(i._end_correction)c=new Date(c-i._end_correction)}else{var h=n*s*i._step+i._start_correction;c=new Date(+i._trace_x[l]+h)}return c};e.attachEvent("onBeforeTodayDisplayed",function(){for(var t in e.matrix){var r=e.matrix[t];r.x_start=r._original_x_start}return true});e.attachEvent("onOptionsLoad",function(){for(var t in e.matrix){var r=e.matrix[t];r.order={};e.callEvent("onOptionsLoadStart",[]);for(var t=0;t<r.y_unit.length;t++)r.order[r.y_unit[t].key]=t;e.callEvent("onOptionsLoadFinal",[]);if(e._date&&r.name==e._mode){r._options_changed=true;e.setCurrentView(e._date,e._mode);setTimeout(function(){r._options_changed=false})}}});e.attachEvent("onEventIdChange",function(){var t=e.getView();if(t&&e.matrix[t.name]){if(e._timeline_smart_render){e._timeline_smart_render.clearPreparedEventsCache();e._timeline_smart_render.getPreparedEvents(t)}}});e.attachEvent("onBeforeDrag",function(t,r,i){if(r=="resize"){var a=i.target||i.srcElement;var _=e._getClassName(a);if(_.indexOf("dhx_event_resize_end")<0){e._drag_from_start=true}else{e._drag_from_start=false}}return true});var b=10;var k=null,E=null;function S(t,r){var i=e.matrix[e._mode];var a={},_={},l=r;a.x=!!t.touches?t.touches[0].pageX:t.pageX;a.y=!!t.touches?t.touches[0].pageY:t.pageY;_.left=l.offsetLeft+i.dx;_.top=l.offsetTop;while(l){_.left+=l.offsetLeft;_.top+=l.offsetTop;l=l.offsetParent}return{x:a.x-_.left,y:a.y-_.top}}function T(t){if(k)clearInterval(k);e._schedulerOuter=e.$container.querySelector(".dhx_timeline_data_wrapper");var r={pageX:!!t.touches?t.touches[0].pageX:t.pageX,pageY:!!t.touches?t.touches[0].pageY:t.pageY};k=setInterval(function(){C(r)},b)}function C(t){if(!e.getState().drag_id){clearInterval(k);E=null;return}var r=e.matrix[e._mode];if(!r)return;var i=e._schedulerOuter;var a=S(t,i);var _=i.offsetWidth-r.dx;var l=i.offsetHeight;var n=a.x;var s=a.y;var o=r.autoscroll||{};e._merge(o,{range_x:200,range_y:100,speed_x:20,speed_y:10});var d=M(n,_,E?E.x:0,o.range_x);if(!r.scrollable){d=0}var c=M(s,l,E?E.y:0,o.range_y);if((c||d)&&!E){E={x:n,y:s};d=0;c=0}d=d*o.speed_x;c=c*o.speed_y;if(d&&c){if(Math.abs(d/5)>Math.abs(c)){c=0}else if(Math.abs(c/5)>Math.abs(d)){d=0}}if(d||c){E.started=true;H(d,c)}else{clearInterval(k)}}function M(e,t,r,i){if(e<i&&(!E||E.started||e<r)){return-1}else if(t-e<i&&(!E||E.started||e>r)){return 1}return 0}function H(t,r){var i=e._schedulerOuter;if(r){i.scrollTop+=r}if(t){i.scrollLeft+=t}}var D=e.attachEvent("onSchedulerReady",function(){if(e.matrix){e.event(document.body,"mousemove",T);e.detachEvent(D)}});e._timeline_smart_render={_prepared_events_cache:null,_rendered_events_cache:[],_rendered_header_cache:[],_rendered_labels_cache:[],_rows_to_delete:[],_rows_to_add:[],_cols_to_delete:[],_cols_to_add:[],getViewPort:function(t,r,i,a){var _=e.$container.querySelector(".dhx_cal_data");var l=_.getBoundingClientRect();var n=e.$container.querySelector(".dhx_timeline_scrollable_data");if(n&&i===undefined){i=t.getScrollValue(n)}if(a===undefined){if(n){a=n.scrollTop}else{a=_.scrollTop}}var s={};for(var o in l){s[o]=l[o]}s.scrollLeft=i||0;s.scrollTop=a||0;if(r)l.height=r;return s},isInXViewPort:function(e,t){var r=t.scrollLeft;var i=t.width+t.scrollLeft;return e.left<i+100&&e.right>r-100},isInYViewPort:function(e,t){var r=t.scrollTop;var i=t.height+t.scrollTop;return e.top<i+100&&e.bottom>r-100},getVisibleHeader:function(t,r){var i="";this._rendered_header_cache=[];for(var a in t._h_cols){var _=t._h_cols[a];if(this.isInXViewPort({left:_.left,right:_.left+e._cols[a]},r)){var l=_.div.outerHTML;i+=l;this._rendered_header_cache.push(_.div.getAttribute("data-col-id"))}}return i},updateHeader:function(t,r,i){this._cols_to_delete=[];this._cols_to_add=[];var a=e.$container.querySelectorAll(".dhx_cal_header > div");var _=a[a.length-1].querySelectorAll(".dhx_scale_bar");var l=[];for(var n=0;n<_.length;n++){l.push(_[n].getAttribute("data-col-id"))}var s=this.getVisibleHeader(t,r);if(!s)return;var o=this._rendered_header_cache.slice();var d=[];for(var n=0,c=l.length;n<c;n++){var h=o.indexOf(l[n]);if(h>-1){o.splice(h,1)}else{d.push(l[n])}}if(d.length){this._cols_to_delete=d.slice();this._deleteHeaderCells(d,t,i)}if(o.length){this._cols_to_add=o.slice();this._addHeaderCells(o,t,i)}},_deleteHeaderCells:function(e,t,r){for(var i=0;i<e.length;i++){var a=r.querySelector('[data-col-id="'+e[i]+'"]');if(a){r.removeChild(a)}}},_addHeaderCells:function(e,t,r){var i="";for(var a=0;a<e.length;a++){i+=t._h_cols[e[a]].div.outerHTML}r.insertAdjacentHTML("beforeEnd",i)},getVisibleLabels:function(e,t){if(!e._label_rows.length)return;var r="";this._rendered_labels_cache=[];for(var i=0;i<e._label_rows.length;i++){if(this.isInYViewPort({top:e._label_rows[i].top,bottom:e._label_rows[i].top+e._section_height[e.y_unit[i].key]},t)){var a=e._label_rows[i].div;r+=a;this._rendered_labels_cache.push(i)}}return r},updateLabels:function(e,t,r){this._rows_to_delete=[];this._rows_to_add=[];var i=this._rendered_labels_cache.slice();if(!i.length){this.getVisibleLabels(e,t);i=this._rendered_labels_cache.slice()}var a=this.getVisibleLabels(e,t);if(!a)return;var _=this._rendered_labels_cache.slice();var l=[];for(var n=0,s=i.length;n<s;n++){var o=_.indexOf(i[n]);if(o>-1){_.splice(o,1)}else{l.push(i[n])}}if(l.length){this._rows_to_delete=l.slice();this._deleteLabelCells(l,e,r)}if(_.length){this._rows_to_add=_.slice();this._addLabelCells(_,e,r)}},_deleteLabelCells:function(e,t,r){for(var i=0;i<e.length;i++){var a=r.querySelector('[data-row-index="'+e[i]+'"]');if(a){r.removeChild(a)}}},_addLabelCells:function(e,t,r){var i="";for(var a=0;a<e.length;a++){i+=t._label_rows[e[a]].div}r.insertAdjacentHTML("beforeEnd",i)},clearPreparedEventsCache:function(){this.cachePreparedEvents(null)},cachePreparedEvents:function(e){this._prepared_events_cache=e;this._prepared_events_coordinate_cache=e},getPreparedEvents:function(t){var r;if(this._prepared_events_cache){r=this._prepared_events_cache}else{r=e._prepare_timeline_events(t);r.$coordinates={};this.cachePreparedEvents(r)}return r},updateEvents:function(t,r){var i=this.getPreparedEvents(t);var a=this._rendered_events_cache.slice();this._rendered_events_cache=[];var _=e.$container.querySelector(".dhx_cal_data .dhx_timeline_data_col");if(!_)return;for(var l=0;l<this._rendered_labels_cache.length;l++){var n=this._rendered_labels_cache[l];var s=[];var o=a[n]?a[n].slice():[];e._timeline_calculate_event_positions.call(t,i[n]);var d=e._timeline_smart_render.getVisibleEventsForRow(t,r,i,n);for(var c=0,h=d.length;c<h;c++){var f=o.indexOf(d[c].id);if(f>-1){o.splice(f,1)}else{s.push(d[c])}}var v=_.querySelector('[data-section-index="'+n+'"]');if(o.length){this._deleteEvents(o,t,v)}if(s.length){this._addEvents(s,t,v,n)}}e._populate_timeline_rendered(e.$container);t._matrix=i},_deleteEvents:function(e,t,r){for(var i=0;i<e.length;i++){var a=r.querySelector('[event_id="'+e[i]+'"]');if(a){if(!a.classList.contains("dhx_in_move"))r.removeChild(a)}}},_addEvents:function(t,r,i,a){var _=e._timeline_update_events_html.call(r,t);i.insertAdjacentHTML("beforeEnd",_)},getVisibleEventsForRow:function(t,r,i,a){var _=[];if(t.render=="cell"){_=i}else{var l=i[a];if(l){for(var n=0,s=l.length;n<s;n++){var o=l[n];var d=a+"_"+o.id;var c,h;if(i.$coordinates&&i.$coordinates[d]){c=i.$coordinates[d].xStart;h=i.$coordinates[d].xEnd}else{c=e._timeline_getX(o,false,t);h=e._timeline_getX(o,true,t);if(i.$coordinates){i.$coordinates[d]={xStart:c,xEnd:h}}}if(e._timeline_smart_render.isInXViewPort({left:c,right:h},r)){_.push(o);if(!this._rendered_events_cache[a])this._rendered_events_cache[a]=[];this._rendered_events_cache[a].push(o.id)}}}}return _},getVisibleRowCellsHTML:function(t,r,i,a,_){var l="";var n;var s=this._rendered_header_cache;for(var o=0;o<s.length;o++){var d=s[o];n=t._h_cols[d].left-t.dx;if(e._ignores[d]){if(t.render=="cell"){l+=e._timeline_get_html_for_cell_ignores(i)}else{l+=e._timeline_get_html_for_bar_ignores()}}else{if(t.render=="cell"){l+=e._timeline_get_html_for_cell(d,_,t,a[_][d],i,n)}else{l+=e._timeline_get_html_for_bar(d,_,t,a[_],n)}}}return l},getVisibleTimelineRowsHTML:function(t,r,i,a){var _="";var l=e._timeline_get_cur_row_stats(t,a);l=e._timeline_get_fit_events_stats(t,a,l);var n=t._label_rows[a];var s=e.templates[t.name+"_row_class"];var o={view:t,section:n.section,template:s};if(t.render=="cell"){_+=e._timeline_get_html_for_cell_data_row(a,l,n.top,n.section.key,o);_+=this.getVisibleRowCellsHTML(t,r,l,i,a);_+="</div>"}else{_+=e._timeline_get_html_for_bar_matrix_line(a,l,n.top,n.section.key,o);_+=e._timeline_get_html_for_bar_data_row(l,o);_+=this.getVisibleRowCellsHTML(t,r,l,i,a);_+="</div></div>"}return _},updateGridRows:function(e,t){if(this._rows_to_delete.length){this._deleteGridRows(this._rows_to_delete)}if(this._rows_to_add.length){this._addGridRows(this._rows_to_add,e,t)}},_deleteGridRows:function(t){var r=e.$container.querySelector(".dhx_cal_data .dhx_timeline_data_col");if(!r)return;for(var i=0;i<t.length;i++){var a=r.querySelector('[data-section-index="'+t[i]+'"]');r.removeChild(a)}this._rows_to_delete=[]},_addGridRows:function(t,r,i){var a=e.$container.querySelector(".dhx_cal_data .dhx_timeline_data_col");if(!a)return;var _=this.getPreparedEvents(r);var l="";var n=[];for(var s=0;s<t.length;s++){l+=this.getVisibleTimelineRowsHTML(r,i,_,t[s])}a.insertAdjacentHTML("beforeEnd",l);for(var s=0;s<t.length;s++){e._timeline_finalize_section_add(r,r.y_unit[t[s]].key,a)}if(e._mark_now){e._mark_now()}this._rows_to_add=[]},updateGridCols:function(t,r){var i=this._rendered_header_cache;var a={};var _={};for(var l=0;l<i.length;l++){_[i[l]]=true}var n=e.$container.querySelector(".dhx_timeline_data_row");if(n){var s=n.querySelectorAll("[data-col-id]");for(var l=0;l<s.length;l++){a[s[l].getAttribute("data-col-id")]=true}}var o=[],d=[];for(var l in a){if(!_[l]){o.push(l)}}for(var l in _){if(!a[l]){d.push(l)}}if(o.length){this._deleteGridCols(o,t)}if(d.length){this._addGridCols(d,t,r)}},_deleteGridCols:function(t,r){var i=e.$container.querySelector(".dhx_cal_data .dhx_timeline_data_col");if(!i)return;for(var a=0;a<this._rendered_labels_cache.length;a++){var _;if(r.render=="cell"){_=i.querySelector('[data-section-index="'+this._rendered_labels_cache[a]+'"]')}else{_=i.querySelector('[data-section-index="'+this._rendered_labels_cache[a]+'"] .dhx_timeline_data_row ')}if(_){for(var l=0;l<t.length;l++){var n=_.querySelector('[data-col-id="'+t[l]+'"]');if(n)_.removeChild(n)}}}this._cols_to_delete=[]},_addGridCols:function(t,r,i){var a=e.$container.querySelector(".dhx_cal_data .dhx_timeline_data_col");if(!a)return;var _=this.getPreparedEvents(r);for(var l=0;l<this._rendered_labels_cache.length;l++){var n=this._rendered_labels_cache[l];var s="";var o=e._timeline_get_cur_row_stats(r,n);o=e._timeline_get_fit_events_stats(r,n,o);var d;if(r.render=="cell"){d=a.querySelector('[data-section-index="'+n+'"]')}else{d=a.querySelector('[data-section-index="'+n+'"] .dhx_timeline_data_row')}if(d){for(var c=0;c<t.length;c++){var h=d.querySelector('[data-col-id="'+t[c]+'"]');if(!h){var f=this.getVisibleGridCell(r,i,o,_,n,t[c]);if(f)s+=f}}d.insertAdjacentHTML("beforeEnd",s)}}this._cols_to_add=[]},getVisibleGridCell:function(t,r,i,a,_,l){if(!t._h_cols[l])return;var n="";var s=t._h_cols[l].left-t.dx;if(t.render=="cell"){if(e._ignores[l]){}else{n+=e._timeline_get_html_for_cell(l,_,t,a[_][l],i,s)}}else{if(e._ignores[l]){}else{n+=e._timeline_get_html_for_bar(l,_,t,a[_],s)}}return n}}};e._temp_matrix_scope()});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_tooltip.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(t){(function(){window.dhtmlXTooltip=t.dhtmlXTooltip=t.tooltip={};dhtmlXTooltip.config={className:"dhtmlXTooltip tooltip",timeout_to_display:50,timeout_to_hide:50,delta_x:15,delta_y:-20};dhtmlXTooltip.tooltip=document.createElement("div");dhtmlXTooltip.tooltip.className=dhtmlXTooltip.config.className;t._waiAria.tooltipAttr(dhtmlXTooltip.tooltip);dhtmlXTooltip.show=function(e,i){if(this._mobile&&!t.config.touch_tooltip)return;var o=dhtmlXTooltip;var l=this.tooltip;var n=l.style;o.tooltip.className=o.config.className;var r=this.position(e);var d=e.target||e.srcElement;if(this.isTooltip(d)){return}var a=r.x+(o.config.delta_x||0);var p=r.y-(o.config.delta_y||0);n.visibility="hidden";if(n.removeAttribute){n.removeAttribute("right");n.removeAttribute("bottom")}else{n.removeProperty("right");n.removeProperty("bottom")}n.left="0";n.top="0";if(t.config.rtl){l.className+=" dhtmlXTooltip_rtl"}this.tooltip.innerHTML=i;document.body.appendChild(this.tooltip);var s=this.tooltip.offsetWidth;var h=this.tooltip.offsetHeight;if(document.documentElement.clientWidth-a-s<0){if(n.removeAttribute)n.removeAttribute("left");else n.removeProperty("left");n.right=document.documentElement.clientWidth-a+2*(o.config.delta_x||0)+"px"}else{if(a<0){n.left=r.x+Math.abs(o.config.delta_x||0)+"px"}else{n.left=a+"px"}}if(document.documentElement.clientHeight-p-h<0){if(n.removeAttribute)n.removeAttribute("top");else n.removeProperty("top");n.bottom=document.documentElement.clientHeight-p-2*(o.config.delta_y||0)+"px"}else{if(p<0){n.top=r.y+Math.abs(o.config.delta_y||0)+"px"}else{n.top=p+"px"}}t._waiAria.tooltipVisibleAttr(this.tooltip);n.visibility="visible";this.tooltip.onmouseleave=function(e){e=e||window.event;var i=t.dhtmlXTooltip;var o=e.relatedTarget;while(o!=t._obj&&o){o=o.parentNode}if(o!=t._obj)i.delay(i.hide,i,[],i.config.timeout_to_hide)};t.callEvent("onTooltipDisplayed",[this.tooltip,this.tooltip.event_id])};dhtmlXTooltip._clearTimeout=function(){if(this.tooltip._timeout_id){window.clearTimeout(this.tooltip._timeout_id)}};dhtmlXTooltip.hide=function(){if(this.tooltip.parentNode){t._waiAria.tooltipHiddenAttr(this.tooltip);var e=this.tooltip.event_id;this.tooltip.event_id=null;this.tooltip.onmouseleave=null;this.tooltip.parentNode.removeChild(this.tooltip);t.callEvent("onAfterTooltip",[e])}this._clearTimeout()};dhtmlXTooltip.delay=function(t,e,i,o){this._clearTimeout();this.tooltip._timeout_id=setTimeout(function(){var o=t.apply(e,i);t=e=i=null;return o},o||this.config.timeout_to_display)};dhtmlXTooltip.isTooltip=function(t){var e=false;while(t&&!e){e=t.className==this.tooltip.className;t=t.parentNode}return e};dhtmlXTooltip.position=function(t){t=t||window.event;return{x:t.clientX,y:t.clientY}};t.attachEvent("onMouseMove",function(e,i){var o=window.event||i;var l=o.target||o.srcElement;var n=dhtmlXTooltip;var r=n.isTooltip(l);var d=n.isTooltipTarget&&n.isTooltipTarget(l);if(e&&t.getState().editor_id!=e||r||d){var a;if(e||n.tooltip.event_id){var p=t.getEvent(e)||t.getEvent(n.tooltip.event_id);if(!p)return;n.tooltip.event_id=p.id;a=t.templates.tooltip_text(p.start_date,p.end_date,p);if(!a)return n.hide()}if(d){a=""}var s;if(t.$env.isIE){s={pageX:undefined,pageY:undefined,clientX:undefined,clientY:undefined,target:undefined,srcElement:undefined};for(var h in s){s[h]=o[h]}}if(!t.callEvent("onBeforeTooltip",[e])||!a)return;n.delay(n.show,n,[s||o,a])}else{n.delay(n.hide,n,[],n.config.timeout_to_hide)}});t.attachEvent("onBeforeDrag",function(){dhtmlXTooltip.hide();return true});t.attachEvent("onEventDeleted",function(){dhtmlXTooltip.hide();return true})})()});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_treetimeline.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e.attachEvent("onTimelineCreated",function(t){if(t.render=="tree"){t.y_unit_original=t.y_unit;t.y_unit=e._getArrayToDisplay(t.y_unit_original);e.attachEvent("onOptionsLoadStart",function(){t.y_unit=e._getArrayToDisplay(t.y_unit_original)});e.form_blocks[t.name]={render:function(e){var t="<div class='dhx_section_timeline' style='overflow: hidden; height: "+e.height+"px'></div>";return t},set_value:function(t,i,n,r){var a=e._getArrayForSelect(e.matrix[r.type].y_unit_original,r.type);t.innerHTML="";var l=document.createElement("select");t.appendChild(l);var o=t.getElementsByTagName("select")[0];if(!o._dhx_onchange&&r.onchange){o.onchange=r.onchange;o._dhx_onchange=true}for(var _=0;_<a.length;_++){var d=document.createElement("option");d.value=a[_].key;if(d.value==n[e.matrix[r.type].y_property])d.selected=true;d.innerHTML=a[_].label;o.appendChild(d)}},get_value:function(e,t,i){return e.firstChild.value},focus:function(e){}}}});e.attachEvent("onBeforeSectionRender",function(t,i,n){var r={};if(t=="tree"){var a;var l,o,_;var d;var c;_="dhx_matrix_scell";if(i.children){a=n.folder_dy||n.dy;if(n.folder_dy&&!n.section_autoheight){o="height:"+n.folder_dy+"px;"}l="dhx_row_folder";_+=" folder";if(i.open){_+=" opened"}else{_+=" closed"}d="<div class='dhx_scell_expand'>"+(i.open?"-":"+")+"</div>";c=n.folder_events_available?"dhx_data_table folder_events":"dhx_data_table folder"}else{a=n.dy;l="dhx_row_item";_+=" item";d="";c="dhx_data_table"}_+=e.templates[n.name+"_scaley_class"](i.key,i.label,i)?" "+e.templates[n.name+"_scaley_class"](i.key,i.label,i):"";var f="<div class='dhx_scell_level"+i.level+"'>"+d+"<div class='dhx_scell_name'>"+(e.templates[n.name+"_scale_label"](i.key,i.label,i)||i.label)+"</div></div>";r={height:a,style_height:o,tr_className:l,td_className:_,td_content:f,table_className:c}}return r});var t;e.attachEvent("onBeforeEventChanged",function(i,n,r){if(e._isRender("tree")){var a=e._get_event_sections?e._get_event_sections(i):[i[e.matrix[e._mode].y_property]];for(var l=0;l<a.length;l++){var o=e.getSection(a[l]);if(o&&!!o.children&&!e.matrix[e._mode].folder_events_available){if(!r){i[e.matrix[e._mode].y_property]=t}return false}}}return true});e.attachEvent("onBeforeDrag",function(i,n,r){if(e._isRender("tree")){var a=e._locate_cell_timeline(r);var l;if(a){l=e.matrix[e._mode].y_unit[a.y].key;if(!!e.matrix[e._mode].y_unit[a.y].children&&!e.matrix[e._mode].folder_events_available){return false}}var o=e.getEvent(i);var _=e.matrix[e._mode].y_property;t=o&&o[_]?o[_]:l}return true});e._getArrayToDisplay=function(t){var i=[];var n=function(t,r,a,l){var o=r||0;for(var _=0;_<t.length;_++){var d=t[_];d.level=o;d.$parent=a||null;if(!!d.children&&typeof d.key=="undefined"){d.key=e.uid()}if(!l){i.push(d)}if(d.children){n(d.children,o+1,d.key,l||!d.open)}}};n(t);return i};e._getArrayForSelect=function(t,i){var n=[];var r=function(t){for(var a=0;a<t.length;a++){if(e.matrix[i].folder_events_available){n.push(t[a])}else{if(!t[a].children){n.push(t[a])}}if(t[a].children)r(t[a].children,i)}};r(t);return n};e._toggleFolderDisplay=function(t,i,n){var r;var a=function(e,t,i,n){for(var l=0;l<t.length;l++){if((t[l].key==e||n)&&t[l].children){t[l].open=typeof i!="undefined"?i:!t[l].open;r=true;if(!n&&r)break}if(t[l].children){a(e,t[l].children,i,n)}}};var l=e.getSection(t);if(typeof i=="undefined"&&!n){i=!l.open}if(e.callEvent("onBeforeFolderToggle",[l,i,n])){a(t,e.matrix[e._mode].y_unit_original,i,n);e.matrix[e._mode].y_unit=e._getArrayToDisplay(e.matrix[e._mode].y_unit_original);e.callEvent("onOptionsLoad",[]);e.callEvent("onAfterFolderToggle",[l,i,n])}};e.attachEvent("onCellClick",function(t,i,n,r,a){if(e._isRender("tree")){if(!e.matrix[e._mode].folder_events_available){if(typeof e.matrix[e._mode].y_unit[i]!="undefined"&&!!e.matrix[e._mode].y_unit[i].children){e._toggleFolderDisplay(e.matrix[e._mode].y_unit[i].key)}}}});e.attachEvent("onYScaleClick",function(t,i,n){if(e._isRender("tree")){if(!!i.children){e._toggleFolderDisplay(i.key)}}});e.getSection=function(t){if(e._isRender("tree")){var i;var n=function(e,t){for(var r=0;r<t.length;r++){if(t[r].key==e)i=t[r];if(t[r].children)n(e,t[r].children)}};n(t,e.matrix[e._mode].y_unit_original);return i||null}};e.deleteSection=function(t){if(e._isRender("tree")){var i=false;var n=function(e,t){for(var r=0;r<t.length;r++){if(t[r].key==e){t.splice(r,1);i=true}if(i)break;if(t[r].children)n(e,t[r].children)}};n(t,e.matrix[e._mode].y_unit_original);e.matrix[e._mode].y_unit=e._getArrayToDisplay(e.matrix[e._mode].y_unit_original);e.callEvent("onOptionsLoad",[]);return i}};e.deleteAllSections=function(){if(e._isRender("tree")){e.matrix[e._mode].y_unit_original=[];e.matrix[e._mode].y_unit=e._getArrayToDisplay(e.matrix[e._mode].y_unit_original);e.callEvent("onOptionsLoad",[])}};e.addSection=function(t,i){if(e._isRender("tree")){var n=false;var r=function(e,t,a){if(!i){a.push(e);n=true}else{for(var l=0;l<a.length;l++){if(a[l].key==t&&!!a[l].children){a[l].children.push(e);n=true}if(n)break;if(a[l].children)r(e,t,a[l].children)}}};r(t,i,e.matrix[e._mode].y_unit_original);e.matrix[e._mode].y_unit=e._getArrayToDisplay(e.matrix[e._mode].y_unit_original);e.callEvent("onOptionsLoad",[]);return n}};e.openAllSections=function(){if(e._isRender("tree"))e._toggleFolderDisplay(1,true,true)};e.closeAllSections=function(){if(e._isRender("tree"))e._toggleFolderDisplay(1,false,true)};e.openSection=function(t){if(e._isRender("tree"))e._toggleFolderDisplay(t,true)};e.closeSection=function(t){if(e._isRender("tree"))e._toggleFolderDisplay(t,false)}});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_units.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e._props={};e.createUnitsView=function(t,s,a,i,r,n,o){if(typeof t=="object"){a=t.list;s=t.property;i=t.size||0;r=t.step||1;n=t.skip_incorrect;o=t.days||1;t=t.name}e._props[t]={map_to:s,options:a,step:r,position:0,days:o};if(i>e._props[t].options.length){e._props[t]._original_size=i;i=0}e._props[t].size=i;e._props[t].skip_incorrect=n||false;e.date[t+"_start"]=e.date.day_start;e.templates[t+"_date"]=function(s,a){var i=e._props[t];if(!(i.days>1)){return e.templates.day_date(s)}else{return e.templates.week_date(s,a)}};function _(t){return Math.round((e._correct_shift(+t,1)-+e._min_date)/(60*60*24*1e3))}e._get_unit_index=function(e,t){var s=e.position||0;var a=_(t);var i=e.size||e.options.length;if(a>=i){a=a%i}return s+a};e.templates[t+"_scale_text"]=function(e,t,s){if(s.css){return"<span class='"+s.css+"'>"+t+"</span>"}else{return t}};e.templates[t+"_scale_date"]=function(s){var a=e._props[t];var i=a.options;if(!i.length)return"";var r=e._get_unit_index(a,s);var n=i[r];var o=_(s);var d=a.size||a.options.length;var p=e.date.add(e.getState().min_date,Math.floor(o/d),"day");return e.templates[t+"_scale_text"](n.key,n.label,n,p)};e.templates[t+"_second_scale_date"]=function(t){return e.templates.week_scale_date(t)};e.date["add_"+t]=function(s,a){return e.date.add(s,a*e._props[t].days,"day")};e.date["get_"+t+"_end"]=function(s){return e.date.add(s,(e._props[t].size||e._props[t].options.length)*e._props[t].days,"day")};e.attachEvent("onOptionsLoad",function(){var s=e._props[t];var a=s.order={};var i=s.options;for(var r=0;r<i.length;r++)a[i[r].key]=r;if(s._original_size&&s.size===0){s.size=s._original_size;delete s._original_size}if(s.size>i.length){s._original_size=s.size;s.position=0;s.size=0}else s.size=s._original_size||s.size;if(e._date&&e._mode==t)e.setCurrentView(e._date,e._mode)});e["mouse_"+t]=function(t){var s=e._props[this._mode];if(s){t=this._week_indexes_from_pos(t);if(!this._drag_event)this._drag_event={};if(this._drag_id&&this._drag_mode){this._drag_event._dhx_changed=true}if(this._drag_mode&&this._drag_mode=="new-size"){var a=e._get_event_sday(e._events[e._drag_id]);if(Math.floor(t.x/s.options.length)!=Math.floor(a/s.options.length))t.x=a}var i=s.size||s.options.length;var r=t.x%i;var n=Math.min(r+s.position,s.options.length-1);t.section=(s.options[n]||{}).key;t.x=Math.floor(t.x/i);var o=this.getEvent(this._drag_id);this._update_unit_section({view:s,event:o,pos:t})}t.force_redraw=true;return t};var d=false;function p(){if(!d){d=e.xy.scale_height;e.xy.scale_height=e.xy.scale_height*2}}function l(){if(d){e.xy.scale_height/=2;d=false}}e[t+"_view"]=function(t){var s=e._props[e._mode];if(t){if(s&&s.days>1){p()}else{l()}e._reset_scale()}else{l()}};e.callEvent("onOptionsLoad",[])};e._update_unit_section=function(e){var t=e.view,s=e.event,a=e.pos;if(s){s[t.map_to]=a.section}};e.scrollUnit=function(t){var s=e._props[this._mode];if(s){s.position=Math.min(Math.max(0,s.position+t),s.options.length-s.size);this.setCurrentView()}};(function(){var t=function(t){var s=e._props[e._mode];if(s&&s.order&&s.skip_incorrect){var a=[];for(var i=0;i<t.length;i++){if(typeof s.order[t[i][s.map_to]]!="undefined"){a.push(t[i])}}t.splice(0,t.length);t.push.apply(t,a)}return t};var s=e._pre_render_events_table;e._pre_render_events_table=function(e,a){e=t(e);return s.apply(this,[e,a])};var a=e._pre_render_events_line;e._pre_render_events_line=function(e,s){e=t(e);return a.apply(this,[e,s])};var i=function(t,s){if(t&&typeof t.order[s[t.map_to]]=="undefined"){var a=e;var i=24*60*60*1e3;var r=Math.floor((s.end_date-a._min_date)/i);if(t.options.length)s[t.map_to]=t.options[Math.min(r+t.position,t.options.length-1)].key;return true}};var r=e.is_visible_events;e.is_visible_events=function(t){var s=r.apply(this,arguments);if(s){var a=e._props[this._mode];if(a&&a.size){var i=a.order[t[a.map_to]];if(i<a.position||i>=a.size+a.position)return false}}return s};var n=e._process_ignores;e._process_ignores=function(t,s,a,i,r){if(!e._props[this._mode]){n.call(this,t,s,a,i,r);return}this._ignores={};this._ignores_detected=0;var o=e["ignore_"+this._mode];if(o){var _=e._props&&e._props[this._mode]?e._props[this._mode].size||e._props[this._mode].options.length:1;s/=_;var d=new Date(t);for(var p=0;p<s;p++){if(o(d)){var l=p*_,h=(p+1)*_;for(var c=l;c<h;c++){this._ignores_detected+=1;this._ignores[c]=true;if(r)s++}}d=e.date.add(d,i,a);if(e.date[a+"_start"])d=e.date[a+"_start"](d)}}};var o=e._reset_scale;e._reset_scale=function(){var t=e._props[this._mode];if(t){if(t.size&&t.position&&t.size+t.position>t.options.length){t.position=Math.max(0,t.options.length-t.size)}else if(!t.size){t.position=0}}var s=o.apply(this,arguments);if(t){this._max_date=this.date.add(this._min_date,t.days,"day");var a=this._els["dhx_cal_data"][0].childNodes;for(var i=0;i<a.length;i++)a[i].className=a[i].className.replace("_now","");var r=this._currentDate();if(r.valueOf()>=this._min_date&&r.valueOf()<this._max_date){var n=24*60*60*1e3;var _=Math.floor((r-e._min_date)/n);var d=t.size||t.options.length;var p=_*d;var l=p+d;for(i=p;i<l;i++){if(a[i])a[i].className=a[i].className.replace("dhx_scale_holder","dhx_scale_holder_now")}}if(t.size&&t.size<t.options.length){var h=this._els["dhx_cal_header"][0];var c=document.createElement("div");if(t.position){this._waiAria.headerButtonsAttributes(c,"");if(e.config.rtl){c.className="dhx_cal_next_button";c.style.cssText="left:auto; right:0px;top:2px;position:absolute;"}else{c.className="dhx_cal_prev_button";c.style.cssText="left:1px;top:2px;position:absolute;"}c.innerHTML="&nbsp;";h.firstChild.appendChild(c);c.onclick=function(){e.scrollUnit(t.step*-1)}}if(t.position+t.size<t.options.length){this._waiAria.headerButtonsAttributes(c,"");c=document.createElement("div");if(e.config.rtl){c.className="dhx_cal_prev_button";c.style.cssText="left:1px;top:2px;position:absolute;"}else{c.className="dhx_cal_next_button";c.style.cssText="left:auto; right:0px;top:2px;position:absolute;"}c.innerHTML="&nbsp;";h.lastChild.appendChild(c);c.onclick=function(){e.scrollUnit(t.step)}}}}return s};var _=e._get_view_end;e._get_view_end=function(){var t=e._props[this._mode];if(t&&t.days>1){var s=this._get_timeunit_start();return e.date.add(s,t.days,"day")}else{return _.apply(this,arguments)}};var d=e._render_x_header;e._render_x_header=function(t,s,a,i){var r=e._props[this._mode];if(!r||r.days<=1){return d.apply(this,arguments)}else if(r.days>1){var n=i.querySelector(".dhx_second_cal_header");if(!n){n=document.createElement("div");n.className="dhx_second_cal_header";i.appendChild(n)}var o=e.xy.scale_height;e.xy.scale_height=Math.ceil(o/2);d.call(this,t,s,a,n,Math.ceil(e.xy.scale_height));var _=r.size||r.options.length;if((t+1)%_===0){var p=document.createElement("div");p.className="dhx_scale_bar dhx_second_scale_bar";var l=this.date.add(this._min_date,Math.floor(t/_),"day");if(this.templates[this._mode+"_second_scalex_class"]){p.className+=" "+this.templates[this._mode+"_second_scalex_class"](new Date(l))}var h,c=this._cols[t]*_-1;if(_>1&&this.config.rtl){h=this._colsS[t-(_-1)]-this.xy.scroll_width-2}else if(_>1){h=this._colsS[t-(_-1)]-this.xy.scale_width-2}else{h=s}this.set_xy(p,c,this.xy.scale_height-2,h,0);p.innerHTML=this.templates[this._mode+"_second_scale_date"](new Date(l),this._mode);n.appendChild(p)}e.xy.scale_height=o}};var p=e._get_event_sday;e._get_event_sday=function(t){var s=e._props[this._mode];if(s){if(s.days<=1){i(s,t);return this._get_section_sday(t[s.map_to])}else{var a=24*60*60*1e3;var r=Math.floor((t.end_date.valueOf()-1-t.end_date.getTimezoneOffset()*60*1e3-(e._min_date.valueOf()-e._min_date.getTimezoneOffset()*60*1e3))/a);var n=s.size||s.options.length;var o=s.order[t[s.map_to]];return r*n+o-s.position}}return p.call(this,t)};e._get_section_sday=function(t){var s=e._props[this._mode];return s.order[t]-s.position};var l=e.locate_holder_day;e.locate_holder_day=function(t,s,a){var r=e._props[this._mode];if(!r){return l.apply(this,arguments)}var n;if(!a){a={start_date:t,end_date:t};n=0}else{i(r,a)}if(r.days<=1){return(n===undefined?r.order[a[r.map_to]]:n)*1+(s?1:0)-r.position}else{var o=24*60*60*1e3;var _=Math.floor((a.start_date.valueOf()-e._min_date.valueOf())/o);var d=r.size||r.options.length;var p=n===undefined?r.order[a[r.map_to]]:n;return _*d+p*1+(s?1:0)-r.position}};var h=e._time_order;e._time_order=function(t){var s=e._props[this._mode];if(s){t.sort(function(e,t){return s.order[e[s.map_to]]>s.order[t[s.map_to]]?1:-1})}else h.apply(this,arguments)};var c=e._pre_render_events_table;e._pre_render_events_table=function(t,s){var a=e._props[this._mode];if(a&&a.days>1){var i={};for(var r=0;r<t.length;r++){var n=t[r];if(!e.isOneDayEvent(t[r])){var o=new Date(Math.min(+n.end_date,+this._max_date)),_=new Date(Math.max(+n.start_date,+this._min_date));_=e.date.day_start(_);t.splice(r,1);r--;while(+_<+o){var d=this._copy_event(n);d.start_date=_;d.end_date=g(d.start_date);_=e.date.add(_,1,"day");var p=+e.date.date_part(new Date(_));if(!i[p])i[p]=[];i[p].push(d)}}else{var p=+e.date.date_part(new Date(n.start_date));if(!i[p])i[p]=[];i[p].push(n)}}var l;var t=[];for(var r in i){var h=c.apply(this,[i[r],s]);var f=this._colsS.heights;if(!l||f[0]>l[0]){l=f.slice()}t.push.apply(t,h)}var v=this._colsS.heights;v.splice(0,v.length);v.push.apply(v,l);for(var r=0;r<t.length;r++){if(this._ignores[t[r]._sday]){t.splice(r,1);r--}else{var u=t[r];u._first_chunk=u._last_chunk=false;var m=this.getEvent(u.id);m._sorder=u._sorder}}t.sort(function(e,t){if(e.start_date.valueOf()==t.start_date.valueOf())return e.id>t.id?1:-1;return e.start_date>t.start_date?1:-1})}else{t=c.apply(this,[t,s])}function g(t){var s=e.date.add(t,1,"day");s=e.date.date_part(s);return s}return t};e.attachEvent("onEventAdded",function(t,s){if(this._loading)return true;for(var a in e._props){var i=e._props[a];if(typeof s[i.map_to]=="undefined"&&i.options[0]){s[i.map_to]=i.options[0].key}}return true});e.attachEvent("onEventCreated",function(t,s){var a=e._props[this._mode];if(a&&s){var r=this.getEvent(t);i(a,r);var n=this._mouse_coords(s);this._update_unit_section({view:a,event:r,pos:n});this.event_updated(r)}return true})})()});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_url.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(t){t._get_url_nav=function(){var t={};var e=(document.location.hash||"").replace("#","").split(",");for(var n=0;n<e.length;n++){var a=e[n].split("=");if(a.length==2)t[a[0]]=a[1]}return t};t.attachEvent("onTemplatesReady",function(){var e=true;var n=t.date.str_to_date("%Y-%m-%d");var a=t.date.date_to_str("%Y-%m-%d");var r=t._get_url_nav().event||null;t.attachEvent("onAfterEventDisplay",function(t){r=null;return true});t.attachEvent("onBeforeViewChange",function(i,o,v,l){if(e){e=false;var c=t._get_url_nav();if(c.event){try{if(t.getEvent(c.event)){setTimeout(function(){u(c.event)});return false}else{var f=t.attachEvent("onXLE",function(){setTimeout(function(){u(c.event)});t.detachEvent(f)})}}catch(t){}}if(c.date||c.mode){try{this.setCurrentView(c.date?n(c.date):null,c.mode||null)}catch(t){this.setCurrentView(c.date?n(c.date):null,v)}return false}}var d=["date="+a(l||o),"mode="+(v||i)];if(r){d.push("event="+r)}var s="#"+d.join(",");document.location.hash=s;return true});function u(e){r=e;if(t.getEvent(e)){t.showEvent(e)}}})});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_week_agenda.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e._wa={};e.xy.week_agenda_scale_height=20;e.templates.week_agenda_event_text=function(a,t,_,d){return e.templates.event_date(a)+" "+_.text};e.date.week_agenda_start=e.date.week_start;e.date.week_agenda_end=function(a){return e.date.add(a,7,"day")};e.date.add_week_agenda=function(a,t){return e.date.add(a,t*7,"day")};e.attachEvent("onSchedulerReady",function(){var a=e.templates;if(!a.week_agenda_date)a.week_agenda_date=a.week_date});(function(){var a=e.date.date_to_str("%l, %F %d");e.templates.week_agenda_scale_date=function(e){return a(e)}})();e.attachEvent("onTemplatesReady",function(){var a=e.render_data;e.render_data=function(t){if(this._mode=="week_agenda"){e.week_agenda_view(true)}else return a.apply(this,arguments)};var t=function(){e._cols=[];var a=parseInt(e._els["dhx_cal_data"][0].style.width);e._cols.push(Math.floor(a/2));e._cols.push(a-e._cols[0]-1);e._colsS={0:[],1:[]};var t=parseInt(e._els["dhx_cal_data"][0].style.height);for(var _=0;_<3;_++){e._colsS[0].push(Math.floor(t/(3-e._colsS[0].length)));t-=e._colsS[0][_]}e._colsS[1].push(e._colsS[0][0]);e._colsS[1].push(e._colsS[0][1]);t=e._colsS[0][e._colsS[0].length-1];e._colsS[1].push(Math.floor(t/2));e._colsS[1].push(t-e._colsS[1][e._colsS[1].length-1])};var _=function(){t();e._els["dhx_cal_data"][0].innerHTML="";e._rendered=[];var a="";for(var _=0;_<2;_++){var d=e._cols[_];var l="dhx_wa_column";if(_==1)l+=" dhx_wa_column_last";a+="<div class='"+l+"' style='width: "+d+"px;'>";for(var s=0;s<e._colsS[_].length;s++){var n=e.xy.week_agenda_scale_height-2;var r=e._colsS[_][s]-n-2;var i=Math.min(6,s*2+_);a+="<div class='dhx_wa_day_cont'><div style='height:"+n+"px; line-height:"+n+"px;' class='dhx_wa_scale_bar'></div><div style='height:"+r+"px;' class='dhx_wa_day_data' day='"+i+"'></div></div>"}a+="</div>"}var c=e._getNavDateElement();if(c){c.innerHTML=e.templates[e._mode+"_date"](e._min_date,e._max_date,e._mode)}e._els["dhx_cal_data"][0].innerHTML=a;var o=e._els["dhx_cal_data"][0].getElementsByTagName("div");var h=[];for(var _=0;_<o.length;_++){if(o[_].className=="dhx_wa_day_cont")h.push(o[_])}e._wa._selected_divs=[];var v=e.get_visible_events();var f=e.date.week_start(e._date);var u=e.date.add(f,1,"day");for(var _=0;_<7;_++){h[_]._date=f;e._waiAria.weekAgendaDayCell(h[_],f);var g=h[_].childNodes[0];var p=h[_].childNodes[1];g.innerHTML=e.templates.week_agenda_scale_date(f);var w=[];for(var x=0;x<v.length;x++){var m=v[x];if(m.start_date<u&&m.end_date>f)w.push(m)}w.sort(function(e,a){if(e.start_date.valueOf()==a.start_date.valueOf())return e.id>a.id?1:-1;return e.start_date>a.start_date?1:-1});for(var s=0;s<w.length;s++){var y=w[s];var k=document.createElement("div");e._rendered.push(k);var S=e.templates.event_class(y.start_date,y.end_date,y);k.className="dhx_wa_ev_body"+(S?" "+S:"");if(e.config.rtl)k.className+=" dhx_wa_ev_body_rtl";if(y._text_style)k.style.cssText=y._text_style;if(y.color)k.style.background=y.color;if(y.textColor)k.style.color=y.textColor;if(e._select_id&&y.id==e._select_id&&!(!e.config.week_agenda_select&&e.config.week_agenda_select!==undefined)){k.className+=" dhx_cal_event_selected";e._wa._selected_divs.push(k)}var b="";if(!y._timed){b="middle";if(y.start_date.valueOf()>=f.valueOf()&&y.start_date.valueOf()<=u.valueOf())b="start";if(y.end_date.valueOf()>=f.valueOf()&&y.end_date.valueOf()<=u.valueOf())b="end"}k.innerHTML=e.templates.week_agenda_event_text(y.start_date,y.end_date,y,f,b);k.setAttribute("event_id",y.id);e._waiAria.weekAgendaEvent(k,y);p.appendChild(k)}f=e.date.add(f,1,"day");u=e.date.add(u,1,"day")}};e.week_agenda_view=function(a){e._min_date=e.date.week_start(e._date);e._max_date=e.date.add(e._min_date,1,"week");e.set_sizes();if(a){e._table_view=e._allow_dnd=true;if(e._wa._prev_data_border===undefined)e._wa._prev_data_border=e._els["dhx_cal_data"][0].style.borderTopWidth;e._els["dhx_cal_data"][0].style.borderTopWidth=0;e._els["dhx_cal_data"][0].style.overflowY="hidden";e._els["dhx_cal_date"][0].innerHTML="";e._els["dhx_cal_data"][0].style.top=parseInt(e._els["dhx_cal_data"][0].style.top)-20-1+"px";e._els["dhx_cal_data"][0].style.height=parseInt(e._els["dhx_cal_data"][0].style.height)+20+1+"px";e._els["dhx_cal_header"][0].style.display="none";var t=e.$container.querySelector(".dhx_cal_scale_placeholder");if(t){t.style.display="none"}_()}else{e._table_view=e._allow_dnd=false;if(e._wa._prev_data_border!==undefined){e._els["dhx_cal_data"][0].style.borderTopWidth=e._wa._prev_data_border;delete e._wa._prev_data_border}e._els["dhx_cal_data"][0].style.overflowY="auto";e._els["dhx_cal_data"][0].style.top=parseInt(e._els["dhx_cal_data"][0].style.top)+20+"px";e._els["dhx_cal_data"][0].style.height=parseInt(e._els["dhx_cal_data"][0].style.height)-20+"px";e._els["dhx_cal_header"][0].style.display="block"}};e.mouse_week_agenda=function(a){var t=a.ev;var _=t.srcElement||t.target;var d;while(_.parentNode){if(_._date)d=_._date;_=_.parentNode}if(!d)return a;a.x=0;var l=d.valueOf()-e._min_date.valueOf();a.y=Math.ceil(l/(1e3*60)/this.config.time_step);if(this._drag_mode=="move"&&this._drag_pos&&this._is_pos_changed(this._drag_pos,a)){var s;this._drag_event._dhx_changed=true;this._select_id=this._drag_id;for(var n=0;n<e._rendered.length;n++){if(e._drag_id==this._rendered[n].getAttribute("event_id"))s=this._rendered[n]}if(!e._wa._dnd){var r=s.cloneNode(true);this._wa._dnd=r;r.className=s.className;r.id="dhx_wa_dnd";r.className+=" dhx_wa_dnd";document.body.appendChild(r)}var i=document.getElementById("dhx_wa_dnd");i.style.top=(t.pageY||t.clientY)+20+"px";i.style.left=(t.pageX||t.clientX)+20+"px"}return a};e.attachEvent("onBeforeEventChanged",function(a,t,_){if(this._mode=="week_agenda"){if(this._drag_mode=="move"){var d=document.getElementById("dhx_wa_dnd");d.parentNode.removeChild(d);e._wa._dnd=false}}return true});e.attachEvent("onEventSave",function(e,a,t){if(t&&this._mode=="week_agenda")this._select_id=e;return true});e._wa._selected_divs=[];e.attachEvent("onClick",function(a,t){if(this._mode=="week_agenda"&&!(!e.config.week_agenda_select&&e.config.week_agenda_select!==undefined)){if(e._wa._selected_divs){for(var _=0;_<this._wa._selected_divs.length;_++){var d=this._wa._selected_divs[_];d.className=d.className.replace(/ dhx_cal_event_selected/,"")}}this.for_rendered(a,function(a){a.className+=" dhx_cal_event_selected";e._wa._selected_divs.push(a)});e._select_id=a;return false}return true})})});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_wp.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(t){t.attachEvent("onLightBox",function(){if(this._cover){try{this._cover.style.height=this.expanded?"100%":(document.body.parentNode||document.body).scrollHeight+"px"}catch(t){}}});t.form_blocks.select.set_value=function(t,e,i){if(typeof e=="undefined"||e==="")e=(t.firstChild.options[0]||{}).value;t.firstChild.value=e||""}});
},
	"fw/Scheduler/libs/ext/dhtmlxscheduler_year_view.js":function(){/*

@license
dhtmlxScheduler v.5.3.10 Professional

This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){e.config.year_x=4;e.config.year_y=3;e.xy.year_top=0;e.templates.year_date=function(t){return e.date.date_to_str(e.locale.labels.year_tab+" %Y")(t)};e.templates.year_month=e.date.date_to_str("%F");e.templates.year_scale_date=e.date.date_to_str("%D");e.templates.year_tooltip=function(e,t,a){return a.text};(function(){var t=function(){return e._mode=="year"};e.dblclick_dhx_month_head=function(a){if(t()){var r=a.target||a.srcElement;var _=e._getClassName(r.parentNode);if(_.indexOf("dhx_before")!=-1||_.indexOf("dhx_after")!=-1)return false;var i=r;while(i&&!(i.hasAttribute&&i.hasAttribute("date"))){i=i.parentNode}if(i){var o=this._helpers.parseDate(i.getAttribute("date"));o.setDate(parseInt(r.innerHTML,10));var l=this.date.add(o,1,"day");if(!this.config.readonly&&this.config.dblclick_create)this.addEventNow(o.valueOf(),l.valueOf(),a)}}};var a=e.changeEventId;e.changeEventId=function(){a.apply(this,arguments);if(t())this.year_view(true)};var r=e.render_data;var _=e.date.date_to_str("%Y/%m/%d");var i=e.date.str_to_date("%Y/%m/%d");e.render_data=function(e){if(!t())return r.apply(this,arguments);for(var a=0;a<e.length;a++)this._year_render_event(e[a])};var o=e.clear_view;e.clear_view=function(){if(!t())return o.apply(this,arguments);var a=e._year_marked_cells,r=null;for(var _ in a){if(a.hasOwnProperty(_)){r=a[_];r.className="dhx_month_head";r.removeAttribute("date")}}e._year_marked_cells={}};e._hideToolTip=function(){if(this._tooltip){this._tooltip.style.display="none";this._tooltip.date=new Date(9999,1,1)}};e._showToolTip=function(t,a,r,_){if(this._tooltip){if(this._tooltip.date.valueOf()==t.valueOf())return;this._tooltip.innerHTML=""}else{var i=this._tooltip=document.createElement("div");i.className="dhx_year_tooltip";if(this.config.rtl)i.className+=" dhx_tooltip_rtl";document.body.appendChild(i);i.onclick=e._click.dhx_cal_data}var o=this.getEvents(t,this.date.add(t,1,"day"));var l="";for(var s=0;s<o.length;s++){var n=o[s];if(!this.filter_event(n.id,n))continue;var d=n.color?"background:"+n.color+";":"";var h=n.textColor?"color:"+n.textColor+";":"";l+="<div class='dhx_tooltip_line' style='"+d+""+h+"' event_id='"+o[s].id+"'>";l+="<div class='dhx_tooltip_date' style='"+d+""+h+"'>"+(o[s]._timed?this.templates.event_date(o[s].start_date):"")+"</div>";l+="<div class='dhx_event_icon icon_details'>&nbsp;</div>";l+=this.templates.year_tooltip(o[s].start_date,o[s].end_date,o[s])+"</div>"}this._tooltip.style.display="";this._tooltip.style.top="0px";if(document.body.offsetWidth-a.left-this._tooltip.offsetWidth<0)this._tooltip.style.left=a.left-this._tooltip.offsetWidth+"px";else this._tooltip.style.left=a.left+_.offsetWidth+"px";this._tooltip.date=t;this._tooltip.innerHTML=l;if(document.body.offsetHeight-a.top-this._tooltip.offsetHeight<0)this._tooltip.style.top=a.top-this._tooltip.offsetHeight+_.offsetHeight+"px";else this._tooltip.style.top=a.top+"px"};e._year_view_tooltip_handler=function(a){if(!t())return;var a=a||event;var r=a.target||a.srcElement;if(r.tagName.toLowerCase()=="a")r=r.parentNode;if(e._getClassName(r).indexOf("dhx_year_event")!=-1)e._showToolTip(i(r.getAttribute("date")),e.$domHelpers.getOffset(r),a,r);else e._hideToolTip()};e._init_year_tooltip=function(){e._detachDomEvent(e._els["dhx_cal_data"][0],"mouseover",e._year_view_tooltip_handler);e.event(e._els["dhx_cal_data"][0],"mouseover",e._year_view_tooltip_handler)};e._get_year_cell=function(e){var t=e.getMonth()+12*(e.getFullYear()-this._min_date.getFullYear())-this.week_starts._month;var a=this._els["dhx_cal_data"][0].childNodes[t];var r=this.week_starts[t]+e.getDate()-1;var _=a.querySelectorAll(".dhx_year_body tr")[Math.floor(r/7)];var i=_.querySelectorAll("td")[r%7];return i.querySelector(".dhx_month_head")};e._year_marked_cells={};e._mark_year_date=function(t,a){var r=_(t);var i=this._get_year_cell(t);if(!i){return}var o=this.templates.event_class(a.start_date,a.end_date,a);if(!e._year_marked_cells[r]){i.className="dhx_month_head dhx_year_event";i.setAttribute("date",r);e._year_marked_cells[r]=i}i.className+=o?" "+o:""};e._unmark_year_date=function(e){var t=this._get_year_cell(e);if(!t){return}t.className="dhx_month_head"};e._year_render_event=function(e){var t=e.start_date;if(t.valueOf()<this._min_date.valueOf()){t=this._min_date}else{t=this.date.date_part(new Date(t))}while(t<e.end_date){this._mark_year_date(t,e);t=this.date.add(t,1,"day");if(t.valueOf()>=this._max_date.valueOf())return}};e.year_view=function(t){var a;if(t){a=e.xy.scale_height;e.xy.scale_height=-1}e._els["dhx_cal_header"][0].style.display=t?"none":"";e.set_sizes();if(t)e.xy.scale_height=a;e._table_view=t;if(this._load_mode&&this._load())return;if(t){e._init_year_tooltip();e._reset_year_scale();if(e._load_mode&&e._load()){e._render_wait=true;return}e.render_view_data()}else{e._hideToolTip()}};e._reset_year_scale=function(){this._cols=[];this._colsS={};var t=[];var a=this._els["dhx_cal_data"][0];var r=this.config;a.scrollTop=0;a.innerHTML="";var _=Math.floor(parseInt(a.style.width)/r.year_x);var i=Math.floor((parseInt(a.style.height)-e.xy.year_top)/r.year_y);if(i<190){i=190;_=Math.floor((parseInt(a.style.width)-e.xy.scroll_width)/r.year_x)}var o=_-11;var l=0;var s=document.createElement("div");var n=this.date.week_start(e._currentDate());this._process_ignores(n,7,"day",1);var d=7-(this._ignores_detected||0);var h=0;for(var c=0;c<7;c++){if(!(this._ignores&&this._ignores[c])){this._cols[c]=Math.floor(o/(d-h));this._render_x_header(c,l,n,s);o-=this._cols[c];l+=this._cols[c];h++}n=this.date.add(n,1,"day")}s.lastChild.className+=" dhx_scale_bar_last";for(var c=0;c<s.childNodes.length;c++){this._waiAria.yearHeadCell(s.childNodes[c])}var y=this.date[this._mode+"_start"](this.date.copy(this._date));var v=y;var f=null;for(var c=0;c<r.year_y;c++){for(var u=0;u<r.year_x;u++){f=document.createElement("div");f.className="dhx_year_box";f.style.cssText="position:absolute;";f.setAttribute("date",this._helpers.formatDate(y));f.innerHTML="<div class='dhx_year_month'></div><div class='dhx_year_grid'><div class='dhx_year_week'>"+s.innerHTML+"</div><div class='dhx_year_body'></div></div>";var m=f.querySelector(".dhx_year_month");var p=f.querySelector(".dhx_year_grid");var g=f.querySelector(".dhx_year_week");var x=f.querySelector(".dhx_year_body");var w=e.uid();this._waiAria.yearHeader(m,w);this._waiAria.yearGrid(p,w);m.innerHTML=this.templates.year_month(y);var b=this.date.week_start(y);var k=this._reset_month_scale(x,y,b,6);var N=x.querySelectorAll("td");for(var A=0;A<N.length;A++){this._waiAria.yearDayCell(N[A])}a.appendChild(f);g.style.height=g.childNodes[0].offsetHeight+"px";var T=Math.round((i-190)/2);f.style.marginTop=T+"px";this.set_xy(f,_-10,i-T-10,_*u+5,i*c+5+e.xy.year_top);t[c*r.year_x+u]=(y.getDay()-(this.config.start_on_monday?1:0)+7)%7;y=this.date.add(y,1,"month")}}var H=this._getNavDateElement();if(H){H.innerHTML=this.templates[this._mode+"_date"](v,y,this._mode)}this.week_starts=t;t._month=v.getMonth();this._min_date=v;this._max_date=y};var l=e.getActionData;e.getActionData=function(a){if(!t())return l.apply(e,arguments);var r=a?a.target:event.srcElement;var _=e._get_year_month_date(r);var i=e._get_year_month_cell(r);var o=e._get_year_day_indexes(i);if(o&&_){_=e.date.add(_,o.week,"week");_=e.date.add(_,o.day,"day")}else{_=null}return{date:_,section:null}};e._get_year_day_indexes=function(t){var a=e._get_year_el_node(t,this._locate_year_month_table);if(!a)return null;var r=0,_=0;for(var r=0,i=a.rows.length;r<i;r++){var o=a.rows[r].getElementsByTagName("td");for(var _=0,l=o.length;_<l;_++){if(o[_]==t)break}if(_<l)break}if(r<i)return{day:_,week:r};else return null};e._get_year_month_date=function(t){var t=e._get_year_el_node(t,e._locate_year_month_root);if(!t)return null;var a=t.getAttribute("date");if(!a)return null;return e.date.week_start(e.date.month_start(i(a)))};e._locate_year_month_day=function(t){return e._getClassName(t).indexOf("dhx_year_event")!=-1&&t.hasAttribute&&t.hasAttribute("date")};var s=e._locate_event;e._locate_event=function(t){var a=s.apply(e,arguments);if(!a){var r=e._get_year_el_node(t,e._locate_year_month_day);if(!r||!r.hasAttribute("date"))return null;var _=i(r.getAttribute("date"));var o=e.getEvents(_,e.date.add(_,1,"day"));if(!o.length)return null;a=o[0].id}return a};e._locate_year_month_cell=function(e){return e.nodeName.toLowerCase()=="td"};e._locate_year_month_table=function(e){return e.nodeName.toLowerCase()=="table"};e._locate_year_month_root=function(e){return e.hasAttribute&&e.hasAttribute("date")};e._get_year_month_cell=function(e){return this._get_year_el_node(e,this._locate_year_month_cell)};e._get_year_month_table=function(e){return this._get_year_el_node(e,this._locate_year_month_table)};e._get_year_month_root=function(e){return this._get_year_el_node(this._get_year_month_table(e),this._locate_year_month_root)};e._get_year_el_node=function(e,t){while(e&&!t(e)){e=e.parentNode}return e}})()});
},
	"fw/Scheduler/manifest.json":'{"_version":"1.9.0","sap.app":{"id":"fw.Scheduler","type":"library","embeds":[],"applicationVersion":{"version":"1.0.0"},"title":"UI5 library: fw.Scheduler","description":"UI5 library: fw.Scheduler","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_plus","sap_hcb"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.87","libs":{"sap.ui.core":{"minVersion":"1.87.3"}}},"library":{"i18n":false,"content":{"controls":["fw.Scheduler.Scheduler"],"elements":[],"types":[],"interfaces":[]}}}}'
});
